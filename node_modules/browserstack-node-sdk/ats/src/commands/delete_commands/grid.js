const a11_0x5c3d3a=a11_0xc9db;function a11_0x304a(){const _0x4d387b=['grid-id','Tazjf','statusCode','type','requestId','Saving\x20credentials\x20for\x20cloud\x20provider\x20locally\x20for\x20later\x20runs','delete','gNPCg','EDHBN','370fMvQkv','DLyYQ','clusterId','gridId','Failed\x20to\x20delete\x20resources!\x20Error:\x20','stringify','113658lEIimv','cloudProvider','icFEa','UrArt','fetchLocalCreds','ERROR','ltjnr','TPgrn','message','Browserstack','exit','tVBTz','Unable\x20to\x20fetch\x20credentials\x20for\x20cloud\x20provider\x20locally','Delete\x20an\x20Automation\x20grid.','\x22\x20with\x20ID\x20','deleteCluster','writeFileSync','Wrong\x20input!\x20Please\x20try\x20again\x20with\x20a\x20valid\x20input.','argv','stack','11mtYhmc','../../cloudproviders/utils','kBPkE','MEAUd','oKMxR','init-not-called','jfztA','help','\x20along\x20with\x20Kubernetes\x20Cluster\x20with\x20name\x20\x22','handler','1519680HOdlVM','wKmbA','ykuSf','delete-grid-called','JyVnX','xHwpx','NyYfl','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','DELETE','AQwlb','options','5722476DwykVS','clusterSpawnedVia','ACqJJ','JXqXa','SFoWU','mEHRY','BPsJe','UtSmM','UODuy','../../utils/gridComponents','info','../../utils/createk8sClient','8154951WHdgfH','unauthorised','../../utils/instrumentationUtils','region','clusterName','builder','735828gxgFJK','configureIfNotConfigured','TmeUI','Cnyck','toLowerCase','GoJGL','LkRQJ','109510OKUBCB','INFO','name','Djwab','onlyGridInCluster','pRKQP','NPNcB','/packages/cli/grid/','ZKlba','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','Grid\x20ID\x20not\x20passed.\x20Please\x20provide\x20a\x20Grid\x20ID\x20to\x20delete\x20using\x20--grid-id\x20option','../../config/constants','FRqXw','This\x20will\x20delete\x20the\x20Grid\x20with\x20name\x20\x22','Cluster:\x20','clusterRegion','JOiOK','description','wFBZM','usage','abqIy','../../config/logger','invalid-grid-id','EQNrb','99bMcyUH','WgbHo','mSQdD','aHnAY','readFileSync','PBaPs','existsSync','YQuzk','Pass\x20the\x20ID\x20of\x20the\x20Grid','Found\x20credentials\x20for\x20cloud\x20provider\x20locally.\x20Using\x20them\x20for\x20performing\x20actions','warn','password','GOXub','error','server-error','username','got','Grid\x20is\x20deleted\x20but\x20failed\x20to\x20update\x20server\x20for\x20grid\x20deletion.\x20Response\x20from\x20server:\x20','body','parse','BMxBN','65536130ixaWyl','\x20is\x20not\x20created\x20by\x20Browserstack.\x20Skipping\x20deletion\x20of\x20this\x20cluster','soqyF','Succesfully\x20deleted\x20the\x20grid','../../utils/utilityMethods','string','90sVkBza','qwueY','RFxtK','invalid-input','desc','seeeN'];a11_0x304a=function(){return _0x4d387b;};return a11_0x304a();}(function(_0x499451,_0x1a5361){const _0x1a1427=a11_0xc9db,_0x548269=_0x499451();while(!![]){try{const _0x4d9917=-parseInt(_0x1a1427(0xe1))/0x1+parseInt(_0x1a1427(0xe8))/0x2*(-parseInt(_0x1a1427(0x100))/0x3)+parseInt(_0x1a1427(0xcf))/0x4+parseInt(_0x1a1427(0xa0))/0x5*(-parseInt(_0x1a1427(0xa6))/0x6)+-parseInt(_0x1a1427(0xdb))/0x7+parseInt(_0x1a1427(0xc4))/0x8*(-parseInt(_0x1a1427(0x91))/0x9)+-parseInt(_0x1a1427(0x8b))/0xa*(-parseInt(_0x1a1427(0xba))/0xb);if(_0x4d9917===_0x1a5361)break;else _0x548269['push'](_0x548269['shift']());}catch(_0x536207){_0x548269['push'](_0x548269['shift']());}}}(a11_0x304a,0xee10a));function a11_0xc9db(_0xdf361b,_0x1bc54a){const _0x304a23=a11_0x304a();return a11_0xc9db=function(_0xc9db85,_0x215821){_0xc9db85=_0xc9db85-0x7a;let _0x358d3c=_0x304a23[_0xc9db85];return _0x358d3c;},a11_0xc9db(_0xdf361b,_0x1bc54a);}const fs=require('fs'),got=require(a11_0x5c3d3a(0x86)),{v4:uuidv4}=require('uuid'),{HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,global_registry,messageTypes,AG_API_URL,AWS,AZURE}=require(a11_0x5c3d3a(0xf3)),{logger}=require(a11_0x5c3d3a(0xfd)),{getCloudProviderObject}=require(a11_0x5c3d3a(0xbb)),{removeGridComponents,deleteClusterAndDependencies}=require(a11_0x5c3d3a(0xd8)),{sendInstrumentationEvent}=require(a11_0x5c3d3a(0xdd)),{inputConfirmation,inputCloudProviderKeys}=require('../../utils/userInput'),{createK8sClient}=require(a11_0x5c3d3a(0xda)),{kebabCase,getCredentialsPath,getGridDetails,getAuthHeader}=require(a11_0x5c3d3a(0x8f));exports['command']='grid',exports[a11_0x5c3d3a(0x95)]=a11_0x5c3d3a(0xb3),exports[a11_0x5c3d3a(0xe0)]=function(_0x215739){const _0x1ceba6=a11_0x5c3d3a,_0x1622b9={};_0x1622b9[_0x1ceba6(0xd5)]=_0x1ceba6(0x7e),_0x1622b9[_0x1ceba6(0x7d)]=_0x1ceba6(0x90),_0x1622b9[_0x1ceba6(0xd3)]=_0x1ceba6(0xc1);const _0x38008a=_0x1622b9,_0x509eb2={};_0x509eb2[_0x1ceba6(0xf9)]=_0x38008a[_0x1ceba6(0xd5)],_0x509eb2['type']=_0x38008a[_0x1ceba6(0x7d)];const _0x4dc9d7={};return _0x4dc9d7[_0x1ceba6(0x97)]=_0x509eb2,_0x215739[_0x1ceba6(0xfb)](HELP_HEADER_MESSAGE['delete'])['epilogue'](HELP_FOOTER_MESSAGE)[_0x1ceba6(0xce)](_0x4dc9d7)[_0x1ceba6(0xc1)](_0x38008a[_0x1ceba6(0xd3)])[_0x1ceba6(0xb8)];},exports[a11_0x5c3d3a(0xc3)]=async function(_0xfe8696){const _0x595c0c=a11_0x5c3d3a,_0x2d8016={'kBPkE':'Pass\x20the\x20ID\x20of\x20the\x20Grid','UtSmM':_0x595c0c(0x90),'yaDgX':'help','icFEa':_0x595c0c(0xf2),'AQwlb':function(_0x40f09e){return _0x40f09e();},'abqIy':function(_0x330724,_0x50973c){return _0x330724===_0x50973c;},'JOiOK':_0x595c0c(0xfa),'UODuy':_0x595c0c(0xf1),'Tazjf':function(_0x3885e3,_0x134ef2,_0x2758ab,_0x49af46,_0x3ef653,_0x4f5c76,_0x5f0561){return _0x3885e3(_0x134ef2,_0x2758ab,_0x49af46,_0x3ef653,_0x4f5c76,_0x5f0561);},'EDHBN':_0x595c0c(0xc7),'Djwab':_0x595c0c(0xbf),'RFxtK':function(_0x11284e,_0x452138,_0x50ec1e,_0x29d0c3,_0x4cffd0,_0x9c90a5,_0x55a9af){return _0x11284e(_0x452138,_0x50ec1e,_0x29d0c3,_0x4cffd0,_0x9c90a5,_0x55a9af);},'mSQdD':function(_0x54beaa,_0x3170a3){return _0x54beaa===_0x3170a3;},'flwYh':_0x595c0c(0xc8),'seeeN':'ylevU','JXqXa':function(_0x2a45a6){return _0x2a45a6();},'gNPCg':function(_0x1623bf,_0x5e4ad9,_0x5eb4c2,_0xf5e63f){return _0x1623bf(_0x5e4ad9,_0x5eb4c2,_0xf5e63f);},'NrzyL':_0x595c0c(0xaf),'GoJGL':function(_0x59dd03,_0x360179){return _0x59dd03!==_0x360179;},'mEHRY':'ocMHq','PBaPs':function(_0x120acb,_0x12e014){return _0x120acb(_0x12e014);},'tVBTz':function(_0x59934a,_0x4acbcd){return _0x59934a===_0x4acbcd;},'RkLBH':function(_0x33ee49,_0x2a7d4e){return _0x33ee49===_0x2a7d4e;},'oKMxR':function(_0x156ea4,_0x214426){return _0x156ea4===_0x214426;},'TmeUI':function(_0x39b20f,_0x3d9105){return _0x39b20f===_0x3d9105;},'NQiFs':function(_0x256c01,_0x2dffb4){return _0x256c01===_0x2dffb4;},'FRqXw':_0x595c0c(0xf0),'GOXub':_0x595c0c(0xb7),'vaimR':function(_0x59fb71,_0xf61f4e,_0x2f66a7,_0x335515,_0x288b0f,_0x559f27,_0x5f0499){return _0x59fb71(_0xf61f4e,_0x2f66a7,_0x335515,_0x288b0f,_0x559f27,_0x5f0499);},'LkRQJ':_0x595c0c(0x94),'BMxBN':_0x595c0c(0xa9),'TPgrn':function(_0xca212a,_0x57846b){return _0xca212a!==_0x57846b;},'aHnAY':_0x595c0c(0xac),'NPNcB':_0x595c0c(0xb2),'MEAUd':function(_0x267e15,_0x2e17a5){return _0x267e15!==_0x2e17a5;},'EQNrb':_0x595c0c(0xc9),'ykuSf':function(_0x5081eb){return _0x5081eb();},'Cnyck':_0x595c0c(0x9c),'NyYfl':_0x595c0c(0x7f),'vcTFc':function(_0x4e4cdb,_0x31f93f){return _0x4e4cdb(_0x31f93f);},'AEyfM':function(_0x4a74fc,_0xa4c128,_0x742c80,_0x1e27c8,_0x395773,_0x9ffcc){return _0x4a74fc(_0xa4c128,_0x742c80,_0x1e27c8,_0x395773,_0x9ffcc);},'qwueY':_0x595c0c(0xcc),'ACqJJ':function(_0x14f47e,_0x1fa9d9,_0x46e6eb){return _0x14f47e(_0x1fa9d9,_0x46e6eb);},'WgbHo':function(_0x5e02f4,_0x4ffaf0,_0x2bc020){return _0x5e02f4(_0x4ffaf0,_0x2bc020);},'wKmbA':function(_0xef61e4,_0x3685be){return _0xef61e4===_0x3685be;},'DLyYQ':_0x595c0c(0x84),'pRKQP':function(_0x5dc28d,_0x55ace3){return _0x5dc28d===_0x55ace3;},'soqyF':function(_0x5bd4fc,_0x47221b,_0x4188b2,_0x205963,_0x8cfaa9,_0x80bd75,_0x4b9cb7){return _0x5bd4fc(_0x47221b,_0x4188b2,_0x205963,_0x8cfaa9,_0x80bd75,_0x4b9cb7);},'bfCVR':_0x595c0c(0xdc),'drZgn':_0x595c0c(0xfe),'jfztA':function(_0x22aab0,_0x3e7176,_0x220dae,_0x35b1e6,_0x5a6ee5,_0x3217a5,_0x1a2532){return _0x22aab0(_0x3e7176,_0x220dae,_0x35b1e6,_0x5a6ee5,_0x3217a5,_0x1a2532);},'qhVaP':function(_0x36b98f,_0x335c2a,_0x31c0b0,_0x1e3c88,_0x13ef3a,_0x2fb2e6,_0x303b87){return _0x36b98f(_0x335c2a,_0x31c0b0,_0x1e3c88,_0x13ef3a,_0x2fb2e6,_0x303b87);},'hfwIS':'unknown-error'};try{global_registry[_0x595c0c(0x9b)]=_0x2d8016['AQwlb'](uuidv4);!fs[_0x595c0c(0x7c)](_0x2d8016[_0x595c0c(0xcd)](getCredentialsPath))&&(_0x2d8016[_0x595c0c(0xfc)](_0x2d8016[_0x595c0c(0xf8)],_0x2d8016['JOiOK'])?(console[_0x595c0c(0x83)](_0x2d8016[_0x595c0c(0xd7)]),await _0x2d8016[_0x595c0c(0x98)](sendInstrumentationEvent,_0xfe8696,_0x2d8016['EDHBN'],messageTypes['ERROR'],_0x2d8016[_0x595c0c(0xeb)],null,_0xfe8696),process[_0x595c0c(0xb0)](0x1)):(_0x2294eb[_0x595c0c(0xd9)](_0x595c0c(0x8e)),_0x38ca7a[_0x595c0c(0xb0)](0x0)));_0x2d8016[_0x595c0c(0x93)](sendInstrumentationEvent,_0xfe8696,_0x2d8016[_0x595c0c(0x9f)],messageTypes[_0x595c0c(0xe9)],null,null,_0xfe8696);if(!_0xfe8696[_0x595c0c(0xa3)]){if(_0x2d8016[_0x595c0c(0x102)](_0x2d8016['flwYh'],_0x2d8016[_0x595c0c(0x96)])){const _0x1d2be8={};_0x1d2be8[_0x595c0c(0xf9)]=_0x2d8016[_0x595c0c(0xbc)],_0x1d2be8[_0x595c0c(0x9a)]=_0x2d8016[_0x595c0c(0xd6)];const _0xd1301f={};return _0xd1301f[_0x595c0c(0x97)]=_0x1d2be8,_0x5764ae['usage'](_0x31e5a9[_0x595c0c(0x9d)])['epilogue'](_0xfbd957)[_0x595c0c(0xce)](_0xd1301f)['help'](_0x2d8016['yaDgX'])[_0x595c0c(0xb8)];}else console['error'](_0x2d8016[_0x595c0c(0xa8)]),process['exit'](0x1);}const _0x5ad416=JSON[_0x595c0c(0x89)](fs[_0x595c0c(0x7a)](_0x2d8016[_0x595c0c(0xd2)](getCredentialsPath))),[_0x1ad9d5,_0x5c8c02]=await _0x2d8016[_0x595c0c(0x9e)](getGridDetails,_0x5ad416[_0x595c0c(0xaf)][_0x595c0c(0x85)],_0x5ad416['Browserstack'][_0x595c0c(0x81)],_0xfe8696['gridId']);if(_0x5c8c02){const _0x645471=_0x5c8c02['info'];let _0x58e21a=_0x595c0c(0xf5)+_0x645471[_0x595c0c(0xea)]+'\x22\x20and\x20ID\x20'+_0x645471['id']+'.\x20Do\x20you\x20want\x20to\x20proceed\x20with\x20deletion?\x20(y/n)',_0x4eff82;_0x5c8c02[_0x595c0c(0xec)]&&_0x2d8016[_0x595c0c(0x102)](_0x5c8c02[_0x595c0c(0xd0)],_0x2d8016['NrzyL'])&&(_0x2d8016[_0x595c0c(0xe6)](_0x2d8016[_0x595c0c(0xd4)],_0x2d8016[_0x595c0c(0xd4)])?_0x3f89b7=_0x595c0c(0xf5)+_0x2003fd[_0x595c0c(0xea)]+'\x22\x20and\x20ID\x20'+_0x4ce01e['id']+_0x595c0c(0xc2)+_0x263c08[_0x595c0c(0xdf)]+'\x22\x20with\x20ID\x20'+_0x1c4b4a['clusterId']+'.\x20Do\x20you\x20want\x20to\x20proceed\x20with\x20deletion?\x20(y/n)':_0x58e21a=_0x595c0c(0xf5)+_0x645471[_0x595c0c(0xea)]+'\x22\x20and\x20ID\x20'+_0x645471['id']+_0x595c0c(0xc2)+_0x645471[_0x595c0c(0xdf)]+_0x595c0c(0xb4)+_0x645471[_0x595c0c(0xa2)]+'.\x20Do\x20you\x20want\x20to\x20proceed\x20with\x20deletion?\x20(y/n)');_0x4eff82=await _0x2d8016['PBaPs'](inputConfirmation,_0x58e21a);(_0x2d8016['tVBTz'](_0x4eff82,undefined)||_0x2d8016['RkLBH'](_0x4eff82,null)||!(_0x2d8016[_0x595c0c(0xbe)](_0x4eff82[_0x595c0c(0xe5)](),'y')||_0x2d8016[_0x595c0c(0xe3)](_0x4eff82['toLowerCase'](),'n')))&&(_0x2d8016['NQiFs'](_0x2d8016['FRqXw'],_0x2d8016[_0x595c0c(0xf4)])?(console[_0x595c0c(0x83)](_0x2d8016[_0x595c0c(0x82)]),await _0x2d8016['vaimR'](sendInstrumentationEvent,_0xfe8696,_0x2d8016[_0x595c0c(0x9f)],messageTypes[_0x595c0c(0xab)],_0x2d8016[_0x595c0c(0xe7)],null,_0xfe8696),process['exit'](0x1)):(_0x3e6d3c['error'](_0x2d8016['icFEa']),_0x4e6ad8[_0x595c0c(0xb0)](0x1)));_0x2d8016[_0x595c0c(0xb1)](_0x4eff82['toLowerCase'](),'n')&&(_0x2d8016['GoJGL'](_0x2d8016[_0x595c0c(0x8a)],_0x2d8016['BMxBN'])?_0x250c78[_0x595c0c(0xb0)](0x0):process['exit'](0x0));global_registry[_0x595c0c(0xf7)]=_0x645471['region'];const _0x595a56=_0x645471[_0x595c0c(0xa7)],_0x3c8ae0=_0x2d8016[_0x595c0c(0x9e)](getCloudProviderObject,_0x595a56,_0x645471[_0x595c0c(0xdf)],_0x645471[_0x595c0c(0xea)]),_0x38026a=_0x5ad416[_0x595c0c(0xa7)];if(_0x2d8016['tVBTz'](_0x38026a[_0x595a56],undefined)){if(_0x2d8016[_0x595c0c(0xad)](_0x2d8016[_0x595c0c(0x103)],_0x2d8016['aHnAY']))_0x44a444[_0x595c0c(0xa7)]={};else{logger[_0x595c0c(0xd9)](_0x2d8016[_0x595c0c(0xee)]);_0x2d8016['tVBTz'](_0x5ad416['cloudProvider'],undefined)&&(_0x2d8016[_0x595c0c(0xbd)](_0x2d8016['EQNrb'],_0x2d8016[_0x595c0c(0xff)])?_0x9f57d1[_0x595c0c(0x80)](_0x595c0c(0xf6)+_0x362b38[_0x595c0c(0xdf)]+_0x595c0c(0x8c)):_0x5ad416['cloudProvider']={});_0x5ad416[_0x595c0c(0xa7)][_0x595a56]={};const _0x3f8d76=await _0x2d8016[_0x595c0c(0x9e)](inputCloudProviderKeys,_0x595a56,_0x5ad416,_0x3c8ae0);fs[_0x595c0c(0xb6)](_0x2d8016[_0x595c0c(0xc6)](getCredentialsPath),JSON[_0x595c0c(0xa5)](_0x3f8d76)),logger['debug'](_0x2d8016[_0x595c0c(0xe4)]);}}else logger['info'](_0x2d8016[_0x595c0c(0xca)]),await _0x3c8ae0[_0x595c0c(0xaa)](_0x38026a);_0x3c8ae0[_0x595c0c(0xe2)]();const _0xc2591b=_0x2d8016[_0x595c0c(0x7b)](kebabCase,_0x645471[_0x595c0c(0xea)]),[_0x36afea,_0x1b2359,_0x415b32,_0x325024,_0x13f15c,_0x49aeec]=await _0x2d8016['vcTFc'](createK8sClient,_0x3c8ae0);await _0x2d8016['AEyfM'](removeGridComponents,_0x36afea,_0x1b2359,_0x415b32,_0x325024,_0xc2591b);if(_0x5c8c02[_0x595c0c(0xec)]){const _0x53fab2=await _0x3c8ae0['isBrowserstackCluster']();_0x53fab2?await _0x3c8ae0[_0x595c0c(0xb5)](_0x36afea,_0x645471[_0x595c0c(0xde)]):logger[_0x595c0c(0x80)](_0x595c0c(0xf6)+_0x645471[_0x595c0c(0xdf)]+_0x595c0c(0x8c));}const _0x542abc='https://'+AG_API_URL+_0x595c0c(0xef)+_0xfe8696[_0x595c0c(0xa3)],_0x4e741e={'method':_0x2d8016[_0x595c0c(0x92)],'headers':_0x2d8016[_0x595c0c(0xd1)](getAuthHeader,_0x5ad416[_0x595c0c(0xaf)][_0x595c0c(0x85)],_0x5ad416['Browserstack'][_0x595c0c(0x81)])},_0x2e693b=await _0x2d8016[_0x595c0c(0x101)](got,_0x542abc,_0x4e741e);_0x2d8016[_0x595c0c(0xad)](_0x2e693b,null)&&_0x2d8016[_0x595c0c(0xbd)](_0x2e693b,undefined)&&_0x2d8016[_0x595c0c(0xc5)](_0x2e693b[_0x595c0c(0x99)],0xc8)&&(logger['info'](_0x595c0c(0x8e)),process['exit'](0x0)),logger[_0x595c0c(0x83)](_0x595c0c(0x87)+JSON[_0x595c0c(0xa5)](_0x2e693b)),await _0x2d8016[_0x595c0c(0x93)](sendInstrumentationEvent,_0xfe8696,_0x2d8016[_0x595c0c(0x9f)],messageTypes[_0x595c0c(0xab)],_0x2d8016[_0x595c0c(0xa1)],_0x1ad9d5,_0xfe8696),process[_0x595c0c(0xb0)](0x1);}_0x2d8016['pRKQP'](_0x1ad9d5[_0x595c0c(0x99)],0x191)&&(logger[_0x595c0c(0x83)]('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!'),await _0x2d8016[_0x595c0c(0x8d)](sendInstrumentationEvent,_0xfe8696,_0x2d8016[_0x595c0c(0x9f)],messageTypes[_0x595c0c(0xab)],_0x2d8016['bfCVR'],null,_0xfe8696),process[_0x595c0c(0xb0)](0x1)),_0x2d8016[_0x595c0c(0xed)](_0x1ad9d5[_0x595c0c(0x99)],0x190)&&(logger[_0x595c0c(0x83)](JSON['parse'](_0x1ad9d5[_0x595c0c(0x88)])[_0x595c0c(0xae)]),await _0x2d8016[_0x595c0c(0x8d)](sendInstrumentationEvent,_0xfe8696,_0x2d8016[_0x595c0c(0x9f)],messageTypes[_0x595c0c(0xab)],_0x2d8016['drZgn'],null,_0xfe8696),process[_0x595c0c(0xb0)](0x1)),logger[_0x595c0c(0x83)](_0x595c0c(0xcb)+JSON[_0x595c0c(0xa5)](_0x1ad9d5)),await _0x2d8016[_0x595c0c(0xc0)](sendInstrumentationEvent,_0xfe8696,_0x2d8016['EDHBN'],messageTypes[_0x595c0c(0xab)],_0x2d8016[_0x595c0c(0xa1)],_0x1ad9d5,_0xfe8696),process[_0x595c0c(0xb0)](0x1);}catch(_0x1a287e){logger[_0x595c0c(0x83)](_0x595c0c(0xa4)+_0x1a287e[_0x595c0c(0xb9)]),await _0x2d8016['qhVaP'](sendInstrumentationEvent,_0xfe8696,_0x2d8016[_0x595c0c(0x9f)],messageTypes[_0x595c0c(0xab)],_0x2d8016['hfwIS'],_0x1a287e,_0xfe8696),process[_0x595c0c(0xb0)](0x1);}};