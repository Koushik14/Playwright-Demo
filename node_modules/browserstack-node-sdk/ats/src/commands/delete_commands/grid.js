const a11_0x16b970=a11_0x4d01;function a11_0x5c6f(){const _0x2c5cc3=['Failed\x20to\x20delete\x20resources!\x20Error:\x20','Succesfully\x20deleted\x20the\x20grid','exit','body','RkdAC','existsSync','hylNg','BXliB','gCcPo','xAtdX','XjPBM','Wrong\x20input!\x20Please\x20try\x20again\x20with\x20a\x20valid\x20input.','stringify','region','../../config/logger','help','This\x20will\x20delete\x20the\x20Grid\x20with\x20name\x20\x22','init-not-called','VavkH','zVFyV','30NPaICe','AmMWU','delete-grid-called','.\x20Do\x20you\x20want\x20to\x20proceed\x20with\x20deletion?\x20(y/n)','\x20along\x20with\x20Kubernetes\x20Cluster\x20with\x20name\x20\x22','AUCaa','string','server-error','statusCode','writeFileSync','utlAB','Browserstack','Unable\x20to\x20fetch\x20credentials\x20for\x20cloud\x20provider\x20locally','sQPTk','\x22\x20with\x20ID\x20','srFYz','fpnVm','DELETE','requestId','iaePF','jhmjC','type','clusterName','deleteCluster','mhOgI','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','AlJpO','28926ABteQw','sFuhw','681819JMlrjP','Cluster:\x20','\x20is\x20not\x20created\x20by\x20Browserstack.\x20Skipping\x20deletion\x20of\x20this\x20cluster','DZtue','https://','SROOw','debug','warn','usage','MYAaJ','pioOS','iysyO','stack','epilogue','aISDn','desc','clusterId','../../utils/utilityMethods','cloudProvider','LjFIT','isBrowserstackCluster','info','gridId','msXxV','invalid-grid-id','message','Delete\x20an\x20Automation\x20grid.','IVjNk','ifmLI','Pass\x20the\x20ID\x20of\x20the\x20Grid','error','name','8ZUuTGt','aWOSw','delete','uuid','Kbqdv','mwULW','grid-id','\x22\x20and\x20ID\x20','got','toLowerCase','ktLdi','builder','YroGO','leFUy','../../utils/gridComponents','xfMhR','Grid\x20ID\x20not\x20passed.\x20Please\x20provide\x20a\x20Grid\x20ID\x20to\x20delete\x20using\x20--grid-id\x20option','lKKMY','fetchLocalCreds','bQeCi','onlyGridInCluster','EvLyY','options','DyYzK','qazTP','owlTD','NXgOq','handler','ERROR','2299437BgkvFz','55495olXJhJ','DQPwL','ujYBE','ywwVh','60YpGlcn','Ujdzq','hwQgP','configureIfNotConfigured','../../utils/createk8sClient','2uSMouS','INFO','username','VntHE','IJuhw','GLzSs','283063uphrIO','1456664jXGKXg','1483353reHGNt','aeknV','XuJim'];a11_0x5c6f=function(){return _0x2c5cc3;};return a11_0x5c6f();}(function(_0x223417,_0x9b3aaa){const _0x456f86=a11_0x4d01,_0x213ec1=_0x223417();while(!![]){try{const _0x5162af=-parseInt(_0x456f86(0x1a5))/0x1*(-parseInt(_0x456f86(0x1df))/0x2)+-parseInt(_0x456f86(0x1e1))/0x3+parseInt(_0x456f86(0x1ac))/0x4+parseInt(_0x456f86(0x19c))/0x5*(parseInt(_0x456f86(0x1c4))/0x6)+-parseInt(_0x456f86(0x19b))/0x7+parseInt(_0x456f86(0x201))/0x8*(parseInt(_0x456f86(0x1ad))/0x9)+-parseInt(_0x456f86(0x1a0))/0xa*(-parseInt(_0x456f86(0x1ab))/0xb);if(_0x5162af===_0x9b3aaa)break;else _0x213ec1['push'](_0x213ec1['shift']());}catch(_0x951f8e){_0x213ec1['push'](_0x213ec1['shift']());}}}(a11_0x5c6f,0x33c46));const fs=require('fs'),got=require(a11_0x16b970(0x209)),{v4:uuidv4}=require(a11_0x16b970(0x204)),{HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,global_registry,messageTypes,AG_API_URL,AWS,AZURE}=require('../../config/constants'),{logger}=require(a11_0x16b970(0x1be)),{getCloudProviderObject}=require('../../cloudproviders/utils'),{removeGridComponents,deleteClusterAndDependencies}=require(a11_0x16b970(0x20f)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),{inputConfirmation,inputCloudProviderKeys}=require('../../utils/userInput'),{createK8sClient}=require(a11_0x16b970(0x1a4)),{kebabCase,getCredentialsPath,getGridDetails,getAuthHeader}=require(a11_0x16b970(0x1f2));function a11_0x4d01(_0x132bbb,_0x558039){const _0x5c6f64=a11_0x5c6f();return a11_0x4d01=function(_0x4d011e,_0x45c2a2){_0x4d011e=_0x4d011e-0x196;let _0x2d94bb=_0x5c6f64[_0x4d011e];return _0x2d94bb;},a11_0x4d01(_0x132bbb,_0x558039);}exports['command']='grid',exports[a11_0x16b970(0x1f0)]=a11_0x16b970(0x1fb),exports[a11_0x16b970(0x20c)]=function(_0x23a016){const _0x3b5783=a11_0x16b970,_0x121d82={};_0x121d82[_0x3b5783(0x1d3)]=_0x3b5783(0x1fe),_0x121d82[_0x3b5783(0x1c2)]=_0x3b5783(0x1ca),_0x121d82[_0x3b5783(0x202)]=_0x3b5783(0x1bf);const _0x3f3b46=_0x121d82,_0x280f32={};_0x280f32['description']=_0x3f3b46[_0x3b5783(0x1d3)],_0x280f32[_0x3b5783(0x1d9)]=_0x3f3b46[_0x3b5783(0x1c2)];const _0x44a9f3={};return _0x44a9f3[_0x3b5783(0x207)]=_0x280f32,_0x23a016[_0x3b5783(0x1e9)](HELP_HEADER_MESSAGE[_0x3b5783(0x203)])[_0x3b5783(0x1ee)](HELP_FOOTER_MESSAGE)[_0x3b5783(0x217)](_0x44a9f3)[_0x3b5783(0x1bf)](_0x3f3b46[_0x3b5783(0x202)])['argv'];},exports[a11_0x16b970(0x199)]=async function(_0xdb7ad3){const _0x374dff=a11_0x16b970,_0x436a16={'ywwVh':_0x374dff(0x211),'VntHE':_0x374dff(0x1fe),'fpnVm':_0x374dff(0x1ca),'aeknV':'help','xfMhR':function(_0x3d0d8e){return _0x3d0d8e();},'iaePF':function(_0x127c91,_0x5d167c){return _0x127c91===_0x5d167c;},'AlJpO':_0x374dff(0x196),'mhOgI':_0x374dff(0x1dd),'lKKMY':function(_0xaecaaf,_0x50185c,_0xaca2fb,_0x429c02,_0x55a509,_0x2a0992,_0x3bcede){return _0xaecaaf(_0x50185c,_0xaca2fb,_0x429c02,_0x55a509,_0x2a0992,_0x3bcede);},'SROOw':_0x374dff(0x1c6),'BXliB':_0x374dff(0x1c1),'GLzSs':function(_0x2c8905,_0xf07981,_0x9549dc,_0x389e4d,_0x4409a7,_0xc75643,_0x32c8ef){return _0x2c8905(_0xf07981,_0x9549dc,_0x389e4d,_0x4409a7,_0xc75643,_0x32c8ef);},'msXxV':function(_0x12f254,_0x24d1eb){return _0x12f254!==_0x24d1eb;},'DQPwL':_0x374dff(0x1c5),'aISDn':function(_0x2833b2,_0x287fd3,_0x1f4749,_0x5f557c){return _0x2833b2(_0x287fd3,_0x1f4749,_0x5f557c);},'AUCaa':_0x374dff(0x1cf),'utlAB':'TBOyC','XuJim':function(_0x1c2d9d,_0xbbd60f){return _0x1c2d9d(_0xbbd60f);},'ktLdi':function(_0x3fe25e,_0x14f7ef){return _0x3fe25e===_0x14f7ef;},'IVjNk':'VSDKA','RkdAC':_0x374dff(0x1bb),'leFUy':function(_0x3bc5eb,_0x1f4234,_0x6973ba,_0x47aaf8,_0x3650ea,_0x50bb30,_0x35e262){return _0x3bc5eb(_0x1f4234,_0x6973ba,_0x47aaf8,_0x3650ea,_0x50bb30,_0x35e262);},'EvLyY':'invalid-input','xxSyl':function(_0x262ada,_0x3c9945){return _0x262ada!==_0x3c9945;},'DyYzK':_0x374dff(0x198),'XjPBM':function(_0x7c866d,_0x4e8709,_0x39b18a,_0x22c54f){return _0x7c866d(_0x4e8709,_0x39b18a,_0x22c54f);},'owlTD':function(_0x44515b,_0x12c15e){return _0x44515b===_0x12c15e;},'iysyO':function(_0x506880,_0x21797b){return _0x506880===_0x21797b;},'hylNg':_0x374dff(0x205),'LjFIT':_0x374dff(0x1d8),'TpOJJ':_0x374dff(0x1d0),'pioOS':function(_0x5731d1,_0x35a3d5){return _0x5731d1===_0x35a3d5;},'ANvYM':function(_0x1a8331,_0x2902b7){return _0x1a8331===_0x2902b7;},'mwULW':'PfqQh','pxrzt':_0x374dff(0x1e4),'gCcPo':'Saving\x20credentials\x20for\x20cloud\x20provider\x20locally\x20for\x20later\x20runs','ifmLI':'Found\x20credentials\x20for\x20cloud\x20provider\x20locally.\x20Using\x20them\x20for\x20performing\x20actions','IJuhw':function(_0x28d745,_0x2bbad5){return _0x28d745(_0x2bbad5);},'gAyxN':function(_0x1c4f5d,_0x23aa64){return _0x1c4f5d(_0x23aa64);},'xAtdX':function(_0x2dcef4,_0x4c8f77,_0x1599d2,_0x18c13b,_0x2aee7a,_0xe13198){return _0x2dcef4(_0x4c8f77,_0x1599d2,_0x18c13b,_0x2aee7a,_0xe13198);},'ujYBE':_0x374dff(0x1d5),'hwQgP':function(_0x27e586,_0x411f06,_0x1625e2){return _0x27e586(_0x411f06,_0x1625e2);},'ZtYrw':function(_0x43d38a,_0x199575){return _0x43d38a!==_0x199575;},'YroGO':function(_0x292af3,_0x4e4678,_0x50619d,_0x11517a,_0x13e36b,_0x1bb843,_0x5583e2){return _0x292af3(_0x4e4678,_0x50619d,_0x11517a,_0x13e36b,_0x1bb843,_0x5583e2);},'zVFyV':_0x374dff(0x1cb),'Ujdzq':'unauthorised','uSbmt':function(_0x29f9ae,_0x5d861a){return _0x29f9ae===_0x5d861a;},'MYAaJ':function(_0x549c9a,_0xb56563,_0x2501b0,_0x572209,_0x25999b,_0x576c18,_0x4829ff){return _0x549c9a(_0xb56563,_0x2501b0,_0x572209,_0x25999b,_0x576c18,_0x4829ff);},'sFuhw':_0x374dff(0x1f9),'sQPTk':function(_0x1032ca,_0x233e64,_0x54ffc8,_0x6ca966,_0x2d5ab9,_0x4fa60d,_0x5b4242){return _0x1032ca(_0x233e64,_0x54ffc8,_0x6ca966,_0x2d5ab9,_0x4fa60d,_0x5b4242);},'bQeCi':'unknown-error'};try{global_registry[_0x374dff(0x1d6)]=_0x436a16[_0x374dff(0x210)](uuidv4);!fs[_0x374dff(0x1b5)](_0x436a16['xfMhR'](getCredentialsPath))&&(_0x436a16['iaePF'](_0x436a16[_0x374dff(0x1de)],_0x436a16['AlJpO'])?(console['error'](_0x436a16[_0x374dff(0x1dc)]),await _0x436a16[_0x374dff(0x212)](sendInstrumentationEvent,_0xdb7ad3,_0x436a16['SROOw'],messageTypes[_0x374dff(0x19a)],_0x436a16[_0x374dff(0x1b7)],null,_0xdb7ad3),process['exit'](0x1)):_0xb2587a[_0x374dff(0x1f3)]={});_0x436a16[_0x374dff(0x1aa)](sendInstrumentationEvent,_0xdb7ad3,_0x436a16['SROOw'],messageTypes[_0x374dff(0x1a6)],null,null,_0xdb7ad3);!_0xdb7ad3[_0x374dff(0x1f7)]&&(_0x436a16['msXxV'](_0x436a16[_0x374dff(0x19d)],_0x436a16['DQPwL'])?_0xf4d86b=_0x374dff(0x1c0)+_0x520b36[_0x374dff(0x200)]+_0x374dff(0x208)+_0x22ba3e['id']+_0x374dff(0x1c8)+_0x162d71[_0x374dff(0x1da)]+_0x374dff(0x1d2)+_0x1fa375[_0x374dff(0x1f1)]+_0x374dff(0x1c7):(console[_0x374dff(0x1ff)](_0x436a16[_0x374dff(0x19f)]),process[_0x374dff(0x1b2)](0x1)));const _0x26bcd1=JSON['parse'](fs['readFileSync'](_0x436a16['xfMhR'](getCredentialsPath))),[_0x39fcc2,_0x4a5232]=await _0x436a16[_0x374dff(0x1ef)](getGridDetails,_0x26bcd1[_0x374dff(0x1cf)][_0x374dff(0x1a7)],_0x26bcd1[_0x374dff(0x1cf)]['password'],_0xdb7ad3['gridId']);if(_0x4a5232){const _0xd6356f=_0x4a5232[_0x374dff(0x1f6)];let _0x4949ca=_0x374dff(0x1c0)+_0xd6356f[_0x374dff(0x200)]+_0x374dff(0x208)+_0xd6356f['id']+'.\x20Do\x20you\x20want\x20to\x20proceed\x20with\x20deletion?\x20(y/n)',_0x829a8b;_0x4a5232['onlyGridInCluster']&&_0x436a16[_0x374dff(0x1d7)](_0x4a5232['clusterSpawnedVia'],_0x436a16[_0x374dff(0x1c9)])&&(_0x436a16[_0x374dff(0x1f8)](_0x436a16['utlAB'],_0x436a16[_0x374dff(0x1ce)])?_0x24043a[_0x374dff(0x1e8)]('Cluster:\x20'+_0x4d65a7[_0x374dff(0x1da)]+_0x374dff(0x1e3)):_0x4949ca='This\x20will\x20delete\x20the\x20Grid\x20with\x20name\x20\x22'+_0xd6356f['name']+_0x374dff(0x208)+_0xd6356f['id']+'\x20along\x20with\x20Kubernetes\x20Cluster\x20with\x20name\x20\x22'+_0xd6356f[_0x374dff(0x1da)]+_0x374dff(0x1d2)+_0xd6356f[_0x374dff(0x1f1)]+_0x374dff(0x1c7));_0x829a8b=await _0x436a16[_0x374dff(0x1af)](inputConfirmation,_0x4949ca);(_0x436a16[_0x374dff(0x1d7)](_0x829a8b,undefined)||_0x436a16[_0x374dff(0x1d7)](_0x829a8b,null)||!(_0x436a16[_0x374dff(0x20b)](_0x829a8b[_0x374dff(0x20a)](),'y')||_0x436a16[_0x374dff(0x20b)](_0x829a8b['toLowerCase'](),'n')))&&(_0x436a16['msXxV'](_0x436a16[_0x374dff(0x1fc)],_0x436a16['IVjNk'])?_0x41cee2[_0x374dff(0x1b2)](0x0):(console[_0x374dff(0x1ff)](_0x436a16[_0x374dff(0x1b4)]),await _0x436a16[_0x374dff(0x20e)](sendInstrumentationEvent,_0xdb7ad3,_0x436a16[_0x374dff(0x1e6)],messageTypes[_0x374dff(0x19a)],_0x436a16[_0x374dff(0x216)],null,_0xdb7ad3),process[_0x374dff(0x1b2)](0x1)));_0x436a16['iaePF'](_0x829a8b[_0x374dff(0x20a)](),'n')&&(_0x436a16['xxSyl'](_0x436a16[_0x374dff(0x218)],_0x436a16[_0x374dff(0x218)])?(_0x512d68[_0x374dff(0x1f6)](_0x374dff(0x1b1)),_0x30d48d[_0x374dff(0x1b2)](0x0)):process[_0x374dff(0x1b2)](0x0));global_registry['clusterRegion']=_0xd6356f[_0x374dff(0x1bd)];const _0x4450a0=_0xd6356f['cloudProvider'],_0x3f8498=_0x436a16[_0x374dff(0x1ba)](getCloudProviderObject,_0x4450a0,_0xd6356f[_0x374dff(0x1da)],_0xd6356f[_0x374dff(0x200)]),_0x2931ea=_0x26bcd1[_0x374dff(0x1f3)];if(_0x436a16[_0x374dff(0x197)](_0x2931ea[_0x4450a0],undefined)){if(_0x436a16[_0x374dff(0x1ec)](_0x436a16[_0x374dff(0x1b6)],_0x436a16[_0x374dff(0x1f4)]))_0x477daf[_0x374dff(0x1ff)](_0x436a16['ywwVh']),_0x27e65d[_0x374dff(0x1b2)](0x1);else{logger[_0x374dff(0x1f6)](_0x436a16['TpOJJ']);if(_0x436a16[_0x374dff(0x1eb)](_0x26bcd1[_0x374dff(0x1f3)],undefined)){if(_0x436a16['ANvYM'](_0x436a16[_0x374dff(0x206)],_0x436a16['pxrzt'])){const _0x4fe60a={};_0x4fe60a['description']=_0x436a16[_0x374dff(0x1a8)],_0x4fe60a[_0x374dff(0x1d9)]=_0x436a16[_0x374dff(0x1d4)];const _0x5f083c={};return _0x5f083c['grid-id']=_0x4fe60a,_0x341d63[_0x374dff(0x1e9)](_0x2a6ad2['delete'])[_0x374dff(0x1ee)](_0x594443)[_0x374dff(0x217)](_0x5f083c)['help'](_0x436a16[_0x374dff(0x1ae)])['argv'];}else _0x26bcd1['cloudProvider']={};}_0x26bcd1[_0x374dff(0x1f3)][_0x4450a0]={};const _0x5eac31=await _0x436a16['XjPBM'](inputCloudProviderKeys,_0x4450a0,_0x26bcd1,_0x3f8498);fs[_0x374dff(0x1cd)](_0x436a16['xfMhR'](getCredentialsPath),JSON['stringify'](_0x5eac31)),logger[_0x374dff(0x1e7)](_0x436a16[_0x374dff(0x1b8)]);}}else logger[_0x374dff(0x1f6)](_0x436a16[_0x374dff(0x1fd)]),await _0x3f8498[_0x374dff(0x213)](_0x2931ea);_0x3f8498[_0x374dff(0x1a3)]();const _0x5db016=_0x436a16[_0x374dff(0x1a9)](kebabCase,_0xd6356f['name']),[_0x512d21,_0x4a30a0,_0x3127e2,_0xe1d4be,_0x5dff46,_0x1ca2c3]=await _0x436a16['gAyxN'](createK8sClient,_0x3f8498);await _0x436a16[_0x374dff(0x1b9)](removeGridComponents,_0x512d21,_0x4a30a0,_0x3127e2,_0xe1d4be,_0x5db016);if(_0x4a5232[_0x374dff(0x215)]){const _0x550c38=await _0x3f8498[_0x374dff(0x1f5)]();_0x550c38?await _0x3f8498[_0x374dff(0x1db)](_0x512d21,_0xd6356f[_0x374dff(0x1bd)]):logger[_0x374dff(0x1e8)](_0x374dff(0x1e2)+_0xd6356f[_0x374dff(0x1da)]+_0x374dff(0x1e3));}const _0x983c93=_0x374dff(0x1e5)+AG_API_URL+'/packages/cli/grid/'+_0xdb7ad3[_0x374dff(0x1f7)],_0x255474={'method':_0x436a16[_0x374dff(0x19e)],'headers':_0x436a16[_0x374dff(0x1a2)](getAuthHeader,_0x26bcd1[_0x374dff(0x1cf)][_0x374dff(0x1a7)],_0x26bcd1[_0x374dff(0x1cf)]['password'])},_0x178104=await _0x436a16[_0x374dff(0x1a2)](got,_0x983c93,_0x255474);_0x436a16['ZtYrw'](_0x178104,null)&&_0x436a16[_0x374dff(0x1f8)](_0x178104,undefined)&&_0x436a16['ktLdi'](_0x178104[_0x374dff(0x1cc)],0xc8)&&(logger['info'](_0x374dff(0x1b1)),process[_0x374dff(0x1b2)](0x0)),logger[_0x374dff(0x1ff)]('Grid\x20is\x20deleted\x20but\x20failed\x20to\x20update\x20server\x20for\x20grid\x20deletion.\x20Response\x20from\x20server:\x20'+JSON['stringify'](_0x178104)),await _0x436a16[_0x374dff(0x20d)](sendInstrumentationEvent,_0xdb7ad3,_0x436a16['SROOw'],messageTypes[_0x374dff(0x19a)],_0x436a16[_0x374dff(0x1c3)],_0x39fcc2,_0xdb7ad3),process[_0x374dff(0x1b2)](0x1);}_0x436a16[_0x374dff(0x1ec)](_0x39fcc2['statusCode'],0x191)&&(logger[_0x374dff(0x1ff)]('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!'),await _0x436a16[_0x374dff(0x20e)](sendInstrumentationEvent,_0xdb7ad3,_0x436a16[_0x374dff(0x1e6)],messageTypes[_0x374dff(0x19a)],_0x436a16[_0x374dff(0x1a1)],null,_0xdb7ad3),process[_0x374dff(0x1b2)](0x1)),_0x436a16['uSbmt'](_0x39fcc2[_0x374dff(0x1cc)],0x190)&&(logger[_0x374dff(0x1ff)](JSON['parse'](_0x39fcc2[_0x374dff(0x1b3)])[_0x374dff(0x1fa)]),await _0x436a16[_0x374dff(0x1ea)](sendInstrumentationEvent,_0xdb7ad3,_0x436a16[_0x374dff(0x1e6)],messageTypes[_0x374dff(0x19a)],_0x436a16[_0x374dff(0x1e0)],null,_0xdb7ad3),process[_0x374dff(0x1b2)](0x1)),logger[_0x374dff(0x1ff)]('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20'+JSON[_0x374dff(0x1bc)](_0x39fcc2)),await _0x436a16[_0x374dff(0x212)](sendInstrumentationEvent,_0xdb7ad3,_0x436a16[_0x374dff(0x1e6)],messageTypes['ERROR'],_0x436a16['zVFyV'],_0x39fcc2,_0xdb7ad3),process[_0x374dff(0x1b2)](0x1);}catch(_0x13a66c){logger[_0x374dff(0x1ff)](_0x374dff(0x1b0)+_0x13a66c[_0x374dff(0x1ed)]),await _0x436a16[_0x374dff(0x1d1)](sendInstrumentationEvent,_0xdb7ad3,_0x436a16[_0x374dff(0x1e6)],messageTypes[_0x374dff(0x19a)],_0x436a16[_0x374dff(0x214)],_0x13a66c,_0xdb7ad3),process[_0x374dff(0x1b2)](0x1);}};