function a19_0x464d(){const _0xa7324=['server-error','existsSync','152jINakF','user','statusCode','Eyvhf','../../utils/instrumentationUtils','argv','help','replace','epilogue','ERROR','builder','clusterRegion','pMaSK','configureIfNotConfigured','invalid-grid-id','body','1344245NRnfXv','parse','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','9390620rDtoBJ','grid-id','gridId','143631bgPtJE','../../utils/utilityMethods','1491876iagQVK','../../cloudproviders/utils','jARfy','reconnecting-websocket','VaCsL','Adding\x20Websocket\x20listeners','region','Browserstack','290EDdikX','unauthorised','error','password','KlJra','stop','../../utils/webSocketUtils','usage','name','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','MLYoe','vAKOv','INFO','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','fetchLocalCreds','../../config/logger','username','Stop\x20a\x20running\x20Automation\x20grid.','type','info','ENLlW','DFNkf','bstackAccesskey','eWXlA','cloudProvider','stack','stringify','command','debug','oUlyt','hpJyj','wDKmt','grid','clusterName','description','../../config/constants','WebSocket','lfVmz','595065iqswXx','bstackUsername','96mooabh','JrYpH','hSZqi','gpWrQ','39980BPoMsJ','string','qRYeP','GQfOF','1023XBntKt','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','exit','mstSY'];a19_0x464d=function(){return _0xa7324;};return a19_0x464d();}const a19_0x5350b6=a19_0x33b5;(function(_0x402237,_0x27f468){const _0xd8580d=a19_0x33b5,_0x1deaff=_0x402237();while(!![]){try{const _0x5e33d1=parseInt(_0xd8580d(0xe4))/0x1*(-parseInt(_0xd8580d(0x10b))/0x2)+-parseInt(_0xd8580d(0xda))/0x3+parseInt(_0xd8580d(0xea))/0x4*(-parseInt(_0xd8580d(0xe0))/0x5)+parseInt(_0xd8580d(0x103))/0x6+-parseInt(_0xd8580d(0xfa))/0x7+-parseInt(_0xd8580d(0xdc))/0x8*(parseInt(_0xd8580d(0x101))/0x9)+parseInt(_0xd8580d(0xfe))/0xa;if(_0x5e33d1===_0x27f468)break;else _0x1deaff['push'](_0x1deaff['shift']());}catch(_0xcf8d1f){_0x1deaff['push'](_0x1deaff['shift']());}}}(a19_0x464d,0x2581b));function a19_0x33b5(_0x20a9ce,_0xf79504){const _0x464d02=a19_0x464d();return a19_0x33b5=function(_0x33b526,_0x3bcb8c){_0x33b526=_0x33b526-0xcc;let _0x4c758f=_0x464d02[_0x33b526];return _0x4c758f;},a19_0x33b5(_0x20a9ce,_0xf79504);}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x5350b6(0x106)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x5350b6(0xd7)),{logger}=require(a19_0x5350b6(0x11a)),{getCredentialsPath,getGridDetails}=require(a19_0x5350b6(0x102)),{scaleDownHubDeployment}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require(a19_0x5350b6(0xee)),webSocketUtils=require(a19_0x5350b6(0x111)),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require(a19_0x5350b6(0x104));exports[a19_0x5350b6(0xcf)]=a19_0x5350b6(0xd4),exports['desc']=a19_0x5350b6(0x11c),exports[a19_0x5350b6(0xf4)]=function(_0x1a118c){const _0x596477=a19_0x5350b6,_0x2fcb6a={};_0x2fcb6a[_0x596477(0x120)]=_0x596477(0x118),_0x2fcb6a[_0x596477(0xde)]=_0x596477(0xe1),_0x2fcb6a['vAKOv']=_0x596477(0xf0);const _0x130d51=_0x2fcb6a,_0x484022={};_0x484022[_0x596477(0xd6)]=_0x130d51[_0x596477(0x120)],_0x484022[_0x596477(0x11d)]=_0x130d51[_0x596477(0xde)];const _0x3a9534={};return _0x3a9534[_0x596477(0xff)]=_0x484022,_0x1a118c[_0x596477(0x112)](HELP_HEADER_MESSAGE[_0x596477(0x110)])[_0x596477(0xf2)](HELP_FOOTER_MESSAGE)['options'](_0x3a9534)[_0x596477(0xf0)](_0x130d51[_0x596477(0x116)])[_0x596477(0xef)];},exports['handler']=async function(_0x2a50a6){const _0x19da07=a19_0x5350b6,_0x44d13a={'eWXlA':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','qRYeP':function(_0x24497f){return _0x24497f();},'wDKmt':_0x19da07(0xe5),'oUlyt':function(_0x5a123f,_0x3643ed,_0x1680df,_0xe12d40,_0x1796d5,_0x4903dd,_0xcc44df){return _0x5a123f(_0x3643ed,_0x1680df,_0xe12d40,_0x1796d5,_0x4903dd,_0xcc44df);},'pMaSK':'stop-grid-called','jARfy':'init-not-called','CtYSJ':function(_0x4188bd,_0x2ee686,_0x20fa3e,_0x42d9a2,_0xfe26a,_0x597307,_0x1aeb96){return _0x4188bd(_0x2ee686,_0x20fa3e,_0x42d9a2,_0xfe26a,_0x597307,_0x1aeb96);},'mstSY':'<UsernamePlaceholder>','MLYoe':'<PasswordPlaceholder>','GQfOF':_0x19da07(0x108),'VaCsL':function(_0x4f0471,_0x177400,_0x340ec6,_0x11b368){return _0x4f0471(_0x177400,_0x340ec6,_0x11b368);},'Eyvhf':function(_0x159ccf,_0x49864d,_0x46a155,_0x56c198,_0x20934a,_0x444b3e){return _0x159ccf(_0x49864d,_0x46a155,_0x56c198,_0x20934a,_0x444b3e);},'ENLlW':function(_0x1d23ba,_0x1a94d3){return _0x1d23ba(_0x1a94d3);},'gpWrQ':function(_0x9aa927,_0x30bb48,_0xcaddaf){return _0x9aa927(_0x30bb48,_0xcaddaf);},'hpJyj':'Grid\x20stoppped.','kPZkJ':function(_0x4586f2,_0x1264ec){return _0x4586f2===_0x1264ec;},'KlJra':_0x19da07(0x10c),'lfVmz':function(_0xe2a4e9,_0x22732b){return _0xe2a4e9===_0x22732b;},'fvStO':function(_0x544844,_0x4b84be,_0x5a8a11,_0x11a8ac,_0x4e9629,_0x12a654,_0x26bac2){return _0x544844(_0x4b84be,_0x5a8a11,_0x11a8ac,_0x4e9629,_0x12a654,_0x26bac2);},'OxfWN':_0x19da07(0xf8),'YpTqn':function(_0x1e068f,_0x319f72,_0x633dc5,_0x32c6f2,_0x44def1,_0x13f71c,_0x31e32b){return _0x1e068f(_0x319f72,_0x633dc5,_0x32c6f2,_0x44def1,_0x13f71c,_0x31e32b);},'JrYpH':_0x19da07(0xe8)};let _0x5d9c1d;try{!_0x2a50a6[_0x19da07(0x100)]&&(logger[_0x19da07(0x10d)](_0x44d13a[_0x19da07(0x122)]),process[_0x19da07(0xe6)](0x1));!fs[_0x19da07(0xe9)](_0x44d13a[_0x19da07(0xe2)](getCredentialsPath))&&(logger[_0x19da07(0x10d)](_0x44d13a[_0x19da07(0xd3)]),await _0x44d13a[_0x19da07(0xd1)](sendInstrumentationEvent,_0x2a50a6,_0x44d13a['pMaSK'],messageTypes['ERROR'],_0x44d13a[_0x19da07(0x105)],null,_0x2a50a6),process[_0x19da07(0xe6)](0x1));logger[_0x19da07(0x11e)]('Stopping\x20grid\x20'+_0x2a50a6['gridId']),await _0x44d13a['CtYSJ'](sendInstrumentationEvent,_0x2a50a6,_0x44d13a['pMaSK'],messageTypes[_0x19da07(0x117)],null,null,_0x2a50a6);const _0x14d8e6=JSON[_0x19da07(0xfb)](fs['readFileSync'](_0x44d13a['qRYeP'](getCredentialsPath)));global_registry[_0x19da07(0xdb)]=_0x14d8e6[_0x19da07(0x10a)]['username'],global_registry[_0x19da07(0x121)]=_0x14d8e6[_0x19da07(0x10a)]['password'];const _0x294626=WS_ENDPOINT[_0x19da07(0xf1)](_0x44d13a[_0x19da07(0xe7)],_0x14d8e6[_0x19da07(0x10a)][_0x19da07(0x11b)])['replace'](_0x44d13a[_0x19da07(0x115)],_0x14d8e6[_0x19da07(0x10a)]['password']),_0x3a8097={};_0x3a8097[_0x19da07(0xd8)]=ws,_0x3a8097['connectionTimeout']=0x36ee80,_0x5d9c1d=new ReconnectingWebSocket(_0x294626,[],_0x3a8097),logger[_0x19da07(0xd0)](_0x44d13a[_0x19da07(0xe3)]),webSocketUtils['addListeners'](_0x5d9c1d,_0x2a50a6[_0x19da07(0xeb)],_0x2a50a6['password']);const [_0x41b2da,_0x224e55]=await _0x44d13a[_0x19da07(0x107)](getGridDetails,_0x14d8e6['Browserstack'][_0x19da07(0x11b)],_0x14d8e6[_0x19da07(0x10a)][_0x19da07(0x10e)],_0x2a50a6['gridId']);if(_0x224e55){const _0x5a3ffb=_0x224e55['info'];global_registry[_0x19da07(0xcc)]=_0x5a3ffb[_0x19da07(0xcc)],global_registry[_0x19da07(0xf5)]=_0x5a3ffb[_0x19da07(0x109)],global_registry['clusterName']=_0x5a3ffb[_0x19da07(0xd5)];const _0x137fb8=_0x44d13a[_0x19da07(0xed)](getCloudProviderObject,_0x5a3ffb[_0x19da07(0xcc)],_0x5a3ffb[_0x19da07(0xd5)],_0x5a3ffb[_0x19da07(0x113)],_0x5d9c1d,webSocketUtils),_0xbfad3=_0x14d8e6[_0x19da07(0xcc)]||{};await _0x137fb8[_0x19da07(0x119)](_0xbfad3),_0x137fb8[_0x19da07(0xf7)]();const [_0x20b133,_0x18015b,_0x2c34e4,_0x2d72b2,_0x19bb9d,_0xcd45ef]=await _0x44d13a[_0x19da07(0x11f)](createK8sClient,_0x137fb8);await _0x44d13a[_0x19da07(0xdf)](scaleDownHubDeployment,_0x18015b,_0x5a3ffb[_0x19da07(0x113)]),logger['info'](_0x44d13a[_0x19da07(0xd2)]),process[_0x19da07(0xe6)](0x0);}_0x44d13a['kPZkJ'](_0x41b2da[_0x19da07(0xec)],0x191)&&(logger['error'](_0x19da07(0xfc)),await _0x44d13a['oUlyt'](sendInstrumentationEvent,_0x2a50a6,_0x44d13a[_0x19da07(0xf6)],messageTypes[_0x19da07(0xf3)],_0x44d13a[_0x19da07(0x10f)],null,_0x2a50a6),process[_0x19da07(0xe6)](0x1)),_0x44d13a[_0x19da07(0xd9)](_0x41b2da[_0x19da07(0xec)],0x190)&&(logger[_0x19da07(0x10d)](JSON['parse'](_0x41b2da[_0x19da07(0xf9)])['message']),await _0x44d13a['fvStO'](sendInstrumentationEvent,_0x2a50a6,_0x44d13a[_0x19da07(0xf6)],messageTypes[_0x19da07(0xf3)],_0x44d13a['OxfWN'],null,_0x2a50a6),process[_0x19da07(0xe6)](0x1)),logger['error'](_0x19da07(0x114)+JSON[_0x19da07(0xce)](_0x41b2da)),await _0x44d13a['YpTqn'](sendInstrumentationEvent,_0x2a50a6,_0x44d13a[_0x19da07(0xf6)],messageTypes[_0x19da07(0xf3)],_0x44d13a[_0x19da07(0xdd)],_0x41b2da,_0x2a50a6),process[_0x19da07(0xe6)](0x1);}catch(_0x2c2fb4){const _0x35eef0=_0x19da07(0xfd)+_0x2c2fb4+'\x20\x0a'+JSON[_0x19da07(0xce)](_0x2c2fb4[_0x19da07(0xcd)])+'\x20';logger['error'](_0x35eef0),process[_0x19da07(0xe6)](0x1);}};