const a17_0x1ccd76=a17_0x5035;(function(_0x11fdbd,_0x10416d){const _0x1029b4=a17_0x5035,_0x5db51f=_0x11fdbd();while(!![]){try{const _0x1ea30a=parseInt(_0x1029b4(0x149))/0x1+-parseInt(_0x1029b4(0x136))/0x2+-parseInt(_0x1029b4(0x11d))/0x3*(parseInt(_0x1029b4(0x118))/0x4)+-parseInt(_0x1029b4(0x10e))/0x5+-parseInt(_0x1029b4(0x133))/0x6+-parseInt(_0x1029b4(0x13c))/0x7*(-parseInt(_0x1029b4(0x11a))/0x8)+parseInt(_0x1029b4(0x12d))/0x9*(parseInt(_0x1029b4(0x140))/0xa);if(_0x1ea30a===_0x10416d)break;else _0x5db51f['push'](_0x5db51f['shift']());}catch(_0x198aec){_0x5db51f['push'](_0x5db51f['shift']());}}}(a17_0x29e5,0xd67b1));function a17_0x29e5(){const _0x47ef42=['stringify','connectionTimeout','user','invalid-grid-id','BiJWI','init-not-called','eZKKw','lOdGR','error','fetchLocalCreds','../../cloudproviders/utils','5648700YoNBEg','command','vgBNm','vmeqt','info','pPFGl','oKXjS','statusCode','unauthorised','../../utils/webSocketUtils','40776UOCuXt','KOkhY','12081016aAORWT','../../utils/utilityMethods','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','165XBxqXJ','desc','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','epilogue','Browserstack','clusterName','configureIfNotConfigured','DkhTQ','Starting\x20grid\x20','../../utils/gridComponents','bstackUsername','ZwFvN','Adding\x20Websocket\x20listeners','handler','PBdGw','txMaf','567sfKjvr','ERROR','exit','region','type','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','6999300nXQHve','addListeners','LYBTF','2502848GEWLTi','LpWIM','builder','grid','reconnecting-websocket','clusterRegion','7oowwim','RASmN','../../utils/instrumentationUtils','parse','294590qLXIbi','bstackAccesskey','replace','username','password','name','Start\x20an\x20existing\x20Automation\x20grid.','ieppn','plbTQ','1620853wFVjPl','server-error','gridId','../../utils/createk8sClient','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','INFO','uqyYs','Grid\x20started','LKkoq','help','usage','cloudProvider','string','../../config/logger','../../config/constants','start'];a17_0x29e5=function(){return _0x47ef42;};return a17_0x29e5();}function a17_0x5035(_0x2efdd9,_0x53d276){const _0x29e55e=a17_0x29e5();return a17_0x5035=function(_0x503526,_0x140889){_0x503526=_0x503526-0x103;let _0x4eefca=_0x29e55e[_0x503526];return _0x4eefca;},a17_0x5035(_0x2efdd9,_0x53d276);}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a17_0x1ccd76(0x13a)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a17_0x1ccd76(0x157)),{logger}=require(a17_0x1ccd76(0x156)),{getCredentialsPath,getGridDetails}=require(a17_0x1ccd76(0x11b)),{scaleUpHubDeployment}=require(a17_0x1ccd76(0x126)),{sendInstrumentationEvent}=require(a17_0x1ccd76(0x13e)),webSocketUtils=require(a17_0x1ccd76(0x117)),{createK8sClient}=require(a17_0x1ccd76(0x14c)),{getCloudProviderObject}=require(a17_0x1ccd76(0x10d));exports[a17_0x1ccd76(0x10f)]=a17_0x1ccd76(0x139),exports[a17_0x1ccd76(0x11e)]=a17_0x1ccd76(0x146),exports[a17_0x1ccd76(0x138)]=function(_0x3c63d2){const _0x456de2=a17_0x1ccd76,_0x5b740d={};_0x5b740d['vmeqt']='Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.',_0x5b740d[_0x456de2(0x124)]=_0x456de2(0x155),_0x5b740d[_0x456de2(0x137)]=_0x456de2(0x152);const _0x66bc51=_0x5b740d,_0x2d4c88={};_0x2d4c88['description']=_0x66bc51[_0x456de2(0x111)],_0x2d4c88[_0x456de2(0x131)]=_0x66bc51[_0x456de2(0x124)];const _0x1655d6={};return _0x1655d6['grid-id']=_0x2d4c88,_0x3c63d2[_0x456de2(0x153)](HELP_HEADER_MESSAGE[_0x456de2(0x158)])[_0x456de2(0x120)](HELP_FOOTER_MESSAGE)['options'](_0x1655d6)['help'](_0x66bc51[_0x456de2(0x137)])['argv'];},exports[a17_0x1ccd76(0x12a)]=async function(_0x142ef1){const _0x2eae90=a17_0x1ccd76,_0x17f5e0={'zLnuu':_0x2eae90(0x132),'txMaf':function(_0x2e7b6f){return _0x2e7b6f();},'CHkAa':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','ieppn':function(_0xc0f777,_0x305372,_0x258bb4,_0x5e36c6,_0x131bf2,_0x5d9f7e,_0x17d408){return _0xc0f777(_0x305372,_0x258bb4,_0x5e36c6,_0x131bf2,_0x5d9f7e,_0x17d408);},'KOkhY':'start-grid-called','lOdGR':_0x2eae90(0x108),'IECEl':function(_0xb28581,_0x3ff78c,_0x7cf315,_0x1000fd,_0x43b31,_0x431043,_0x4559f8){return _0xb28581(_0x3ff78c,_0x7cf315,_0x1000fd,_0x43b31,_0x431043,_0x4559f8);},'pPFGl':'<UsernamePlaceholder>','VFsAr':'<PasswordPlaceholder>','kLMjc':_0x2eae90(0x129),'BiJWI':function(_0x48de5c,_0x2704b6,_0x204338,_0x9d8a6){return _0x48de5c(_0x2704b6,_0x204338,_0x9d8a6);},'eZKKw':function(_0xe41703,_0x548675,_0xa20eb3,_0x16d575,_0x35206e,_0x3c2dfe){return _0xe41703(_0x548675,_0xa20eb3,_0x16d575,_0x35206e,_0x3c2dfe);},'PBdGw':function(_0x1f3c67,_0x3d9aae){return _0x1f3c67(_0x3d9aae);},'plbTQ':function(_0x29d3e,_0x131a29,_0x21142a){return _0x29d3e(_0x131a29,_0x21142a);},'LKkoq':_0x2eae90(0x150),'oKXjS':function(_0x24bda7,_0x4398fe){return _0x24bda7===_0x4398fe;},'vgBNm':_0x2eae90(0x116),'LYBTF':function(_0x140818,_0x386d03){return _0x140818===_0x386d03;},'RASmN':function(_0x28cb87,_0x3078a6,_0x443078,_0x14324,_0x29ecba,_0x5d681f,_0x165efc){return _0x28cb87(_0x3078a6,_0x443078,_0x14324,_0x29ecba,_0x5d681f,_0x165efc);},'uqyYs':_0x2eae90(0x106),'ZwFvN':_0x2eae90(0x14a)};let _0x1965df;try{!_0x142ef1['gridId']&&(logger[_0x2eae90(0x10b)](_0x17f5e0['zLnuu']),process[_0x2eae90(0x12f)](0x1));!fs['existsSync'](_0x17f5e0[_0x2eae90(0x12c)](getCredentialsPath))&&(logger[_0x2eae90(0x10b)](_0x17f5e0['CHkAa']),await _0x17f5e0[_0x2eae90(0x147)](sendInstrumentationEvent,_0x142ef1,_0x17f5e0[_0x2eae90(0x119)],messageTypes[_0x2eae90(0x12e)],_0x17f5e0[_0x2eae90(0x10a)],null,_0x142ef1),process[_0x2eae90(0x12f)](0x1));logger[_0x2eae90(0x112)](_0x2eae90(0x125)+_0x142ef1[_0x2eae90(0x14b)]),await _0x17f5e0['IECEl'](sendInstrumentationEvent,_0x142ef1,_0x17f5e0[_0x2eae90(0x119)],messageTypes[_0x2eae90(0x14e)],null,null,_0x142ef1);const _0x3c0c2c=JSON[_0x2eae90(0x13f)](fs['readFileSync'](_0x17f5e0[_0x2eae90(0x12c)](getCredentialsPath)));global_registry[_0x2eae90(0x127)]=_0x3c0c2c[_0x2eae90(0x121)][_0x2eae90(0x143)],global_registry[_0x2eae90(0x141)]=_0x3c0c2c[_0x2eae90(0x121)][_0x2eae90(0x144)];const _0x1ba7c2=WS_ENDPOINT[_0x2eae90(0x142)](_0x17f5e0[_0x2eae90(0x113)],_0x3c0c2c[_0x2eae90(0x121)][_0x2eae90(0x143)])[_0x2eae90(0x142)](_0x17f5e0['VFsAr'],_0x3c0c2c['Browserstack']['password']),_0x4a073c={};_0x4a073c['WebSocket']=ws,_0x4a073c[_0x2eae90(0x104)]=0x36ee80,_0x1965df=new ReconnectingWebSocket(_0x1ba7c2,[],_0x4a073c),logger['debug'](_0x17f5e0['kLMjc']),webSocketUtils[_0x2eae90(0x134)](_0x1965df,_0x142ef1[_0x2eae90(0x105)],_0x142ef1[_0x2eae90(0x144)]);const [_0x474af4,_0x123f9e]=await _0x17f5e0[_0x2eae90(0x107)](getGridDetails,_0x3c0c2c['Browserstack'][_0x2eae90(0x143)],_0x3c0c2c[_0x2eae90(0x121)][_0x2eae90(0x144)],_0x142ef1['gridId']);if(_0x123f9e){const _0x4d14bb=_0x123f9e[_0x2eae90(0x112)];global_registry[_0x2eae90(0x154)]=_0x4d14bb[_0x2eae90(0x154)],global_registry[_0x2eae90(0x13b)]=_0x4d14bb[_0x2eae90(0x130)],global_registry[_0x2eae90(0x122)]=_0x4d14bb[_0x2eae90(0x122)];const _0x41ad38=_0x17f5e0[_0x2eae90(0x109)](getCloudProviderObject,_0x4d14bb[_0x2eae90(0x154)],_0x4d14bb[_0x2eae90(0x122)],_0x4d14bb['name'],_0x1965df,webSocketUtils),_0x3834ba=_0x3c0c2c['cloudProvider']||{};await _0x41ad38[_0x2eae90(0x10c)](_0x3834ba),_0x41ad38[_0x2eae90(0x123)]();const [_0xdefcc8,_0x1398b3,_0x48e35a,_0x247b67,_0x5b69ec,_0x5da486]=await _0x17f5e0[_0x2eae90(0x12b)](createK8sClient,_0x41ad38);await _0x17f5e0[_0x2eae90(0x148)](scaleUpHubDeployment,_0x1398b3,_0x4d14bb[_0x2eae90(0x145)]),logger[_0x2eae90(0x112)](_0x17f5e0[_0x2eae90(0x151)]),process[_0x2eae90(0x12f)](0x0);}_0x17f5e0[_0x2eae90(0x114)](_0x474af4[_0x2eae90(0x115)],0x191)&&(logger[_0x2eae90(0x10b)](_0x2eae90(0x14d)),await _0x17f5e0['IECEl'](sendInstrumentationEvent,_0x142ef1,_0x17f5e0[_0x2eae90(0x119)],messageTypes[_0x2eae90(0x12e)],_0x17f5e0[_0x2eae90(0x110)],null,_0x142ef1),process[_0x2eae90(0x12f)](0x1)),_0x17f5e0[_0x2eae90(0x135)](_0x474af4['statusCode'],0x190)&&(logger[_0x2eae90(0x10b)](JSON[_0x2eae90(0x13f)](_0x474af4['body'])['message']),await _0x17f5e0[_0x2eae90(0x13d)](sendInstrumentationEvent,_0x142ef1,_0x17f5e0['KOkhY'],messageTypes[_0x2eae90(0x12e)],_0x17f5e0[_0x2eae90(0x14f)],null,_0x142ef1),process[_0x2eae90(0x12f)](0x1)),logger['error'](_0x2eae90(0x11f)+JSON[_0x2eae90(0x103)](_0x474af4)),await _0x17f5e0['IECEl'](sendInstrumentationEvent,_0x142ef1,_0x17f5e0[_0x2eae90(0x119)],messageTypes[_0x2eae90(0x12e)],_0x17f5e0[_0x2eae90(0x128)],_0x474af4,_0x142ef1),process[_0x2eae90(0x12f)](0x1);}catch(_0x243628){const _0x48473d=_0x2eae90(0x11c)+_0x243628+'\x20\x0a'+JSON[_0x2eae90(0x103)](_0x243628['stack'])+'\x20';logger['error'](_0x48473d),process['exit'](0x1);}};