const a17_0x3d2b05=a17_0x10d3;(function(_0x20e7e7,_0x5c8841){const _0x38175f=a17_0x10d3,_0x1ddea9=_0x20e7e7();while(!![]){try{const _0x9f6af5=parseInt(_0x38175f(0xdd))/0x1+parseInt(_0x38175f(0x99))/0x2*(-parseInt(_0x38175f(0x93))/0x3)+parseInt(_0x38175f(0xd4))/0x4+-parseInt(_0x38175f(0xbd))/0x5*(-parseInt(_0x38175f(0xb2))/0x6)+parseInt(_0x38175f(0xa8))/0x7+-parseInt(_0x38175f(0xb7))/0x8+-parseInt(_0x38175f(0xce))/0x9;if(_0x9f6af5===_0x5c8841)break;else _0x1ddea9['push'](_0x1ddea9['shift']());}catch(_0x55707f){_0x1ddea9['push'](_0x1ddea9['shift']());}}}(a17_0x53a6,0x28ead));function a17_0x53a6(){const _0xe6351d=['unauthorised','fetchLocalCreds','../../utils/webSocketUtils','replace','cloudProvider','IbVtD','../../cloudproviders/utils','clusterRegion','pYkGX','options','../../utils/createk8sClient','<PasswordPlaceholder>','../../config/logger','mmeFL','132393yACdrO','nazWN','IUDHd','UUSJJ','exit','stringify','2IojUZJ','../../config/constants','fVurV','configureIfNotConfigured','<UsernamePlaceholder>','reconnecting-websocket','gMYEA','GcRNw','password','grid-id','message','INFO','start-grid-called','body','WebSocket','393302Wyropj','user','statusCode','Browserstack','description','stack','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','debug','clusterName','112278OrUUvS','username','oleRe','rPXJI','TTOoR','1523824XBClkt','Starting\x20grid\x20','error','init-not-called','readFileSync','name','75IRVuGy','help','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','HvPkH','addListeners','start','grid','invalid-grid-id','../../utils/gridComponents','info','bstackAccesskey','server-error','xHVtk','PaBwP','gridId','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','IxWOz','2529495wpWGxv','argv','string','region','Adding\x20Websocket\x20listeners','parse','326008cMNtzz','ERROR','njcOq','bstackUsername','builder','../../utils/instrumentationUtils','command','JszJq','bgNPk','264878spoEsb'];a17_0x53a6=function(){return _0xe6351d;};return a17_0x53a6();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a17_0x3d2b05(0x9e)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a17_0x3d2b05(0x9a)),{logger}=require(a17_0x3d2b05(0x91)),{getCredentialsPath,getGridDetails}=require('../../utils/utilityMethods'),{scaleUpHubDeployment}=require(a17_0x3d2b05(0xc5)),{sendInstrumentationEvent}=require(a17_0x3d2b05(0xd9)),webSocketUtils=require(a17_0x3d2b05(0xe0)),{createK8sClient}=require(a17_0x3d2b05(0x8f)),{getCloudProviderObject}=require(a17_0x3d2b05(0x8b));function a17_0x10d3(_0x4e3c98,_0x409ba3){const _0x53a600=a17_0x53a6();return a17_0x10d3=function(_0x10d343,_0x32924a){_0x10d343=_0x10d343-0x88;let _0x940113=_0x53a600[_0x10d343];return _0x940113;},a17_0x10d3(_0x4e3c98,_0x409ba3);}exports[a17_0x3d2b05(0xda)]=a17_0x3d2b05(0xc3),exports['desc']='Start\x20an\x20existing\x20Automation\x20grid.',exports[a17_0x3d2b05(0xd8)]=function(_0x143e43){const _0x20b55b=a17_0x3d2b05,_0x2bdaf1={};_0x2bdaf1['rPXJI']=_0x20b55b(0xaf),_0x2bdaf1['oleRe']=_0x20b55b(0xd0),_0x2bdaf1[_0x20b55b(0xca)]='help';const _0x206e89=_0x2bdaf1,_0x51c673={};_0x51c673[_0x20b55b(0xac)]=_0x206e89[_0x20b55b(0xb5)],_0x51c673['type']=_0x206e89[_0x20b55b(0xb4)];const _0x3b3b48={};return _0x3b3b48[_0x20b55b(0xa2)]=_0x51c673,_0x143e43['usage'](HELP_HEADER_MESSAGE[_0x20b55b(0xc2)])['epilogue'](HELP_FOOTER_MESSAGE)[_0x20b55b(0x8e)](_0x3b3b48)[_0x20b55b(0xbe)](_0x206e89[_0x20b55b(0xca)])[_0x20b55b(0xcf)];},exports['handler']=async function(_0x23e884){const _0x41de51=a17_0x3d2b05,_0x290147={'UUSJJ':_0x41de51(0xbf),'TTOoR':function(_0x4a400f){return _0x4a400f();},'njcOq':_0x41de51(0xcc),'gMYEA':function(_0x10f39e,_0x163fd1,_0x1013dd,_0x487694,_0x13621b,_0x2db34f,_0x54799e){return _0x10f39e(_0x163fd1,_0x1013dd,_0x487694,_0x13621b,_0x2db34f,_0x54799e);},'HvPkH':_0x41de51(0xa5),'JszJq':_0x41de51(0xba),'IxWOz':_0x41de51(0x9d),'GcRNw':_0x41de51(0x90),'pYkGX':_0x41de51(0xd2),'nazWN':function(_0x33a7c2,_0xea58b6,_0x3731a7,_0xeb6c53){return _0x33a7c2(_0xea58b6,_0x3731a7,_0xeb6c53);},'YktYZ':function(_0x9d42a8,_0x5d6091,_0x105233,_0x31fa3f,_0x1ee3a7,_0xf21451){return _0x9d42a8(_0x5d6091,_0x105233,_0x31fa3f,_0x1ee3a7,_0xf21451);},'xHVtk':function(_0x1119bd,_0x56ffe6){return _0x1119bd(_0x56ffe6);},'IbVtD':function(_0x284d6c,_0x19191c,_0x5be3d7){return _0x284d6c(_0x19191c,_0x5be3d7);},'bgNPk':'Grid\x20started','sncyg':function(_0x3a0616,_0x31345d){return _0x3a0616===_0x31345d;},'SWIqS':_0x41de51(0xde),'mmeFL':function(_0x1f5cef,_0xe02271,_0x3f9179,_0x3dc50b,_0x3f42ff,_0x3b43c1,_0x1a19e6){return _0x1f5cef(_0xe02271,_0x3f9179,_0x3dc50b,_0x3f42ff,_0x3b43c1,_0x1a19e6);},'fVurV':_0x41de51(0xc4),'IUDHd':_0x41de51(0xc8)};let _0x38fbe8;try{!_0x23e884[_0x41de51(0xcb)]&&(logger[_0x41de51(0xb9)](_0x290147[_0x41de51(0x96)]),process[_0x41de51(0x97)](0x1));!fs['existsSync'](_0x290147[_0x41de51(0xb6)](getCredentialsPath))&&(logger[_0x41de51(0xb9)](_0x290147[_0x41de51(0xd6)]),await _0x290147[_0x41de51(0x9f)](sendInstrumentationEvent,_0x23e884,_0x290147[_0x41de51(0xc0)],messageTypes['ERROR'],_0x290147[_0x41de51(0xdb)],null,_0x23e884),process[_0x41de51(0x97)](0x1));logger[_0x41de51(0xc6)](_0x41de51(0xb8)+_0x23e884[_0x41de51(0xcb)]),await _0x290147[_0x41de51(0x9f)](sendInstrumentationEvent,_0x23e884,_0x290147[_0x41de51(0xc0)],messageTypes[_0x41de51(0xa4)],null,null,_0x23e884);const _0xf86a51=JSON[_0x41de51(0xd3)](fs[_0x41de51(0xbb)](_0x290147[_0x41de51(0xb6)](getCredentialsPath)));global_registry[_0x41de51(0xd7)]=_0xf86a51['Browserstack'][_0x41de51(0xb3)],global_registry[_0x41de51(0xc7)]=_0xf86a51[_0x41de51(0xab)][_0x41de51(0xa1)];const _0x4731f8=WS_ENDPOINT[_0x41de51(0x88)](_0x290147[_0x41de51(0xcd)],_0xf86a51['Browserstack'][_0x41de51(0xb3)])[_0x41de51(0x88)](_0x290147[_0x41de51(0xa0)],_0xf86a51['Browserstack'][_0x41de51(0xa1)]),_0x5d587b={};_0x5d587b[_0x41de51(0xa7)]=ws,_0x5d587b['connectionTimeout']=0x36ee80,_0x38fbe8=new ReconnectingWebSocket(_0x4731f8,[],_0x5d587b),logger[_0x41de51(0xb0)](_0x290147[_0x41de51(0x8d)]),webSocketUtils[_0x41de51(0xc1)](_0x38fbe8,_0x23e884[_0x41de51(0xa9)],_0x23e884[_0x41de51(0xa1)]);const [_0x52cdaf,_0x2b7151]=await _0x290147[_0x41de51(0x94)](getGridDetails,_0xf86a51[_0x41de51(0xab)][_0x41de51(0xb3)],_0xf86a51[_0x41de51(0xab)][_0x41de51(0xa1)],_0x23e884['gridId']);if(_0x2b7151){const _0x5a9158=_0x2b7151[_0x41de51(0xc6)];global_registry['cloudProvider']=_0x5a9158[_0x41de51(0x89)],global_registry[_0x41de51(0x8c)]=_0x5a9158[_0x41de51(0xd1)],global_registry['clusterName']=_0x5a9158[_0x41de51(0xb1)];const _0x3cc048=_0x290147['YktYZ'](getCloudProviderObject,_0x5a9158[_0x41de51(0x89)],_0x5a9158[_0x41de51(0xb1)],_0x5a9158['name'],_0x38fbe8,webSocketUtils),_0x5db420=_0xf86a51[_0x41de51(0x89)]||{};await _0x3cc048[_0x41de51(0xdf)](_0x5db420),_0x3cc048[_0x41de51(0x9c)]();const [_0x34377f,_0x5c06e6,_0x17e26e,_0xe31735,_0x53afef,_0x45c222]=await _0x290147[_0x41de51(0xc9)](createK8sClient,_0x3cc048);await _0x290147[_0x41de51(0x8a)](scaleUpHubDeployment,_0x5c06e6,_0x5a9158[_0x41de51(0xbc)]),logger[_0x41de51(0xc6)](_0x290147[_0x41de51(0xdc)]),process['exit'](0x0);}_0x290147['sncyg'](_0x52cdaf[_0x41de51(0xaa)],0x191)&&(logger[_0x41de51(0xb9)]('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!'),await _0x290147['gMYEA'](sendInstrumentationEvent,_0x23e884,_0x290147[_0x41de51(0xc0)],messageTypes[_0x41de51(0xd5)],_0x290147['SWIqS'],null,_0x23e884),process[_0x41de51(0x97)](0x1)),_0x290147['sncyg'](_0x52cdaf[_0x41de51(0xaa)],0x190)&&(logger[_0x41de51(0xb9)](JSON[_0x41de51(0xd3)](_0x52cdaf[_0x41de51(0xa6)])[_0x41de51(0xa3)]),await _0x290147[_0x41de51(0x92)](sendInstrumentationEvent,_0x23e884,_0x290147[_0x41de51(0xc0)],messageTypes[_0x41de51(0xd5)],_0x290147[_0x41de51(0x9b)],null,_0x23e884),process[_0x41de51(0x97)](0x1)),logger['error'](_0x41de51(0xae)+JSON[_0x41de51(0x98)](_0x52cdaf)),await _0x290147['mmeFL'](sendInstrumentationEvent,_0x23e884,_0x290147['HvPkH'],messageTypes[_0x41de51(0xd5)],_0x290147[_0x41de51(0x95)],_0x52cdaf,_0x23e884),process[_0x41de51(0x97)](0x1);}catch(_0x3ec657){const _0x2e924c='Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20'+_0x3ec657+'\x20\x0a'+JSON[_0x41de51(0x98)](_0x3ec657[_0x41de51(0xad)])+'\x20';logger['error'](_0x2e924c),process[_0x41de51(0x97)](0x1);}};