const a17_0x4bbd52=a17_0x2ccf;(function(_0x58fd41,_0x286e84){const _0x9f2557=a17_0x2ccf,_0x232bbf=_0x58fd41();while(!![]){try{const _0x52b240=parseInt(_0x9f2557(0x1d3))/0x1*(-parseInt(_0x9f2557(0x1e1))/0x2)+parseInt(_0x9f2557(0x1b5))/0x3+-parseInt(_0x9f2557(0x1e7))/0x4+parseInt(_0x9f2557(0x1d8))/0x5+-parseInt(_0x9f2557(0x1fd))/0x6*(parseInt(_0x9f2557(0x1cd))/0x7)+parseInt(_0x9f2557(0x1c1))/0x8*(-parseInt(_0x9f2557(0x1e0))/0x9)+-parseInt(_0x9f2557(0x1ef))/0xa*(-parseInt(_0x9f2557(0x1d9))/0xb);if(_0x52b240===_0x286e84)break;else _0x232bbf['push'](_0x232bbf['shift']());}catch(_0x5c6fea){_0x232bbf['push'](_0x232bbf['shift']());}}}(a17_0x1aa6,0x3524c));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a17_0x4bbd52(0x1fc)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a17_0x4bbd52(0x1fa)),{logger}=require(a17_0x4bbd52(0x1b0)),{getCredentialsPath,getGridDetails}=require('../../utils/utilityMethods'),{scaleUpHubDeployment}=require(a17_0x4bbd52(0x1c7)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require('../../utils/webSocketUtils'),{createK8sClient}=require(a17_0x4bbd52(0x1ed)),{getCloudProviderObject}=require(a17_0x4bbd52(0x1d0));function a17_0x1aa6(){const _0x356bb7=['epilogue','430xfZddD','xkYAI','qWMOC','unauthorised','UCyxJ','clusterRegion','qQtxg','<PasswordPlaceholder>','SGOfQ','fetchLocalCreds','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','../../config/constants','CsfdP','reconnecting-websocket','12cbQPer','WIdhE','CcYRi','Grid\x20started','UiqYC','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','KaXMY','name','password','Starting\x20grid\x20','exit','handler','../../config/logger','argv','options','bstackAccesskey','clusterName','892755IKyCNc','replace','server-error','stringify','uujYF','info','parse','dGrob','builder','init-not-called','type','cloudProvider','21592uAFjQK','bstackUsername','user','error','string','gridId','../../utils/gridComponents','help','tfeUf','Browserstack','invalid-grid-id','<UsernamePlaceholder>','154196uJDDwo','MXPEi','EJgen','../../cloudproviders/utils','AneOL','command','1VgePvg','HGITJ','usage','stack','desc','529955msciVg','136279YvHECl','addListeners','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','start','XnSXo','pKmWE','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','1314JvLDrT','188756DoyMNn','region','start-grid-called','description','message','statusCode','744556DZKLgq','epCuF','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','username','ERROR','body','../../utils/createk8sClient'];a17_0x1aa6=function(){return _0x356bb7;};return a17_0x1aa6();}function a17_0x2ccf(_0xafddd8,_0xc48643){const _0x1aa693=a17_0x1aa6();return a17_0x2ccf=function(_0x2ccf4b,_0x1d79a8){_0x2ccf4b=_0x2ccf4b-0x1b0;let _0x160c57=_0x1aa693[_0x2ccf4b];return _0x160c57;},a17_0x2ccf(_0xafddd8,_0xc48643);}exports[a17_0x4bbd52(0x1d2)]='grid',exports[a17_0x4bbd52(0x1d7)]='Start\x20an\x20existing\x20Automation\x20grid.',exports[a17_0x4bbd52(0x1bd)]=function(_0x25d021){const _0x428656=a17_0x4bbd52,_0x38a0ad={};_0x38a0ad['RDltw']=_0x428656(0x1f9),_0x38a0ad[_0x428656(0x1bc)]=_0x428656(0x1c5),_0x38a0ad['epCuF']=_0x428656(0x1c8);const _0x549413=_0x38a0ad,_0x335a60={};_0x335a60[_0x428656(0x1e4)]=_0x549413['RDltw'],_0x335a60[_0x428656(0x1bf)]=_0x549413['dGrob'];const _0x4b2cf8={};return _0x4b2cf8['grid-id']=_0x335a60,_0x25d021[_0x428656(0x1d5)](HELP_HEADER_MESSAGE[_0x428656(0x1dc)])[_0x428656(0x1ee)](HELP_FOOTER_MESSAGE)[_0x428656(0x1b2)](_0x4b2cf8)['help'](_0x549413[_0x428656(0x1e8)])[_0x428656(0x1b1)];},exports[a17_0x4bbd52(0x208)]=async function(_0x40fa94){const _0x590023=a17_0x4bbd52,_0x7299c3={'SGOfQ':_0x590023(0x1df),'CsfdP':function(_0x1b824c){return _0x1b824c();},'XnSXo':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','pKmWE':function(_0x916ff0,_0x5a8324,_0x250f3b,_0x3f3450,_0x4684de,_0x239833,_0x2d0af2){return _0x916ff0(_0x5a8324,_0x250f3b,_0x3f3450,_0x4684de,_0x239833,_0x2d0af2);},'xkYAI':_0x590023(0x1e3),'EJgen':_0x590023(0x1be),'qWMOC':function(_0x19d9f9,_0x1d3758,_0x4412a4,_0x16629b,_0x232ced,_0x3f026a,_0x41cdb1){return _0x19d9f9(_0x1d3758,_0x4412a4,_0x16629b,_0x232ced,_0x3f026a,_0x41cdb1);},'WIdhE':function(_0x333712){return _0x333712();},'ahYyp':_0x590023(0x1cc),'RYDlA':_0x590023(0x1f6),'kupbN':'Adding\x20Websocket\x20listeners','UCyxJ':function(_0x59477a,_0x33b9ed,_0x494aac,_0x21725a){return _0x59477a(_0x33b9ed,_0x494aac,_0x21725a);},'uujYF':function(_0x53c0fc,_0x2937be,_0x5f5b4e,_0x1ccf71,_0x4f702f,_0xa6fb14){return _0x53c0fc(_0x2937be,_0x5f5b4e,_0x1ccf71,_0x4f702f,_0xa6fb14);},'MXPEi':function(_0x5c563b,_0x424f23){return _0x5c563b(_0x424f23);},'HGITJ':function(_0x162768,_0x40009,_0xefe682){return _0x162768(_0x40009,_0xefe682);},'tfeUf':_0x590023(0x200),'veKCA':function(_0x1786a6,_0x1f49f9){return _0x1786a6===_0x1f49f9;},'qQtxg':function(_0x2e7c4b,_0x2125fa,_0xfd9df,_0x1e3176,_0x1a33ee,_0x4247ea,_0x45f034){return _0x2e7c4b(_0x2125fa,_0xfd9df,_0x1e3176,_0x1a33ee,_0x4247ea,_0x45f034);},'UiqYC':_0x590023(0x1f2),'CcYRi':function(_0x2f570c,_0xb29ff3){return _0x2f570c===_0xb29ff3;},'AneOL':_0x590023(0x1cb),'KaXMY':_0x590023(0x1b7)};let _0x5c336d;try{!_0x40fa94[_0x590023(0x1c6)]&&(logger[_0x590023(0x1c4)](_0x7299c3[_0x590023(0x1f7)]),process[_0x590023(0x207)](0x1));!fs['existsSync'](_0x7299c3[_0x590023(0x1fb)](getCredentialsPath))&&(logger[_0x590023(0x1c4)](_0x7299c3[_0x590023(0x1dd)]),await _0x7299c3[_0x590023(0x1de)](sendInstrumentationEvent,_0x40fa94,_0x7299c3[_0x590023(0x1f0)],messageTypes[_0x590023(0x1eb)],_0x7299c3[_0x590023(0x1cf)],null,_0x40fa94),process[_0x590023(0x207)](0x1));logger[_0x590023(0x1ba)](_0x590023(0x206)+_0x40fa94['gridId']),await _0x7299c3[_0x590023(0x1f1)](sendInstrumentationEvent,_0x40fa94,_0x7299c3[_0x590023(0x1f0)],messageTypes['INFO'],null,null,_0x40fa94);const _0x4ad794=JSON[_0x590023(0x1bb)](fs['readFileSync'](_0x7299c3[_0x590023(0x1fe)](getCredentialsPath)));global_registry[_0x590023(0x1c2)]=_0x4ad794[_0x590023(0x1ca)][_0x590023(0x1ea)],global_registry[_0x590023(0x1b3)]=_0x4ad794['Browserstack'][_0x590023(0x205)];const _0x52a4c1=WS_ENDPOINT[_0x590023(0x1b6)](_0x7299c3['ahYyp'],_0x4ad794[_0x590023(0x1ca)][_0x590023(0x1ea)])['replace'](_0x7299c3['RYDlA'],_0x4ad794[_0x590023(0x1ca)][_0x590023(0x205)]),_0x3a791e={};_0x3a791e['WebSocket']=ws,_0x3a791e['connectionTimeout']=0x36ee80,_0x5c336d=new ReconnectingWebSocket(_0x52a4c1,[],_0x3a791e),logger['debug'](_0x7299c3['kupbN']),webSocketUtils[_0x590023(0x1da)](_0x5c336d,_0x40fa94[_0x590023(0x1c3)],_0x40fa94['password']);const [_0x29d8bc,_0x2b0fb3]=await _0x7299c3[_0x590023(0x1f3)](getGridDetails,_0x4ad794['Browserstack'][_0x590023(0x1ea)],_0x4ad794['Browserstack'][_0x590023(0x205)],_0x40fa94[_0x590023(0x1c6)]);if(_0x2b0fb3){const _0x31f368=_0x2b0fb3[_0x590023(0x1ba)];global_registry['cloudProvider']=_0x31f368[_0x590023(0x1c0)],global_registry[_0x590023(0x1f4)]=_0x31f368[_0x590023(0x1e2)],global_registry[_0x590023(0x1b4)]=_0x31f368[_0x590023(0x1b4)];const _0x4c0dac=_0x7299c3[_0x590023(0x1b9)](getCloudProviderObject,_0x31f368['cloudProvider'],_0x31f368[_0x590023(0x1b4)],_0x31f368[_0x590023(0x204)],_0x5c336d,webSocketUtils),_0x2d208e=_0x4ad794[_0x590023(0x1c0)]||{};await _0x4c0dac[_0x590023(0x1f8)](_0x2d208e),_0x4c0dac['configureIfNotConfigured']();const [_0x816d6d,_0x26aaee,_0x885d7b,_0x2aebae,_0x45600f,_0xa2b045]=await _0x7299c3[_0x590023(0x1ce)](createK8sClient,_0x4c0dac);await _0x7299c3[_0x590023(0x1d4)](scaleUpHubDeployment,_0x26aaee,_0x31f368[_0x590023(0x204)]),logger[_0x590023(0x1ba)](_0x7299c3[_0x590023(0x1c9)]),process['exit'](0x0);}_0x7299c3['veKCA'](_0x29d8bc['statusCode'],0x191)&&(logger[_0x590023(0x1c4)](_0x590023(0x1e9)),await _0x7299c3[_0x590023(0x1f5)](sendInstrumentationEvent,_0x40fa94,_0x7299c3[_0x590023(0x1f0)],messageTypes[_0x590023(0x1eb)],_0x7299c3[_0x590023(0x201)],null,_0x40fa94),process[_0x590023(0x207)](0x1)),_0x7299c3[_0x590023(0x1ff)](_0x29d8bc[_0x590023(0x1e6)],0x190)&&(logger[_0x590023(0x1c4)](JSON[_0x590023(0x1bb)](_0x29d8bc[_0x590023(0x1ec)])[_0x590023(0x1e5)]),await _0x7299c3[_0x590023(0x1de)](sendInstrumentationEvent,_0x40fa94,_0x7299c3[_0x590023(0x1f0)],messageTypes[_0x590023(0x1eb)],_0x7299c3[_0x590023(0x1d1)],null,_0x40fa94),process[_0x590023(0x207)](0x1)),logger[_0x590023(0x1c4)](_0x590023(0x202)+JSON[_0x590023(0x1b8)](_0x29d8bc)),await _0x7299c3['qQtxg'](sendInstrumentationEvent,_0x40fa94,_0x7299c3[_0x590023(0x1f0)],messageTypes[_0x590023(0x1eb)],_0x7299c3[_0x590023(0x203)],_0x29d8bc,_0x40fa94),process[_0x590023(0x207)](0x1);}catch(_0x6c49b4){const _0x3d4e67=_0x590023(0x1db)+_0x6c49b4+'\x20\x0a'+JSON[_0x590023(0x1b8)](_0x6c49b4[_0x590023(0x1d6)])+'\x20';logger[_0x590023(0x1c4)](_0x3d4e67),process[_0x590023(0x207)](0x1);}};