const a28_0x55ecd7=a28_0x2993;(function(_0xca9a63,_0x2f8ac4){const _0x145dfd=a28_0x2993,_0x188b01=_0xca9a63();while(!![]){try{const _0xa09953=-parseInt(_0x145dfd(0x28b))/0x1*(-parseInt(_0x145dfd(0x17f))/0x2)+parseInt(_0x145dfd(0x23f))/0x3+-parseInt(_0x145dfd(0x19e))/0x4+-parseInt(_0x145dfd(0x1cf))/0x5*(parseInt(_0x145dfd(0x239))/0x6)+-parseInt(_0x145dfd(0x27c))/0x7*(parseInt(_0x145dfd(0x278))/0x8)+parseInt(_0x145dfd(0x1b6))/0x9+-parseInt(_0x145dfd(0x283))/0xa;if(_0xa09953===_0x2f8ac4)break;else _0x188b01['push'](_0x188b01['shift']());}catch(_0x4fb6f4){_0x188b01['push'](_0x188b01['shift']());}}}(a28_0x4125,0x28afb));function a28_0x4125(){const _0x466a3e=['MLwgv','DEGJO','createNamespacedServiceAccount','594390XVYSBU','browser-node-cluster-role-binding.yaml','name','tXdZs','createNamespacedRoleBinding','JaUdV','872115Waparl','Deleting\x20cert-manager','SqpHl','FXetU','Adding\x20VPC\x20CNI\x20CM','gbaVc','true','false','Added\x20Autoscaler\x20Components','Scaled\x20up\x20deployment','networking.gke.io/load-balancer-type:\x20\x22Internal\x22','ejaMg','isNewAWSCluster','mYBaH','browserstack-turboscale-grid','cBwsV','cert-manager.yaml','Added\x20browser-node-role-binding\x20role\x20binding','gridName','Adding\x20browser-node\x20service\x20account','createClusterRole','Adding\x20Nginx\x20Private\x20Pods\x20and\x20Services','addMetricServerComponents','replaceNamespacedDeployment','Adding\x20Nginx\x20Roles\x20and\x20Service\x20Accounts','DRUct','Adding\x20Autoscaler\x20namespacedRoleBinding','fhahT','addGridComponents','cpnIH','OSOhi','bstackUsername','tGaNN','YaIqW','chZdE','cpKAW','createNamespacedDeployment','./deleteStack','zTDYf','default-service-account.yaml','Fnjgu','APsXa','ioqeW','ItCRj','Ieykp','statusCode','Added\x20Nginx\x20Roles\x20and\x20Service\x20Accounts','templates','AyWAV','FpwWB','Adding\x20MetricsServer\x20Service','IQbRp','deployment.yaml','FFnqf','tPlrj','gaALt','Adding\x20Cert\x20Manager\x20CRDs','38704hCbCoW','Deleted\x20cert-manager','HCKIs','deleteAgent','70UbnhlL','Gjedn','KGSzD','hOnqV','browserstack','HJiSu','miokV','1820090GoJoeD','Adding\x20Autoscaler\x20Service\x20Account','items','ingress-nginx','createNamespacedService','isPrivateGrid','ZwLrd','js-yaml','268186vouXEX','uzWKC','Egpcf','Adding\x20MetricsServer\x20Components','UviKd','gridProfileId','teFwd','private-pods-and-services.yaml','clusterName','dTwow','Adding\x20MetricsServer\x20clusterRole\x20for\x20aggregated\x20reader','IRaPN','all','dIsYF','VDUzp','erqEs','GzVnz','addAutoScalerComponents','IcbsZ','ZaRoX','mjPpu','readNamespacedDeployment','1|6|4|5|3|0|2','jAhTl','gYxTs','\x20cloudformation\x20stacks\x20from\x20region\x20','Adding\x20MetricsServer\x20Deployment','drCxs','load','createClusterRoleBinding','api-service.yaml','GJJeE','wJEFy','jPhys','Adding\x20Cert\x20Issuer','hejrh','3|10|12|14|6|2|13|0|1|5|8|15|4|7|9|11','XeMpV','Added\x20Ingress','cloudProvider','path','swcHq','utf-8','jKRah','dkbmL','nqFQX','replaceNamespacedServiceAccount','AdUGM','NrbZP','KcfxK','123456','hEbGM','XVpDn','cluster-role-aggregated-reader.yaml','<ClusterName>','Added\x20browser-node-role\x20cluster\x20role','annotations','split','XyEZz','WwPCK','HFuUl','1|4|0|3|2','template','Added\x20hubdeployment','VYyAE','metricsServerServiceExists','browser-node-service-account.yaml','Deleting\x20','cluster-role-binding-auth-delegator.yaml','Adding\x20Ingress','deleteNamespace','VBzId','XNoAk','pods-and-services.yaml','mICna','erYMS','20|8|15|25|7|29|24|16|3|32|21|23|19|6|17|1|0|14|10|27|33|4|26|18|11|9|5|13|34|12|30|31|35|22|2|28','ShkvH','HYDPf','hSgBD','wrLvl','gPFgW','body','eROeO','YKaqr','2fNOCDj','YnAbi','CoaBc','BleBN','oWQdZ','YIjVA','spec','nginx','deleteClusterAndDependencies','hlaXe','noBBR','Adding\x20MetricsServer\x20Service\x20Account','khUYv','uDapH','YwJzC','KYnHx','Added\x20hubservice','CKigO','Added\x20Nginx\x20Pods\x20and\x20deployments','FDjIM','XonZQ','bIQbp','rVtaS','uid','browserVersion','role-binding.yaml','azure.workload.identity/client-id','GMZgp','CBgYs','Deleted\x20clusterrolebinding','EDviO','1163112kzJjYW','LKDGa','IWYnq','zINIB','loadAll','wkeCs','Added\x20clusterrolebinding','default','IJMhP','vgFsQ','readFileAsync','pXnzX','namespace','Deleting\x20ingress-nginx','bKYYn','debug','EYNFW','AQfmG','Adding\x20browser-node-role-binding\x20role\x20binding','hub-deployment.yaml','jrOqH','EFjat','kWuGV','Adding\x20Autoscaler\x20clusterRoleBinding','2051928dcqhHc','EygLa','code','cluster-role-binding.yaml','wfjMf','../utils/webSocketUtils','Added\x20Cert\x20Issuer','wCXTn','tZCsD','Adding\x20hubservice','uCZmN','MzVkc','YRgcK','nhrhU','crds.yaml','sJiyU','etKxh','Adding\x20Autoscaler\x20Deployment','MYhkx','sZWEH','MUUIM','UOxwZ','CpqjQ','FHsjX','xgfFe','5eckypp','pTvNZ','info','createNamespacedRole','dwVhC','rHmui','kube-system','YCFoP','replace','otOvq','kjUvL','Added\x20VPC\x20CNI\x20ConfigMaps','clientId','BFpfx','LAvgV','VXEej','message','labels','Added\x20default\x20service\x20account','service.beta.kubernetes.io/azure-load-balancer-internal:\x20\x22true\x22','Deleting\x20clusterrolebinding','./utilityMethods','pHgnw','metrics-server','fmYBn','Adding\x20MetricsServer\x20API\x20Service','SutWl','SZodL','AepDZ','1|6|0|7|5|3|4|2','bEQhV','cert-manager','namespaceExists','FYfwF','Adding\x20Cert\x20Manager','ingress.yaml','service.beta.kubernetes.io/aws-load-balancer-internal:\x20\x22true\x22','aZDNu','WkoDQ','lHNct','KSuar','Adding\x20Turboscale\x20Agent','Adding\x20Autoscaler\x20namespacedRole','IVJjU','lFQlG','Adding\x20hubdeployment','autoscaler','WYOkU','sSbpT','metadata','join','hPzPr','rdemx','clusterissuer.yaml','vVkbZ','GnFyZ','YzLcC','MSjBc','bgtQp','Adding\x20MetricsServer\x20namespacedRoleBinding','LeWxD','qofsb','hub-service.yaml','XeWGp','aHQfe','WlEgk','bCbBX','RqlPo','Added\x20MetricsServer\x20Components','hEwMp','SeRuh','OgEDy','clusterrole.yaml','DPxRc','replicas','CcAde','njsYr','KBYAa','deployer-srvacct-binding-','uuid','UCMqN','kuNrZ','Deleted\x20cluster\x20and\x20linked\x20resources\x20successfully','Added\x20Cert\x20Manager','YzmuB','yvVZy','PTJAO','RxOLc','../config/logger','nMAjz','deleteRoutingDeps','rEIyM','readNamespace','SZBLb','KoFai','Opwbe','TllnX','nginx-private','service.yaml','STUvr','lXNpx','Adding\x20MetricsServer\x20clusterRole','xlzil'];a28_0x4125=function(){return _0x466a3e;};return a28_0x4125();}const fs=require('fs'),yaml=require(a28_0x55ecd7(0x28a)),path=require(a28_0x55ecd7(0x152)),{v4:uuidv4}=require(a28_0x55ecd7(0x21e)),{logger}=require(a28_0x55ecd7(0x227)),{AG_API_URL,global_registry,CLUSTER_DEP_STACK_NAME,CLUSTER_AUTOSCALER_STACK_NAME,AZURE,GCP}=require('../config/constants'),{deleteClusterStack}=require(a28_0x55ecd7(0x264)),{kubeApply}=require(a28_0x55ecd7(0x1e4)),{delay}=require(a28_0x55ecd7(0x1bb)),applyTemplate=async(_0x2efbc5,_0x588762,_0x3831bf={})=>{const _0xbd9a97=a28_0x55ecd7,_0x5d18a0={};_0x5d18a0[_0xbd9a97(0x183)]=_0xbd9a97(0x15c),_0x5d18a0[_0xbd9a97(0x224)]=function(_0x342af3,_0x1872ec){return _0x342af3===_0x1872ec;},_0x5d18a0[_0xbd9a97(0x182)]=_0xbd9a97(0x1e6),_0x5d18a0[_0xbd9a97(0x20c)]='templates',_0x5d18a0['CcAde']=_0xbd9a97(0x154),_0x5d18a0['MUUIM']=_0xbd9a97(0x245),_0x5d18a0['ZMhnq']=_0xbd9a97(0x246),_0x5d18a0[_0xbd9a97(0x24e)]=function(_0x444f16,_0x473163){return _0x444f16!=_0x473163;},_0x5d18a0[_0xbd9a97(0x193)]=function(_0x320d71,_0x4ecdd2){return _0x320d71!==_0x4ecdd2;},_0x5d18a0[_0xbd9a97(0x269)]=function(_0x46283a,_0x2aa0ea){return _0x46283a!==_0x2aa0ea;},_0x5d18a0[_0xbd9a97(0x244)]=_0xbd9a97(0x15e),_0x5d18a0['dkbmL']=_0xbd9a97(0x189),_0x5d18a0[_0xbd9a97(0x215)]=function(_0x433041,_0x22afc7){return _0x433041!==_0x22afc7;},_0x5d18a0[_0xbd9a97(0x155)]='ZGoIk',_0x5d18a0[_0xbd9a97(0x1b2)]=_0xbd9a97(0x203),_0x5d18a0[_0xbd9a97(0x1c8)]=_0xbd9a97(0x1db),_0x5d18a0[_0xbd9a97(0x220)]='qIhbV',_0x5d18a0[_0xbd9a97(0x166)]=function(_0x300e56,_0x38f70b){return _0x300e56===_0x38f70b;},_0x5d18a0[_0xbd9a97(0x171)]=function(_0x23a110,_0x439020){return _0x23a110===_0x439020;},_0x5d18a0[_0xbd9a97(0x1b4)]=_0xbd9a97(0x1b1),_0x5d18a0['tPlrj']='HDnpu';const _0x97f9bd=_0x5d18a0;let _0x4305a5=await fs[_0xbd9a97(0x1a8)](path[_0xbd9a97(0x201)](__dirname,'..',_0x97f9bd[_0xbd9a97(0x20c)],_0x2efbc5),_0x97f9bd[_0xbd9a97(0x21a)]);_0x4305a5=_0x4305a5[_0xbd9a97(0x1d7)](/<GridNamespace>/g,_0x588762),_0x4305a5=_0x4305a5[_0xbd9a97(0x1d7)](/<BstackURL>/g,AG_API_URL),_0x4305a5=_0x4305a5[_0xbd9a97(0x1d7)](/<ClusterName>/g,global_registry[_0xbd9a97(0x293)]),_0x4305a5=_0x4305a5[_0xbd9a97(0x1d7)](/<BstackUsername>/g,global_registry[_0xbd9a97(0x25e)]),_0x4305a5=_0x4305a5[_0xbd9a97(0x1d7)](/<BstackAccessKey>/g,global_registry['bstackAccesskey']),_0x4305a5=_0x4305a5[_0xbd9a97(0x1d7)](/<GridName>/g,global_registry[_0xbd9a97(0x251)]),_0x4305a5=_0x4305a5[_0xbd9a97(0x1d7)](/<Region>/g,global_registry['clusterRegion']),_0x4305a5=_0x4305a5[_0xbd9a97(0x1d7)](/<CloudProvider>/g,global_registry['cloudProvider']),_0x4305a5=_0x4305a5['replace'](/<HubImageVersion>/g,global_registry['hubVersion']),_0x4305a5=_0x4305a5[_0xbd9a97(0x1d7)](/<BrowserImageVersion>/g,global_registry[_0xbd9a97(0x197)]),_0x4305a5=_0x4305a5[_0xbd9a97(0x1d7)](/<PrivateGrid>/g,global_registry['isPrivateGrid']?_0x97f9bd[_0xbd9a97(0x1ca)]:_0x97f9bd['ZMhnq']);if(_0x97f9bd[_0xbd9a97(0x24e)](global_registry[_0xbd9a97(0x290)],null)&&_0x97f9bd['XonZQ'](global_registry[_0xbd9a97(0x290)],undefined)){if(_0x97f9bd['ioqeW'](_0x97f9bd[_0xbd9a97(0x244)],_0x97f9bd[_0xbd9a97(0x156)]))_0x4305a5=_0x4305a5[_0xbd9a97(0x1d7)](/<GridProfileID>/g,global_registry[_0xbd9a97(0x290)]);else return _0x97f9bd['oWQdZ'];}else{if(_0x97f9bd[_0xbd9a97(0x215)](_0x97f9bd[_0xbd9a97(0x155)],_0x97f9bd[_0xbd9a97(0x1b2)]))_0x4305a5=_0x4305a5[_0xbd9a97(0x1d7)](/<GridProfileID>/g,'');else{const _0x5f37cd={};_0x5f37cd[_0xbd9a97(0x199)]=''+_0x22f156['clientId'];const _0x302f39={'annotations':_0x5f37cd,..._0x4ea0ff[_0xbd9a97(0x200)]};_0x15d784[_0xbd9a97(0x200)]=_0x302f39;}}const _0x50cff1=yaml['load'](_0x4305a5);if(_0x97f9bd['yvVZy'](global_registry['cloudProvider'],AZURE)&&_0x97f9bd[_0xbd9a97(0x193)](_0x3831bf[_0x97f9bd[_0xbd9a97(0x1c8)]],undefined)){if(_0x97f9bd[_0xbd9a97(0x193)](_0x97f9bd[_0xbd9a97(0x220)],_0x97f9bd[_0xbd9a97(0x220)]))_0x1674eb=_0x30a7b2[_0xbd9a97(0x1d7)](/<GridProfileID>/g,'');else{const _0x59e81a={};_0x59e81a[_0xbd9a97(0x199)]=''+_0x3831bf[_0xbd9a97(0x1db)],_0x50cff1[_0xbd9a97(0x200)]={'annotations':_0x59e81a,..._0x50cff1['metadata']};}}if(_0x97f9bd[_0xbd9a97(0x166)](global_registry[_0xbd9a97(0x151)],AZURE)&&_0x97f9bd[_0xbd9a97(0x171)](_0x2efbc5,_0x97f9bd[_0xbd9a97(0x1b4)])){if(_0x97f9bd[_0xbd9a97(0x269)](_0x97f9bd['tPlrj'],_0x97f9bd[_0xbd9a97(0x275)])){if(_0x97f9bd[_0xbd9a97(0x224)](_0x1037ee[_0x43aead][_0xbd9a97(0x200)][_0xbd9a97(0x23b)],_0x97f9bd[_0xbd9a97(0x182)]))return!![];}else _0x50cff1[_0xbd9a97(0x185)]['template'][_0xbd9a97(0x200)][_0xbd9a97(0x1e0)]={'azure.workload.identity/use':_0x97f9bd[_0xbd9a97(0x1ca)],..._0x50cff1[_0xbd9a97(0x185)]['template'][_0xbd9a97(0x200)][_0xbd9a97(0x1e0)]};}return _0x50cff1;};function a28_0x2993(_0x49fae9,_0x4870d0){const _0x41257b=a28_0x4125();return a28_0x2993=function(_0x299353,_0x4cdf0c){_0x299353=_0x299353-0x13f;let _0x3eab79=_0x41257b[_0x299353];return _0x3eab79;},a28_0x2993(_0x49fae9,_0x4870d0);}exports[a28_0x55ecd7(0x29c)]=async(_0x266c79,_0x10149f,_0x8c1fcf,_0xb5f807,_0x4e2f07,_0x418f22,_0x23f165)=>{const _0x3929b3=a28_0x55ecd7,_0x28084e={};_0x28084e[_0x3929b3(0x1be)]=_0x3929b3(0x284),_0x28084e[_0x3929b3(0x165)]=_0x3929b3(0x26e),_0x28084e[_0x3929b3(0x1cb)]=_0x3929b3(0x1fd),_0x28084e[_0x3929b3(0x233)]='sa.yaml',_0x28084e[_0x3929b3(0x27a)]='utf-8',_0x28084e[_0x3929b3(0x236)]='eks.amazonaws.com/role-arn',_0x28084e[_0x3929b3(0x1c2)]='kube-system',_0x28084e[_0x3929b3(0x223)]='Adding\x20Autoscaler\x20clusterRole',_0x28084e[_0x3929b3(0x28c)]=_0x3929b3(0x217),_0x28084e[_0x3929b3(0x1f5)]=_0x3929b3(0x1f9),_0x28084e[_0x3929b3(0x211)]='role.yaml',_0x28084e[_0x3929b3(0x1dd)]=_0x3929b3(0x1b5),_0x28084e[_0x3929b3(0x270)]='cluster-role-binding.yaml',_0x28084e[_0x3929b3(0x1e9)]=_0x3929b3(0x259),_0x28084e[_0x3929b3(0x17b)]=_0x3929b3(0x198),_0x28084e[_0x3929b3(0x1d3)]=_0x3929b3(0x1c7),_0x28084e[_0x3929b3(0x20b)]=_0x3929b3(0x273),_0x28084e[_0x3929b3(0x24a)]=_0x3929b3(0x160);const _0x1b9b0c=_0x28084e;let _0x5c8a08=null,_0x3b208b=null;logger[_0x3929b3(0x1d1)](_0x1b9b0c[_0x3929b3(0x1be)]),_0x3b208b=await fs[_0x3929b3(0x1a8)](path[_0x3929b3(0x201)](__dirname,'..',_0x1b9b0c[_0x3929b3(0x165)],_0x1b9b0c[_0x3929b3(0x1cb)],_0x1b9b0c[_0x3929b3(0x233)]),_0x1b9b0c[_0x3929b3(0x27a)]),_0x5c8a08=yaml[_0x3929b3(0x146)](_0x3b208b),_0x5c8a08['metadata'][_0x3929b3(0x162)][_0x1b9b0c[_0x3929b3(0x236)]]=_0x23f165;const _0x1871ba={};_0x1871ba['namespace']=_0x1b9b0c[_0x3929b3(0x1c2)],_0x1871ba[_0x3929b3(0x17c)]=_0x5c8a08,await _0x266c79[_0x3929b3(0x238)](_0x1871ba),logger[_0x3929b3(0x1d1)](_0x1b9b0c[_0x3929b3(0x223)]),_0x3b208b=await fs[_0x3929b3(0x1a8)](path[_0x3929b3(0x201)](__dirname,'..',_0x1b9b0c[_0x3929b3(0x165)],_0x1b9b0c['UOxwZ'],_0x1b9b0c[_0x3929b3(0x28c)]),_0x1b9b0c[_0x3929b3(0x27a)]),_0x5c8a08=yaml[_0x3929b3(0x146)](_0x3b208b);const _0x2b8c12={};_0x2b8c12[_0x3929b3(0x17c)]=_0x5c8a08,await _0xb5f807['createClusterRole'](_0x2b8c12),logger[_0x3929b3(0x1d1)](_0x1b9b0c[_0x3929b3(0x1f5)]),_0x3b208b=await fs['readFileAsync'](path['join'](__dirname,'..',_0x1b9b0c[_0x3929b3(0x165)],_0x1b9b0c[_0x3929b3(0x1cb)],_0x1b9b0c[_0x3929b3(0x211)]),_0x1b9b0c[_0x3929b3(0x27a)]),_0x5c8a08=yaml['load'](_0x3b208b);const _0x262a6a={};_0x262a6a[_0x3929b3(0x1aa)]=_0x1b9b0c[_0x3929b3(0x1c2)],_0x262a6a['body']=_0x5c8a08,await _0xb5f807[_0x3929b3(0x1d2)](_0x262a6a),logger[_0x3929b3(0x1d1)](_0x1b9b0c[_0x3929b3(0x1dd)]),_0x3b208b=await fs[_0x3929b3(0x1a8)](path['join'](__dirname,'..',_0x1b9b0c[_0x3929b3(0x165)],_0x1b9b0c[_0x3929b3(0x1cb)],_0x1b9b0c['FpwWB']),_0x1b9b0c[_0x3929b3(0x27a)]),_0x5c8a08=yaml[_0x3929b3(0x146)](_0x3b208b);const _0x39fbac={};_0x39fbac[_0x3929b3(0x17c)]=_0x5c8a08,await _0xb5f807[_0x3929b3(0x147)](_0x39fbac),logger[_0x3929b3(0x1d1)](_0x1b9b0c[_0x3929b3(0x1e9)]),_0x3b208b=await fs[_0x3929b3(0x1a8)](path[_0x3929b3(0x201)](__dirname,'..',_0x1b9b0c['WwPCK'],_0x1b9b0c[_0x3929b3(0x1cb)],_0x1b9b0c[_0x3929b3(0x17b)]),_0x1b9b0c[_0x3929b3(0x27a)]),_0x5c8a08=yaml['load'](_0x3b208b);const _0x4ba01a={};_0x4ba01a[_0x3929b3(0x1aa)]=_0x1b9b0c[_0x3929b3(0x1c2)],_0x4ba01a['body']=_0x5c8a08,await _0xb5f807[_0x3929b3(0x23d)](_0x4ba01a),logger[_0x3929b3(0x1d1)](_0x1b9b0c[_0x3929b3(0x1d3)]),_0x3b208b=await fs[_0x3929b3(0x1a8)](path[_0x3929b3(0x201)](__dirname,'..',_0x1b9b0c[_0x3929b3(0x165)],_0x1b9b0c[_0x3929b3(0x1cb)],_0x1b9b0c[_0x3929b3(0x20b)]),_0x1b9b0c['HCKIs']),_0x3b208b=_0x3b208b['replace'](_0x1b9b0c[_0x3929b3(0x24a)],_0x418f22),_0x5c8a08=yaml[_0x3929b3(0x146)](_0x3b208b);const _0x5393ba={};_0x5393ba['namespace']=_0x1b9b0c[_0x3929b3(0x1c2)],_0x5393ba[_0x3929b3(0x17c)]=_0x5c8a08,await _0x10149f[_0x3929b3(0x263)](_0x5393ba);},exports[a28_0x55ecd7(0x255)]=async(_0x4bec64,_0x28a001,_0x446198,_0x2fe4df)=>{const _0x224607=a28_0x55ecd7,_0x931816={};_0x931816['pXnzX']=_0x224607(0x176),_0x931816[_0x224607(0x299)]='Adding\x20MetricsServer\x20clusterRoleBinding',_0x931816[_0x224607(0x14d)]=_0x224607(0x1d5),_0x931816[_0x224607(0x281)]=_0x224607(0x234),_0x931816['GJJeE']=_0x224607(0x26e),_0x931816['APsXa']=_0x224607(0x1e6),_0x931816[_0x224607(0x27f)]=_0x224607(0x1b9),_0x931816[_0x224607(0x294)]='utf-8',_0x931816[_0x224607(0x206)]=_0x224607(0x198),_0x931816[_0x224607(0x1c6)]=_0x224607(0x295),_0x931816[_0x224607(0x16a)]='service-account.yaml',_0x931816[_0x224607(0x190)]=_0x224607(0x231),_0x931816[_0x224607(0x1b3)]=_0x224607(0x271),_0x931816[_0x224607(0x225)]=_0x224607(0x273),_0x931816['UCMqN']=_0x224607(0x16e),_0x931816['EYNFW']=_0x224607(0x20a),_0x931816[_0x224607(0x207)]=_0x224607(0x18a),_0x931816[_0x224607(0x27e)]=_0x224607(0x148),_0x931816[_0x224607(0x1eb)]=_0x224607(0x15f),_0x931816[_0x224607(0x208)]='cluster-role.yaml',_0x931816[_0x224607(0x1a6)]=_0x224607(0x144),_0x931816[_0x224607(0x258)]=_0x224607(0x1e8);const _0x5b1970=_0x931816,_0x3b439e=_0x5b1970[_0x224607(0x1a9)]['split']('|');let _0x43032d=0x0;while(!![]){switch(_0x3b439e[_0x43032d++]){case'0':logger[_0x224607(0x1d1)](_0x5b1970[_0x224607(0x299)]);continue;case'1':const _0x4e88ce={};_0x4e88ce[_0x224607(0x1aa)]=_0x5b1970[_0x224607(0x14d)],_0x4e88ce['body']=templateBody,await _0x446198['createNamespacedRoleBinding'](_0x4e88ce);continue;case'2':templateBody=yaml[_0x224607(0x146)](yamlTemplate);continue;case'3':logger[_0x224607(0x1d1)](_0x5b1970[_0x224607(0x281)]);continue;case'4':yamlTemplate=await fs[_0x224607(0x1a8)](path[_0x224607(0x201)](__dirname,'..',_0x5b1970[_0x224607(0x149)],_0x5b1970['APsXa'],_0x5b1970[_0x224607(0x27f)]),_0x5b1970['dTwow']);continue;case'5':templateBody=yaml[_0x224607(0x146)](yamlTemplate);continue;case'6':yamlTemplate=await fs[_0x224607(0x1a8)](path[_0x224607(0x201)](__dirname,'..',_0x5b1970[_0x224607(0x149)],_0x5b1970[_0x224607(0x268)],_0x5b1970['GnFyZ']),_0x5b1970[_0x224607(0x294)]);continue;case'7':logger[_0x224607(0x1d1)](_0x5b1970['etKxh']);continue;case'8':yamlTemplate=await fs['readFileAsync'](path[_0x224607(0x201)](__dirname,'..',_0x5b1970[_0x224607(0x149)],_0x5b1970[_0x224607(0x268)],_0x5b1970[_0x224607(0x16a)]),_0x5b1970[_0x224607(0x294)]);continue;case'9':yamlTemplate=await fs[_0x224607(0x1a8)](path[_0x224607(0x201)](__dirname,'..',_0x5b1970[_0x224607(0x149)],_0x5b1970['APsXa'],_0x5b1970['CKigO']),_0x5b1970[_0x224607(0x294)]);continue;case'10':templateBody=yaml[_0x224607(0x146)](yamlTemplate);continue;case'11':logger[_0x224607(0x1d1)](_0x5b1970['EFjat']);continue;case'12':yamlTemplate=await fs[_0x224607(0x1a8)](path[_0x224607(0x201)](__dirname,'..',_0x5b1970[_0x224607(0x149)],_0x5b1970[_0x224607(0x268)],_0x5b1970[_0x224607(0x225)]),_0x5b1970[_0x224607(0x294)]);continue;case'13':const _0x10fc61={};_0x10fc61[_0x224607(0x1aa)]=_0x5b1970[_0x224607(0x14d)],_0x10fc61[_0x224607(0x17c)]=templateBody,await _0x4bec64[_0x224607(0x287)](_0x10fc61);continue;case'14':yamlTemplate=await fs['readFileAsync'](path[_0x224607(0x201)](__dirname,'..',_0x5b1970[_0x224607(0x149)],_0x5b1970['APsXa'],_0x5b1970[_0x224607(0x21f)]),_0x5b1970[_0x224607(0x294)]);continue;case'15':templateBody=yaml[_0x224607(0x146)](yamlTemplate);continue;case'16':const _0x155ebc={};_0x155ebc[_0x224607(0x17c)]=templateBody,await _0x446198[_0x224607(0x253)](_0x155ebc);continue;case'17':templateBody=yaml[_0x224607(0x146)](yamlTemplate);continue;case'18':const _0x30ee77={};_0x30ee77['body']=templateBody,await _0x446198[_0x224607(0x147)](_0x30ee77);continue;case'19':logger['info'](_0x5b1970[_0x224607(0x1ae)]);continue;case'20':logger[_0x224607(0x1d1)](_0x5b1970[_0x224607(0x207)]);continue;case'21':templateBody=yaml['load'](yamlTemplate);continue;case'22':yamlTemplate=await fs['readFileAsync'](path['join'](__dirname,'..',_0x5b1970[_0x224607(0x149)],_0x5b1970['APsXa'],_0x5b1970['KGSzD']),_0x5b1970[_0x224607(0x294)]);continue;case'23':const _0x4c9f7b={};_0x4c9f7b[_0x224607(0x17c)]=templateBody,await _0x446198[_0x224607(0x253)](_0x4c9f7b);continue;case'24':templateBody=yaml[_0x224607(0x146)](yamlTemplate);continue;case'25':const _0x40ee87={};_0x40ee87[_0x224607(0x1aa)]=_0x5b1970[_0x224607(0x14d)],_0x40ee87[_0x224607(0x17c)]=templateBody,await _0x4bec64['createNamespacedServiceAccount'](_0x40ee87);continue;case'26':templateBody=yaml[_0x224607(0x146)](yamlTemplate);continue;case'27':const _0x5f254c={};_0x5f254c['body']=templateBody,await _0x446198['createClusterRoleBinding'](_0x5f254c);continue;case'28':const _0x4a378b={};_0x4a378b['body']=templateBody,await _0x2fe4df['createAPIService'](_0x4a378b);continue;case'29':yamlTemplate=await fs['readFileAsync'](path[_0x224607(0x201)](__dirname,'..',_0x5b1970[_0x224607(0x149)],_0x5b1970[_0x224607(0x268)],_0x5b1970['AepDZ']),_0x5b1970[_0x224607(0x294)]);continue;case'30':templateBody=yaml[_0x224607(0x146)](yamlTemplate);continue;case'31':const _0x4f16b4={};_0x4f16b4['namespace']=_0x5b1970[_0x224607(0x14d)],_0x4f16b4['body']=templateBody,await _0x28a001['createNamespacedDeployment'](_0x4f16b4);continue;case'32':yamlTemplate=await fs[_0x224607(0x1a8)](path[_0x224607(0x201)](__dirname,'..',_0x5b1970[_0x224607(0x149)],_0x5b1970[_0x224607(0x268)],_0x5b1970[_0x224607(0x208)]),_0x5b1970[_0x224607(0x294)]);continue;case'33':logger[_0x224607(0x1d1)](_0x5b1970[_0x224607(0x299)]);continue;case'34':logger[_0x224607(0x1d1)](_0x5b1970[_0x224607(0x1a6)]);continue;case'35':logger[_0x224607(0x1d1)](_0x5b1970[_0x224607(0x258)]);continue;}break;}},exports[a28_0x55ecd7(0x16b)]=async _0x10f571=>{const _0x529cf2=a28_0x55ecd7,_0x530a28={};_0x530a28[_0x529cf2(0x172)]=_0x529cf2(0x1d5),_0x530a28[_0x529cf2(0x188)]=function(_0x57b610,_0x2ec895){return _0x57b610<_0x2ec895;},_0x530a28['teFwd']=function(_0x794ff7,_0x14bd40){return _0x794ff7!==_0x14bd40;},_0x530a28[_0x529cf2(0x159)]=_0x529cf2(0x218),_0x530a28[_0x529cf2(0x276)]=_0x529cf2(0x27d),_0x530a28[_0x529cf2(0x22a)]=function(_0x22b81c,_0xe5abe9){return _0x22b81c===_0xe5abe9;},_0x530a28[_0x529cf2(0x1e7)]=_0x529cf2(0x1e6),_0x530a28[_0x529cf2(0x1cc)]=function(_0x2038dc,_0x508758){return _0x2038dc===_0x508758;},_0x530a28[_0x529cf2(0x175)]=_0x529cf2(0x1c5),_0x530a28['FDuuP']=_0x529cf2(0x177);const _0x2f4848=_0x530a28,_0x16d5c9={};_0x16d5c9[_0x529cf2(0x1aa)]=_0x2f4848[_0x529cf2(0x172)];const _0x138612=await _0x10f571['listNamespacedService'](_0x16d5c9),_0x2a042a=_0x138612?.[_0x529cf2(0x285)];for(let _0x59313d=0x0;_0x2f4848[_0x529cf2(0x188)](_0x59313d,_0x2a042a['length']);_0x59313d++){if(_0x2f4848[_0x529cf2(0x291)](_0x2f4848[_0x529cf2(0x159)],_0x2f4848[_0x529cf2(0x276)])){if(_0x2f4848['rEIyM'](_0x2a042a[_0x59313d]['metadata']['name'],_0x2f4848[_0x529cf2(0x1e7)])){if(_0x2f4848[_0x529cf2(0x1cc)](_0x2f4848[_0x529cf2(0x175)],_0x2f4848['FDuuP']))_0x831bf1=_0x129633[_0x529cf2(0x1d7)](/<GridProfileID>/g,_0x13a79c[_0x529cf2(0x290)]);else return!![];}}else _0x45116a[_0x529cf2(0x1ad)](_0x62a580[_0x529cf2(0x1df)]);}return![];},exports['namespaceExists']=async(_0x4070ee,_0x303cfa)=>{const _0x280fb4=a28_0x55ecd7,_0x4f1fba={};_0x4f1fba[_0x280fb4(0x1ba)]=_0x280fb4(0x1f3),_0x4f1fba[_0x280fb4(0x180)]=function(_0x23d5cb,_0x4f2f8d){return _0x23d5cb===_0x4f2f8d;},_0x4f1fba[_0x280fb4(0x29b)]=_0x280fb4(0x205),_0x4f1fba[_0x280fb4(0x265)]=_0x280fb4(0x15d),_0x4f1fba[_0x280fb4(0x1c1)]=function(_0x2648aa,_0x470a9d){return _0x2648aa!==_0x470a9d;},_0x4f1fba[_0x280fb4(0x179)]='IcFUc',_0x4f1fba[_0x280fb4(0x228)]=_0x280fb4(0x1fa);const _0x162fcd=_0x4f1fba;try{if(_0x162fcd['YnAbi'](_0x162fcd[_0x280fb4(0x29b)],_0x162fcd['zTDYf']))throw _0x3b8567;else{const _0x1727a2={};_0x1727a2[_0x280fb4(0x23b)]=_0x303cfa;const _0x1e2922=await _0x4070ee[_0x280fb4(0x22b)](_0x1727a2);return!![];}}catch(_0x5f5dc6){if(_0x162fcd[_0x280fb4(0x1c1)](_0x162fcd[_0x280fb4(0x179)],_0x162fcd[_0x280fb4(0x228)]))return![];else _0xf5fca7=_0x162fcd[_0x280fb4(0x1ba)];}},exports['getNamespaceUID']=async(_0x2f3486,_0x4976dd)=>{const _0x491b7a=a28_0x55ecd7,_0x52c8b8={};_0x52c8b8[_0x491b7a(0x1ea)]=function(_0x48cc8e,_0x18483e){return _0x48cc8e===_0x18483e;},_0x52c8b8[_0x491b7a(0x29e)]=_0x491b7a(0x14f),_0x52c8b8['nitbl']=function(_0x463b52,_0x1c28d0){return _0x463b52===_0x1c28d0;},_0x52c8b8[_0x491b7a(0x1f6)]=_0x491b7a(0x209),_0x52c8b8[_0x491b7a(0x22d)]=_0x491b7a(0x216),_0x52c8b8[_0x491b7a(0x1ed)]=_0x491b7a(0x15c);const _0x4b8012=_0x52c8b8;try{if(_0x4b8012['SZodL'](_0x4b8012['ZaRoX'],_0x4b8012[_0x491b7a(0x29e)])){const _0x357425={};_0x357425[_0x491b7a(0x23b)]=_0x4976dd;const _0x414c09=await _0x2f3486[_0x491b7a(0x22b)](_0x357425),_0x152536=_0x414c09?.[_0x491b7a(0x200)]?.[_0x491b7a(0x196)];return _0x152536;}else{if(_0x4b8012[_0x491b7a(0x1ea)](_0x53a2f1['statusCode'],0x199)||_0x4b8012[_0x491b7a(0x1ea)](_0x5dfea5[_0x491b7a(0x1b8)],0x199))_0x5ed197[_0x491b7a(0x1ad)](_0x3b60ba['message']);else throw _0xfa4072;}}catch(_0x37e206){return _0x4b8012['nitbl'](_0x4b8012[_0x491b7a(0x1f6)],_0x4b8012[_0x491b7a(0x22d)])?!![]:_0x4b8012[_0x491b7a(0x1ed)];}},exports[a28_0x55ecd7(0x25b)]=async(_0x16459e,_0x1f9403,_0x181ec5,_0x52be91,_0x561861,_0x18183b,_0x51eb90,_0x478f5a,_0x3df295,_0x37af34={},_0x4fa149)=>{const _0x5651fb=a28_0x55ecd7,_0x3c6c5e={'miokV':_0x5651fb(0x245),'dIsYF':_0x5651fb(0x249),'nhrhU':_0x5651fb(0x1e2),'YKaqr':'Adding\x20clusterrolebinding','xlzil':function(_0x5d003c,_0x36d19a,_0x7782b9){return _0x5d003c(_0x36d19a,_0x7782b9);},'VXEej':'cluster-role-binding.yaml','dXKpN':_0x5651fb(0x1a4),'FFnqf':function(_0x1a5f07,_0x11e36f){return _0x1a5f07!=_0x11e36f;},'AyWAV':function(_0x526e9f,_0x580063){return _0x526e9f!==_0x580063;},'cpKAW':function(_0x411bbc,_0x5932af){return _0x411bbc===_0x5932af;},'aARwj':'sTTdl','wkeCs':'Adding\x20Autoscaler\x20Components','KcfxK':_0x5651fb(0x247),'HYDPf':function(_0x569d32,_0x165c2f){return _0x569d32!==_0x165c2f;},'OSOhi':_0x5651fb(0x25c),'fYqrG':_0x5651fb(0x26a),'xgfFe':_0x5651fb(0x28e),'rVtaS':_0x5651fb(0x213),'njsYr':'ZtRQb','FXetU':_0x5651fb(0x18e),'Ieykp':_0x5651fb(0x252),'fhahT':function(_0x4f0535,_0x32b94c,_0x32d5dc,_0x33ed58){return _0x4f0535(_0x32b94c,_0x32d5dc,_0x33ed58);},'KSuar':_0x5651fb(0x16c),'wrLvl':'Added\x20browser-node\x20service\x20account','YwJzC':function(_0x1fb56e,_0x244579){return _0x1fb56e===_0x244579;},'rjkqW':'XmVst','EDviO':'Adding\x20default\x20service\x20account','UAnlO':function(_0x3fae77,_0xda2875,_0x32e652,_0xe0b1fc){return _0x3fae77(_0xda2875,_0x32e652,_0xe0b1fc);},'jPhys':_0x5651fb(0x266),'SZBLb':_0x5651fb(0x1a5),'ZwLrd':_0x5651fb(0x1e1),'TllnX':'Adding\x20browser-node-role\x20cluster\x20role','pHgnw':function(_0x462e4,_0x338c85,_0x2c6dcf){return _0x462e4(_0x338c85,_0x2c6dcf);},'tXdZs':'browser-node-cluster-role.yaml','Svvts':_0x5651fb(0x161),'YkMmr':_0x5651fb(0x1b0),'fXacC':_0x5651fb(0x23a),'kjjWf':_0x5651fb(0x250),'Fnjgu':function(_0xf50022,_0x569186){return _0xf50022===_0x569186;},'XyEZz':_0x5651fb(0x286),'pTvNZ':'5|8|2|7|3|1|9|0|6|4','uDapH':'Adding\x20Nginx\x20Pods\x20and\x20deployments','FDjIM':_0x5651fb(0x26d),'CBgYs':_0x5651fb(0x191),'RxOLc':_0x5651fb(0x257),'EygLa':function(_0x5dcd06,_0x266ef7,_0x2af98a){return _0x5dcd06(_0x266ef7,_0x2af98a);},'NrbZP':_0x5651fb(0x26e),'YIjVA':_0x5651fb(0x186),'swcHq':'helper.yaml','kjUvL':'utf-8','NKFHs':_0x5651fb(0x173),'vgFsQ':_0x5651fb(0x254),'hPzPr':function(_0x589ace,_0xc62925){return _0x589ace===_0xc62925;},'LKDGa':_0x5651fb(0x1f3),'wJEFy':_0x5651fb(0x292),'nqFQX':function(_0x2cd613,_0x5703bf,_0x50639e){return _0x2cd613(_0x5703bf,_0x50639e);},'FNZDr':'Added\x20Nginx\x20Private\x20Pods\x20and\x20deployments','suqFl':_0x5651fb(0x167),'erqEs':_0x5651fb(0x243),'FYfwF':_0x5651fb(0x1da),'LOjGR':'vpc-cni-cm.yaml','mjPpu':_0x5651fb(0x1ee),'UviKd':_0x5651fb(0x14e),'AyMUg':function(_0x488047,_0x25a64d,_0x3fbaa0){return _0x488047(_0x25a64d,_0x3fbaa0);},'NnYDk':_0x5651fb(0x1f1),'URuZe':_0x5651fb(0x277),'SqpHl':_0x5651fb(0x204),'oowfC':_0x5651fb(0x222),'DEGJO':'Added\x20Cert\x20Manager\x20CRDs','chZdE':function(_0xe9cf5b,_0x19f572){return _0xe9cf5b(_0x19f572);},'IcbsZ':function(_0x5c22c7,_0x12587a,_0x2d3289){return _0x5c22c7(_0x12587a,_0x2d3289);},'tGaNN':_0x5651fb(0x1c4),'STUvr':_0x5651fb(0x1bc),'JaUdV':_0x5651fb(0x24f),'AQfmG':_0x5651fb(0x14c),'GMZgp':_0x5651fb(0x280),'rHmui':_0x5651fb(0x1ec),'aHQfe':_0x5651fb(0x1f8),'XeWGp':'Added\x20Turboscale\x20Agent','mICna':function(_0x200c3c,_0x5c2c8c,_0xd6e5f6){return _0x200c3c(_0x5c2c8c,_0xd6e5f6);},'oJedZ':'turboscale-agent.yaml','IQbRp':_0x5651fb(0x1bf),'eROeO':function(_0x5c3f32,_0x58e747,_0x4dd03d){return _0x5c3f32(_0x58e747,_0x4dd03d);},'jAhTl':_0x5651fb(0x20d),'KBYAa':_0x5651fb(0x18f),'sBLeV':_0x5651fb(0x1fc),'khUYv':function(_0x3829e5,_0x53da3d,_0x4095a4){return _0x3829e5(_0x53da3d,_0x4095a4);},'Egpcf':_0x5651fb(0x1b1),'mYBaH':_0x5651fb(0x169),'sSbpT':_0x5651fb(0x16f),'aShSn':_0x5651fb(0x1f2),'cFYru':_0x5651fb(0x230),'WlEgk':function(_0x24ea59,_0x520d9e,_0xa96f43){return _0x24ea59(_0x520d9e,_0xa96f43);},'CoaBc':_0x5651fb(0x150),'FHsjX':function(_0x4e2b34,_0x2caf28){return _0x4e2b34(_0x2caf28);}};let _0x4bc703=null;logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x17e)]),_0x4bc703=await _0x3c6c5e[_0x5651fb(0x235)](applyTemplate,_0x3c6c5e[_0x5651fb(0x1de)],_0x561861);const _0x35d45b={};_0x35d45b[_0x5651fb(0x17c)]=_0x4bc703,await _0x52be91[_0x5651fb(0x147)](_0x35d45b),logger[_0x5651fb(0x1d1)](_0x3c6c5e['dXKpN']);if(_0x3c6c5e[_0x5651fb(0x274)](_0x51eb90,null)&&_0x3c6c5e[_0x5651fb(0x26f)](_0x51eb90,undefined)){if(_0x3c6c5e['cpKAW'](_0x3c6c5e['aARwj'],_0x3c6c5e['aARwj']))logger['info'](_0x3c6c5e[_0x5651fb(0x1a3)]),await this[_0x5651fb(0x29c)](_0x16459e,_0x1f9403,_0x181ec5,_0x52be91,_0x561861,_0x18183b,_0x51eb90),logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x15b)]);else{const _0x2bb9df={'azure.workload.identity/use':_0x3c6c5e[_0x5651fb(0x282)],..._0x29da7a['spec'][_0x5651fb(0x168)][_0x5651fb(0x200)][_0x5651fb(0x1e0)]};_0x7641f3[_0x5651fb(0x185)]['template']['metadata'][_0x5651fb(0x1e0)]=_0x2bb9df;}}const _0x2aec7c=await this[_0x5651fb(0x16b)](_0x16459e);if(!_0x2aec7c){if(_0x3c6c5e[_0x5651fb(0x178)](_0x3c6c5e[_0x5651fb(0x25d)],_0x3c6c5e['fYqrG']))logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x1ce)]),await this[_0x5651fb(0x255)](_0x16459e,_0x1f9403,_0x52be91,_0x478f5a),logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x195)]);else return![];}try{if(_0x3c6c5e[_0x5651fb(0x26f)](_0x3c6c5e[_0x5651fb(0x21b)],_0x3c6c5e[_0x5651fb(0x242)])){logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x26b)]),_0x4bc703=await _0x3c6c5e[_0x5651fb(0x25a)](applyTemplate,_0x3c6c5e[_0x5651fb(0x1f7)],_0x561861,_0x37af34);const _0x26f37b={};_0x26f37b[_0x5651fb(0x1aa)]=_0x561861,_0x26f37b[_0x5651fb(0x17c)]=_0x4bc703,await _0x16459e[_0x5651fb(0x238)](_0x26f37b),logger['info'](_0x3c6c5e[_0x5651fb(0x17a)]);if(_0x3c6c5e[_0x5651fb(0x262)](global_registry[_0x5651fb(0x151)],AZURE)){if(_0x3c6c5e[_0x5651fb(0x18d)](_0x3c6c5e['rjkqW'],_0x3c6c5e['rjkqW'])){logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x19d)]),_0x4bc703=await _0x3c6c5e['UAnlO'](applyTemplate,_0x3c6c5e[_0x5651fb(0x14b)],_0x561861,_0x37af34);const _0x57bec8={};_0x57bec8[_0x5651fb(0x23b)]=_0x3c6c5e[_0x5651fb(0x22c)],_0x57bec8['namespace']=_0x561861,_0x57bec8[_0x5651fb(0x17c)]=_0x4bc703,await _0x16459e[_0x5651fb(0x158)](_0x57bec8),logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x289)]);}else _0x36fd4a=_0x3c6c5e['dIsYF'];}logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x22f)]),_0x4bc703=await _0x3c6c5e[_0x5651fb(0x1e5)](applyTemplate,_0x3c6c5e[_0x5651fb(0x23c)],_0x561861);const _0xa86649={};_0xa86649[_0x5651fb(0x17c)]=_0x4bc703,await _0x52be91[_0x5651fb(0x253)](_0xa86649),logger[_0x5651fb(0x1d1)](_0x3c6c5e['Svvts']),logger[_0x5651fb(0x1d1)](_0x3c6c5e['YkMmr']),_0x4bc703=await _0x3c6c5e[_0x5651fb(0x235)](applyTemplate,_0x3c6c5e['fXacC'],_0x561861);const _0x3da01c={};_0x3da01c['body']=_0x4bc703,await _0x52be91[_0x5651fb(0x147)](_0x3da01c),logger['info'](_0x3c6c5e['kjjWf']);}else _0x3339bf=_0x3c6c5e[_0x5651fb(0x1c3)];}catch(_0x29eeeb){if(_0x3c6c5e[_0x5651fb(0x267)](_0x29eeeb[_0x5651fb(0x26c)],0x199)||_0x3c6c5e[_0x5651fb(0x267)](_0x29eeeb['code'],0x199))logger[_0x5651fb(0x1ad)](_0x29eeeb[_0x5651fb(0x1df)]);else throw _0x29eeeb;}const _0x1df12c=await this[_0x5651fb(0x1ef)](_0x16459e,_0x3c6c5e[_0x5651fb(0x164)]);if(!_0x1df12c){const _0x5dc48f=_0x3c6c5e[_0x5651fb(0x1d0)][_0x5651fb(0x163)]('|');let _0x5f164f=0x0;while(!![]){switch(_0x5dc48f[_0x5f164f++]){case'0':_0x4bc703=yaml['loadAll'](yamlTemplate);continue;case'1':logger['info'](_0x3c6c5e[_0x5651fb(0x18c)]);continue;case'2':_0x4bc703=yaml[_0x5651fb(0x1a2)](yamlTemplate);continue;case'3':logger['info'](_0x3c6c5e[_0x5651fb(0x192)]);continue;case'4':logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x19b)]);continue;case'5':logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x226)]);continue;case'6':await _0x3c6c5e['pHgnw'](kubeApply,_0x4bc703,_0x3df295);continue;case'7':await _0x3c6c5e[_0x5651fb(0x1b7)](kubeApply,_0x4bc703,_0x3df295);continue;case'8':yamlTemplate=await fs[_0x5651fb(0x1a8)](path[_0x5651fb(0x201)](__dirname,'..',_0x3c6c5e[_0x5651fb(0x15a)],_0x3c6c5e[_0x5651fb(0x184)],_0x3c6c5e[_0x5651fb(0x153)]),_0x3c6c5e[_0x5651fb(0x1d9)]);continue;case'9':yamlTemplate=await fs[_0x5651fb(0x1a8)](path[_0x5651fb(0x201)](__dirname,'..',_0x3c6c5e[_0x5651fb(0x15a)],_0x3c6c5e[_0x5651fb(0x184)],_0x3c6c5e['NKFHs']),_0x3c6c5e['kjUvL']);continue;}break;}}if(global_registry[_0x5651fb(0x288)]){logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x1a7)]);let _0x9e4750;if(_0x3c6c5e[_0x5651fb(0x202)](global_registry[_0x5651fb(0x151)],AZURE))_0x9e4750=_0x3c6c5e[_0x5651fb(0x1c3)];else _0x3c6c5e[_0x5651fb(0x202)](global_registry['cloudProvider'],GCP)?_0x9e4750=_0x3c6c5e[_0x5651fb(0x298)]:_0x9e4750=_0x3c6c5e[_0x5651fb(0x19f)];yamlTemplate=await fs['readFileAsync'](path[_0x5651fb(0x201)](__dirname,'..',_0x3c6c5e[_0x5651fb(0x15a)],_0x3c6c5e[_0x5651fb(0x184)],_0x3c6c5e[_0x5651fb(0x14a)]),_0x3c6c5e['kjUvL']),yamlTemplate=yamlTemplate[_0x5651fb(0x1d7)](/<InternalLoadBalancerAnnotations>/g,_0x9e4750),_0x4bc703=yaml[_0x5651fb(0x1a2)](yamlTemplate),await _0x3c6c5e[_0x5651fb(0x157)](kubeApply,_0x4bc703,_0x3df295),logger['info'](_0x3c6c5e['FNZDr']);}if(global_registry[_0x5651fb(0x24b)]){const _0x5172b2=_0x3c6c5e['suqFl'][_0x5651fb(0x163)]('|');let _0x40cec0=0x0;while(!![]){switch(_0x5172b2[_0x40cec0++]){case'0':_0x4bc703=yaml[_0x5651fb(0x1a2)](yamlTemplate);continue;case'1':logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x29a)]);continue;case'2':logger['info'](_0x3c6c5e[_0x5651fb(0x1f0)]);continue;case'3':await _0x3c6c5e[_0x5651fb(0x1e5)](kubeApply,_0x4bc703,_0x3df295);continue;case'4':yamlTemplate=await fs[_0x5651fb(0x1a8)](path[_0x5651fb(0x201)](__dirname,'..',_0x3c6c5e['NrbZP'],_0x3c6c5e['LOjGR']),_0x3c6c5e[_0x5651fb(0x1d9)]);continue;}break;}}const _0x53ab88=await this[_0x5651fb(0x1ef)](_0x16459e,_0x3c6c5e[_0x5651fb(0x29f)]);if(!_0x53ab88){const _0xf87bd7=_0x3c6c5e[_0x5651fb(0x28f)][_0x5651fb(0x163)]('|');let _0xbf615f=0x0;while(!![]){switch(_0xf87bd7[_0xbf615f++]){case'0':_0x4bc703=yaml[_0x5651fb(0x1a2)](yamlTemplate);continue;case'1':await _0x3c6c5e['AyMUg'](kubeApply,_0x4bc703,_0x3df295);continue;case'2':logger[_0x5651fb(0x1d1)](_0x3c6c5e['NnYDk']);continue;case'3':logger[_0x5651fb(0x1d1)](_0x3c6c5e['URuZe']);continue;case'4':yamlTemplate=await fs['readFileAsync'](path['join'](__dirname,'..',_0x3c6c5e[_0x5651fb(0x15a)],_0x3c6c5e[_0x5651fb(0x29f)],_0x3c6c5e[_0x5651fb(0x241)]),_0x3c6c5e['kjUvL']);continue;case'5':logger['info'](_0x3c6c5e['oowfC']);continue;case'6':logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x237)]);continue;case'7':_0x4bc703=yaml[_0x5651fb(0x1a2)](yamlTemplate);continue;case'8':await _0x3c6c5e[_0x5651fb(0x261)](delay,0x2710);continue;case'9':await _0x3c6c5e[_0x5651fb(0x29d)](kubeApply,_0x4bc703,_0x3df295);continue;case'10':yamlTemplate=await fs[_0x5651fb(0x1a8)](path[_0x5651fb(0x201)](__dirname,'..',_0x3c6c5e[_0x5651fb(0x15a)],_0x3c6c5e['mjPpu'],_0x3c6c5e[_0x5651fb(0x25f)]),_0x3c6c5e[_0x5651fb(0x1d9)]);continue;case'11':logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x232)]);continue;case'12':_0x4bc703=yaml['loadAll'](yamlTemplate);continue;case'13':yamlTemplate=await fs[_0x5651fb(0x1a8)](path['join'](__dirname,'..',_0x3c6c5e[_0x5651fb(0x15a)],_0x3c6c5e['mjPpu'],_0x3c6c5e[_0x5651fb(0x23e)]),_0x3c6c5e[_0x5651fb(0x1d9)]);continue;case'14':await _0x3c6c5e['nqFQX'](kubeApply,_0x4bc703,_0x3df295);continue;case'15':logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x1af)]);continue;}break;}}const _0x5bf3c2=await this['namespaceExists'](_0x16459e,_0x3c6c5e[_0x5651fb(0x19a)]);if(!_0x5bf3c2){const _0x4ab4ba=_0x3c6c5e[_0x5651fb(0x1d4)][_0x5651fb(0x163)]('|');let _0x20e136=0x0;while(!![]){switch(_0x4ab4ba[_0x20e136++]){case'0':yamlTemplate=yamlTemplate[_0x5651fb(0x1d7)](/<BstackUsername>/g,global_registry[_0x5651fb(0x25e)]);continue;case'1':logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x20f)]);continue;case'2':logger['info'](_0x3c6c5e[_0x5651fb(0x20e)]);continue;case'3':_0x4bc703=yaml['loadAll'](yamlTemplate);continue;case'4':await _0x3c6c5e[_0x5651fb(0x174)](kubeApply,_0x4bc703,_0x3df295);continue;case'5':yamlTemplate=yamlTemplate[_0x5651fb(0x1d7)](/<BstackURL>/g,AG_API_URL);continue;case'6':yamlTemplate=await fs[_0x5651fb(0x1a8)](path[_0x5651fb(0x201)](__dirname,'..',_0x3c6c5e[_0x5651fb(0x15a)],_0x3c6c5e['oJedZ']),_0x3c6c5e[_0x5651fb(0x1d9)]);continue;case'7':yamlTemplate=yamlTemplate[_0x5651fb(0x1d7)](/<BstackAccessKey>/g,global_registry['bstackAccesskey']);continue;}break;}}logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x272)]),_0x4bc703=await _0x3c6c5e[_0x5651fb(0x17d)](applyTemplate,_0x3c6c5e[_0x5651fb(0x141)],_0x561861);const _0x3155ca={};_0x3155ca['namespace']=_0x561861,_0x3155ca[_0x5651fb(0x17c)]=_0x4bc703,await _0x16459e['createNamespacedService'](_0x3155ca),logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x21c)]),logger[_0x5651fb(0x1d1)](_0x3c6c5e['sBLeV']),_0x4bc703=await _0x3c6c5e[_0x5651fb(0x18b)](applyTemplate,_0x3c6c5e[_0x5651fb(0x28d)],_0x561861);const _0x11e14a={};_0x11e14a[_0x5651fb(0x1aa)]=_0x561861,_0x11e14a[_0x5651fb(0x17c)]=_0x4bc703,await _0x1f9403[_0x5651fb(0x263)](_0x11e14a),logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x24c)]),logger[_0x5651fb(0x1d1)](_0x3c6c5e[_0x5651fb(0x1ff)]),yamlTemplate=await fs[_0x5651fb(0x1a8)](path[_0x5651fb(0x201)](__dirname,'..',_0x3c6c5e[_0x5651fb(0x15a)],_0x3c6c5e['aShSn']),_0x3c6c5e['kjUvL']);let _0x157837=global_registry[_0x5651fb(0x288)]?_0x3c6c5e['cFYru']:_0x3c6c5e['YIjVA'];yamlTemplate=yamlTemplate[_0x5651fb(0x1d7)](/<GridNamespace>/g,_0x561861),yamlTemplate=yamlTemplate[_0x5651fb(0x1d7)](/<NginxIngressClass>/g,_0x157837),_0x4bc703=yaml[_0x5651fb(0x1a2)](yamlTemplate),await _0x3c6c5e[_0x5651fb(0x210)](kubeApply,_0x4bc703,_0x3df295),logger['info'](_0x3c6c5e[_0x5651fb(0x181)]),await _0x3c6c5e[_0x5651fb(0x1cd)](delay,0x2710);},exports['removeGridComponents']=async(_0x3e9fdc,_0x30822d,_0xff74d2,_0x1d65cb,_0x17331f)=>{const _0x1c9510=a28_0x55ecd7,_0x5571b5={'drCxs':_0x1c9510(0x140),'lIEbN':'Removing\x20grid\x20components','YaIqW':_0x1c9510(0x19c),'nkheS':_0x1c9510(0x1e3),'kvAwq':'Removed\x20grid\x20components','RqlPo':function(_0x637148,_0xfe2004){return _0x637148(_0xfe2004);}},_0x546546=_0x5571b5[_0x1c9510(0x145)]['split']('|');let _0x45e3bf=0x0;while(!![]){switch(_0x546546[_0x45e3bf++]){case'0':const _0x19d278={};_0x19d278['name']=_0x1c9510(0x21d)+_0x17331f,await _0x1d65cb['deleteClusterRoleBinding'](_0x19d278);continue;case'1':logger[_0x1c9510(0x1d1)](_0x5571b5['lIEbN']);continue;case'2':logger[_0x1c9510(0x1d1)](_0x5571b5[_0x1c9510(0x260)]);continue;case'3':logger['info'](_0x5571b5['nkheS']);continue;case'4':logger[_0x1c9510(0x1d1)](_0x5571b5['kvAwq']);continue;case'5':await _0x5571b5[_0x1c9510(0x212)](delay,0x2710);continue;case'6':const _0x3eb093={};_0x3eb093[_0x1c9510(0x23b)]=_0x17331f,await _0x3e9fdc[_0x1c9510(0x170)](_0x3eb093);continue;}break;}},exports[a28_0x55ecd7(0x27b)]=async _0x218ef1=>{const _0x5e78ef=a28_0x55ecd7,_0x1418b0={};_0x1418b0[_0x5e78ef(0x1a1)]=_0x5e78ef(0x280),_0x1418b0[_0x5e78ef(0x1dc)]='Deleting\x20Turboscale\x20Agent',_0x1418b0['wCXTn']='Deleted\x20Turboscale\x20Agent';const _0x3c17b6=_0x1418b0,_0x5ca7f7=await this[_0x5e78ef(0x1ef)](_0x218ef1,_0x3c17b6[_0x5e78ef(0x1a1)]);if(_0x5ca7f7){logger['info'](_0x3c17b6[_0x5e78ef(0x1dc)]);const _0x41d146={};_0x41d146[_0x5e78ef(0x23b)]=_0x3c17b6[_0x5e78ef(0x1a1)],await _0x218ef1[_0x5e78ef(0x170)](_0x41d146),logger[_0x5e78ef(0x1d1)](_0x3c17b6[_0x5e78ef(0x1bd)]);}},exports[a28_0x55ecd7(0x229)]=async _0x4aebc2=>{const _0xbec78=a28_0x55ecd7,_0x5a014d={'bIQbp':_0xbec78(0x286),'bKYYn':_0xbec78(0x1ab),'sZWEH':'Deleted\x20ingress-nginx','xURgi':function(_0x249d7c,_0x46653d){return _0x249d7c(_0x46653d);},'Opwbe':'cert-manager','YCFoP':_0xbec78(0x240),'WYOkU':_0xbec78(0x279)},_0x5bb09b=await this['namespaceExists'](_0x4aebc2,_0x5a014d['bIQbp']);if(_0x5bb09b){logger['info'](_0x5a014d[_0xbec78(0x1ac)]);const _0x55e675={};_0x55e675[_0xbec78(0x23b)]=_0x5a014d[_0xbec78(0x194)],await _0x4aebc2[_0xbec78(0x170)](_0x55e675),logger['info'](_0x5a014d[_0xbec78(0x1c9)]);}await _0x5a014d['xURgi'](delay,0x124f8);const _0x5a9bde=await this[_0xbec78(0x1ef)](_0x4aebc2,_0x5a014d[_0xbec78(0x22e)]);if(_0x5a9bde){logger[_0xbec78(0x1d1)](_0x5a014d[_0xbec78(0x1d6)]);const _0x32f3a2={};_0x32f3a2[_0xbec78(0x23b)]=_0x5a014d['Opwbe'],await _0x4aebc2[_0xbec78(0x170)](_0x32f3a2),logger[_0xbec78(0x1d1)](_0x5a014d[_0xbec78(0x1fe)]);}await _0x5a014d['xURgi'](delay,0xafc8);},exports[a28_0x55ecd7(0x187)]=async _0x57beee=>{const _0x17225e=a28_0x55ecd7,_0x1df2ba={'IRaPN':function(_0x19f078,_0x475152){return _0x19f078(_0x475152);},'gYxTs':_0x17225e(0x221)};logger['info'](_0x17225e(0x16d)+CLUSTER_DEP_STACK_NAME+'\x20&\x20'+CLUSTER_AUTOSCALER_STACK_NAME+_0x17225e(0x143)+_0x57beee),await Promise[_0x17225e(0x297)]([_0x1df2ba['IRaPN'](deleteClusterStack,CLUSTER_DEP_STACK_NAME),_0x1df2ba[_0x17225e(0x296)](deleteClusterStack,CLUSTER_AUTOSCALER_STACK_NAME)]),logger[_0x17225e(0x1d1)](_0x1df2ba[_0x17225e(0x142)]);},exports['scaleUpHubDeployment']=async(_0x1ef833,_0x48fb45)=>{const _0x222286=a28_0x55ecd7,_0x136634={};_0x136634[_0x222286(0x1f4)]='Scaling\x20up\x20deployment',_0x136634[_0x222286(0x1a0)]=_0x222286(0x24d),_0x136634[_0x222286(0x1c0)]=_0x222286(0x248);const _0x184b82=_0x136634;logger['info'](_0x184b82[_0x222286(0x1f4)]);const _0x5689ee={};_0x5689ee[_0x222286(0x23b)]=_0x184b82[_0x222286(0x1a0)],_0x5689ee[_0x222286(0x1aa)]=_0x48fb45;const _0x2cc9e3=await _0x1ef833[_0x222286(0x13f)](_0x5689ee);_0x2cc9e3['spec'][_0x222286(0x219)]=0x1;const _0x369b70={};_0x369b70[_0x222286(0x23b)]=_0x184b82[_0x222286(0x1a0)],_0x369b70[_0x222286(0x1aa)]=_0x48fb45,_0x369b70[_0x222286(0x17c)]=_0x2cc9e3,await _0x1ef833[_0x222286(0x256)](_0x369b70),logger[_0x222286(0x1d1)](_0x184b82[_0x222286(0x1c0)]);},exports['scaleDownHubDeployment']=async(_0x1eeba8,_0x5ea1b2)=>{const _0x213dc7=a28_0x55ecd7,_0x128c42={};_0x128c42[_0x213dc7(0x1d8)]='Scaling\x20down\x20deployment',_0x128c42[_0x213dc7(0x214)]=_0x213dc7(0x24d),_0x128c42[_0x213dc7(0x1fb)]='Scaled\x20down\x20deployment';const _0x3e63c0=_0x128c42;logger[_0x213dc7(0x1d1)](_0x3e63c0[_0x213dc7(0x1d8)]);const _0x17fc57={};_0x17fc57[_0x213dc7(0x23b)]=_0x3e63c0['hEwMp'],_0x17fc57[_0x213dc7(0x1aa)]=_0x5ea1b2;const _0x2f8da5=await _0x1eeba8[_0x213dc7(0x13f)](_0x17fc57);_0x2f8da5[_0x213dc7(0x185)][_0x213dc7(0x219)]=0x0;const _0x2974bf={};_0x2974bf[_0x213dc7(0x23b)]=_0x3e63c0[_0x213dc7(0x214)],_0x2974bf[_0x213dc7(0x1aa)]=_0x5ea1b2,_0x2974bf['body']=_0x2f8da5,await _0x1eeba8[_0x213dc7(0x256)](_0x2974bf),logger[_0x213dc7(0x1d1)](_0x3e63c0[_0x213dc7(0x1fb)]);};