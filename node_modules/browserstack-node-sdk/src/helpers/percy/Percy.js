function a56_0x30e2(){const _0x471a14=['debug','vOkKh','TTtzf','CjqWF','tOWrm','close','1coGevf','projectName','percy.json','1339362MulkHN','./PercyBinary','start','14873336ahGGXf','CzeHi','4967008TwTRjl','iaNtj','qSFzU','env','ArjxM','api/app_percy/get_project_token?name=','JroKH','pEsDa','VnGBH','percyOptions','3147278SqEpcj','UqwUJ','Lcacl','gJYMw','createWriteStream','error','AcPwX','FdSkT','255306AOiuML','data','vfUMM','PERCY_SERVER_ADDRESS','app','sTiTn','ljYXU','UILKH','exec:stop','XfekP','BLvmS','JNmbr','wsdYA','wpsMn','token','http://localhost:5338','vUBLM','WfiyN','ZhVkZ','Ciyjq','PCNoF','bNVAj','uxLGB','peMHF','stringify','GKECx','FjGgz','../helper','healthcheck','tPYRV','qIYUq','CVjBC','automate','isProcessRunning','Percy\x20healthcheck\x20successful','VpkWz','GZqzx','zjyZN','AAgku','vxwZN','fwoqm','GET','cUjnA','ijsNk','NPwsr','pipe','HIOux','OhAgT','join','XwbgX','ejlUU','akteo','TeFYc','PERCY_TOKEN','hQVSn','ezZDb','XmzQF','exports',':start','xHjuz','Ebdic','4846220YukeSl','qlGEl','path','oAkwS','tmpdir','writeFile','getBinaryPath','winstonLogger','PBkTj','app:exec','isRunning','EjRgk','kmiCc','fetchPercyToken','VVnoo','kXtlP','push','kgyZE','SGGOs','105fRejzd','LLgcY','version','ebRsT','assign','Percy\x20unable\x20to\x20fetch\x20project\x20token:\x20','SmoWz','Error\x20creating\x20percy\x20config:\x20','Percy\x20config\x20created\x20at\x20','IBZdO','percy/healthcheck','LsNVO','XPeUh','NUBIt','bjdQm','57454263aBEAMV'];a56_0x30e2=function(){return _0x471a14;};return a56_0x30e2();}const a56_0x5f385d=a56_0x1974;(function(_0xd14f8,_0x365e0f){const _0x5666d7=a56_0x1974,_0x46a039=_0xd14f8();while(!![]){try{const _0x2e5de5=-parseInt(_0x5666d7(0x172))/0x1*(parseInt(_0x5666d7(0x184))/0x2)+-parseInt(_0x5666d7(0x175))/0x3+-parseInt(_0x5666d7(0x17a))/0x4+-parseInt(_0x5666d7(0x1c9))/0x5+-parseInt(_0x5666d7(0x18c))/0x6*(-parseInt(_0x5666d7(0x15c))/0x7)+-parseInt(_0x5666d7(0x178))/0x8+parseInt(_0x5666d7(0x16b))/0x9;if(_0x2e5de5===_0x365e0f)break;else _0x46a039['push'](_0x46a039['shift']());}catch(_0x22c9bc){_0x46a039['push'](_0x46a039['shift']());}}}(a56_0x30e2,0xe37e8));function a56_0x1974(_0x38522f,_0x141734){const _0x30e281=a56_0x30e2();return a56_0x1974=function(_0x1974cc,_0x2d1dfb){_0x1974cc=_0x1974cc-0x153;let _0x356631=_0x30e281[_0x1974cc];return _0x356631;},a56_0x1974(_0x38522f,_0x141734);}const fs=require('fs'),path=require(a56_0x5f385d(0x1cb)),os=require('os'),{spawn}=require('child_process'),helper=require(a56_0x5f385d(0x1a7)),logger=require('../logger')[a56_0x5f385d(0x1d0)],{logDir}=require('../logger'),PercyBinary=require(a56_0x5f385d(0x176));class Percy{#logfile=path[a56_0x5f385d(0x1bc)](logDir,'percy.log');#address=process[a56_0x5f385d(0x17d)][a56_0x5f385d(0x18f)]||a56_0x5f385d(0x19b);#binaryPath=null;#config=null;#proc=null;#isApp=![];[a56_0x5f385d(0x1ad)]=![];constructor(_0x453a21){const _0x82196e=a56_0x5f385d,_0x1c21f8={};_0x1c21f8[_0x82196e(0x16a)]=function(_0x40d3cd,_0x46905d){return _0x40d3cd===_0x46905d;},_0x1c21f8['CVjBC']=_0x82196e(0x19c);const _0x3fa59e=_0x1c21f8;this.#config=_0x453a21;if(!!_0x453a21[_0x82196e(0x190)]){if(_0x3fa59e['bjdQm'](_0x3fa59e[_0x82196e(0x1ab)],_0x3fa59e[_0x82196e(0x1ab)]))this.#isApp=!![];else return![];}}async #getBinaryPath(){const _0x4c28d3=a56_0x5f385d,_0x3d6a11={};_0x3d6a11[_0x4c28d3(0x1b3)]=function(_0xc2792c,_0x5ad7c0){return _0xc2792c!==_0x5ad7c0;},_0x3d6a11[_0x4c28d3(0x1aa)]='BfGrc',_0x3d6a11['vfUMM']=_0x4c28d3(0x1a0);const _0x275446=_0x3d6a11;if(!this.#binaryPath){if(_0x275446[_0x4c28d3(0x1b3)](_0x275446[_0x4c28d3(0x1aa)],_0x275446[_0x4c28d3(0x18e)])){const _0x45cf0c=new PercyBinary();this.#binaryPath=await _0x45cf0c[_0x4c28d3(0x1cf)](this.#config);}else return _0x3442ac[_0x4c28d3(0x189)](_0x4c28d3(0x161)+_0x553a96),null;}return this.#binaryPath;}async #sleep(_0x2cece5){return new Promise(_0x2381ce=>setTimeout(_0x2381ce,_0x2cece5));}async['healthcheck'](){const _0x50bb6a=a56_0x5f385d,_0x213278={};_0x213278['iaNtj']=function(_0x4355b0,_0x350e9e){return _0x4355b0===_0x350e9e;},_0x213278[_0x50bb6a(0x1af)]='phNcB',_0x213278[_0x50bb6a(0x167)]=_0x50bb6a(0x1b5),_0x213278[_0x50bb6a(0x1bd)]=_0x50bb6a(0x166),_0x213278[_0x50bb6a(0x179)]=_0x50bb6a(0x1b0),_0x213278[_0x50bb6a(0x1b6)]='nPKKF',_0x213278['GKECx']='tzINb';const _0x4a76d6=_0x213278;try{if(_0x4a76d6['iaNtj'](_0x4a76d6[_0x50bb6a(0x1af)],_0x4a76d6[_0x50bb6a(0x1af)])){const _0x3945d4=await helper['nodeRequest'](_0x4a76d6[_0x50bb6a(0x167)],_0x4a76d6[_0x50bb6a(0x1bd)],null,null,this.#address);if(_0x3945d4)return _0x4a76d6[_0x50bb6a(0x17b)](_0x4a76d6[_0x50bb6a(0x179)],_0x4a76d6['cUjnA'])?![]:!![];}else return!![];}catch(_0x58fe8b){if(_0x4a76d6[_0x50bb6a(0x17b)](_0x4a76d6['GKECx'],_0x4a76d6[_0x50bb6a(0x1a5)]))return![];else _0x427922[_0x50bb6a(0x15e)]='2';}}async[a56_0x5f385d(0x177)](){const _0x1841b0=a56_0x5f385d,_0x52c475={'akteo':function(_0x4068d7,_0x2c2d9c){return _0x4068d7(_0x2c2d9c);},'bGatM':function(_0x17fcfc,_0x4d1812,_0x1e1682){return _0x17fcfc(_0x4d1812,_0x1e1682);},'tPYRV':_0x1841b0(0x194),'FdSkT':_0x1841b0(0x171),'ukXUz':function(_0x22113f,_0x202737){return _0x22113f(_0x202737);},'kgyZE':function(_0x2503e7,_0x38a5f1){return _0x2503e7===_0x38a5f1;},'wpsMn':_0x1841b0(0x17e),'XfekP':_0x1841b0(0x158),'Ciyjq':_0x1841b0(0x1d2),'WfiyN':'exec','vOkKh':function(_0x1417e8,_0x3199a9){return _0x1417e8===_0x3199a9;},'STzLc':_0x1841b0(0x155),'tOWrm':'HiuGf','ODRCY':function(_0x30d163,_0x5c7f6c,_0x6ee150,_0x2f9e78){return _0x30d163(_0x5c7f6c,_0x6ee150,_0x2f9e78);},'JNmbr':_0x1841b0(0x1c0),'LLgcY':_0x1841b0(0x1b2),'HIOux':function(_0x136a0a,_0x2b50eb){return _0x136a0a===_0x2b50eb;},'xHjuz':_0x1841b0(0x1b1),'ejlUU':_0x1841b0(0x1c4),'EjRgk':_0x1841b0(0x1ae)},_0x264b81=await this.#getBinaryPath(),_0x58022e={};_0x58022e['flags']='a';const _0x438082=fs[_0x1841b0(0x188)](this.#logfile,_0x58022e),_0x133d8d=await this[_0x1841b0(0x156)](),_0x443ef6=await this['createPercyConfig']();if(!_0x133d8d){if(_0x52c475[_0x1841b0(0x15a)](_0x52c475[_0x1841b0(0x195)],_0x52c475[_0x1841b0(0x195)]))return![];else{const _0x415b03=_0x52c475['bGatM'](_0x47c5fa,_0x585e95,[_0x52c475[_0x1841b0(0x1a9)]]);_0x415b03['on'](_0x52c475[_0x1841b0(0x18b)],_0x186367=>{const _0x4d3113=_0x1841b0;this['isProcessRunning']=![],_0x52c475[_0x4d3113(0x1bf)](_0x469e40,_0x186367);});}}const _0x429fe4=[(this.#isApp?_0x52c475[_0x1841b0(0x19f)]:_0x52c475[_0x1841b0(0x19d)])+_0x1841b0(0x1c6)];_0x443ef6&&(_0x52c475[_0x1841b0(0x16d)](_0x52c475['STzLc'],_0x52c475[_0x1841b0(0x170)])?(this['isProcessRunning']=![],_0x52c475[_0x1841b0(0x1bf)](_0x392667,_0x11ae63)):_0x429fe4[_0x1841b0(0x159)]('-c',_0x443ef6));const _0x2e17b5={};_0x2e17b5[_0x1841b0(0x1c1)]=_0x133d8d,this.#proc=_0x52c475['ODRCY'](spawn,_0x264b81,_0x429fe4,{'env':Object[_0x1841b0(0x160)](process[_0x1841b0(0x17d)],_0x2e17b5)}),this.#proc['stdout'][_0x1841b0(0x1b9)](_0x438082),this.#proc['stderr']['pipe'](_0x438082),this[_0x1841b0(0x1ad)]=!![];var _0x4e7493=this;this.#proc['on'](_0x52c475['FdSkT'],function(_0x3ea862){const _0x55b4da=_0x1841b0,_0x2c66de={'Lcacl':function(_0x37e9ca,_0x3f5272){return _0x52c475['ukXUz'](_0x37e9ca,_0x3f5272);}};_0x52c475[_0x55b4da(0x15a)](_0x52c475[_0x55b4da(0x199)],_0x52c475['wpsMn'])?_0x4e7493['isProcessRunning']=![]:(_0x1d337a[_0x55b4da(0x189)]('Error\x20creating\x20percy\x20config:\x20'+_0xb7000e),_0x2c66de[_0x55b4da(0x186)](_0x2d0869,null));});do{if(_0x52c475[_0x1841b0(0x15a)](_0x52c475[_0x1841b0(0x197)],_0x52c475[_0x1841b0(0x15d)]))return this[_0x1841b0(0x1ad)];else{const _0x275984=await this[_0x1841b0(0x1a8)]();if(_0x275984)return _0x52c475[_0x1841b0(0x1ba)](_0x52c475[_0x1841b0(0x1c7)],_0x52c475[_0x1841b0(0x1be)])?null:(logger[_0x1841b0(0x16c)](_0x52c475[_0x1841b0(0x154)]),!![]);await this.#sleep(0x3e8);}}while(this[_0x1841b0(0x1ad)]);return![];}async['stop'](){const _0x20f2a0=a56_0x5f385d,_0x4e3b06={'ZhVkZ':function(_0x59d805,_0x36be71){return _0x59d805!==_0x36be71;},'kbgSU':_0x20f2a0(0x16f),'UILKH':function(_0x2995fb,_0xe4d668){return _0x2995fb(_0xe4d668);},'qSFzU':function(_0x57d406,_0xdcabc2){return _0x57d406===_0xdcabc2;},'wsdYA':_0x20f2a0(0x168),'sTiTn':_0x20f2a0(0x1d1),'uxgGa':function(_0x22191b,_0x1a58c4,_0x46f20c){return _0x22191b(_0x1a58c4,_0x46f20c);},'qlGEl':_0x20f2a0(0x194),'uxLGB':_0x20f2a0(0x171)},_0x95973=await this.#getBinaryPath();return new Promise((_0x110314,_0x2729a9)=>{const _0x4d58ec=_0x20f2a0;if(_0x4e3b06[_0x4d58ec(0x17c)](_0x4e3b06[_0x4d58ec(0x198)],_0x4e3b06[_0x4d58ec(0x191)]))return new _0x146797(_0x260204=>_0x50fe45(_0x260204,_0x5eecc9));else{const _0x9748b5=_0x4e3b06['uxgGa'](spawn,_0x95973,[_0x4e3b06[_0x4d58ec(0x1ca)]]);_0x9748b5['on'](_0x4e3b06[_0x4d58ec(0x1a2)],_0x5a0cc0=>{const _0xa3c0a2=_0x4d58ec;_0x4e3b06[_0xa3c0a2(0x19e)](_0x4e3b06['kbgSU'],_0x4e3b06['kbgSU'])?_0x54e8e3[_0xa3c0a2(0x159)]('-c',_0x3dedfd):(this[_0xa3c0a2(0x1ad)]=![],_0x4e3b06[_0xa3c0a2(0x193)](_0x110314,_0x5a0cc0));});}});}[a56_0x5f385d(0x153)](){const _0x639cc4=a56_0x5f385d;return this[_0x639cc4(0x1ad)];}async[a56_0x5f385d(0x156)](){const _0x477e7a=a56_0x5f385d,_0x2f1fa5={'OhAgT':function(_0x2bcd8e,_0x3f31b9){return _0x2bcd8e(_0x3f31b9);},'Ebdic':function(_0x318824,_0x3708c8){return _0x318824+_0x3708c8;},'IBZdO':_0x477e7a(0x164),'UqwUJ':function(_0x585b29,_0x55e606){return _0x585b29!==_0x55e606;},'AcPwX':_0x477e7a(0x1b7),'VnGBH':'app','hQVSn':_0x477e7a(0x1ac),'EyVqy':_0x477e7a(0x1b5),'fwoqm':'Percy\x20fetch\x20token\x20success','JroKH':function(_0x59010f,_0x30b5b7){return _0x59010f!==_0x30b5b7;},'QuzrG':_0x477e7a(0x162)},_0x37aa3a=this.#config[_0x477e7a(0x173)];try{if(_0x2f1fa5[_0x477e7a(0x185)](_0x2f1fa5[_0x477e7a(0x18a)],_0x2f1fa5[_0x477e7a(0x18a)])){const _0xdc5dc1={'VVnoo':function(_0x5d27ed,_0x2bca41){const _0x1473b5=_0x477e7a;return _0x2f1fa5[_0x1473b5(0x1bb)](_0x5d27ed,_0x2bca41);},'oAkwS':function(_0x1758f9,_0xd08292){const _0x1875d9=_0x477e7a;return _0x2f1fa5[_0x1875d9(0x1c8)](_0x1758f9,_0xd08292);},'FjGgz':_0x2f1fa5[_0x477e7a(0x165)]};_0x2ce27c[_0x477e7a(0x1ce)](_0x35720f,_0x53149b[_0x477e7a(0x1a4)](_0x414fc3),_0x26ef21=>{const _0x4afe6a=_0x477e7a;_0x26ef21&&(_0x52576e[_0x4afe6a(0x189)](_0x4afe6a(0x163)+_0x26ef21),_0xdc5dc1[_0x4afe6a(0x157)](_0x46e862,null)),_0x4ee61c[_0x4afe6a(0x16c)](_0xdc5dc1[_0x4afe6a(0x1cc)](_0xdc5dc1[_0x4afe6a(0x1a6)],_0x1bd343)),_0xdc5dc1[_0x4afe6a(0x157)](_0x3b1834,_0x55ddbf);});}else{const _0x4c41a0=this.#isApp?_0x2f1fa5[_0x477e7a(0x182)]:_0x2f1fa5[_0x477e7a(0x1c2)],_0x3246b8=await helper['nodeRequest'](_0x2f1fa5['EyVqy'],_0x477e7a(0x17f)+_0x37aa3a+'&type='+_0x4c41a0,{},this.#config),_0x35ecb1=_0x3246b8[_0x477e7a(0x18d)];return logger[_0x477e7a(0x16c)](_0x2f1fa5[_0x477e7a(0x1b4)]),_0x35ecb1[_0x477e7a(0x19a)];}}catch(_0x2bdbc5){if(_0x2f1fa5[_0x477e7a(0x180)](_0x2f1fa5['QuzrG'],_0x2f1fa5['QuzrG']))_0x48b96c[_0x477e7a(0x1ad)]=![];else return logger[_0x477e7a(0x189)](_0x477e7a(0x161)+_0x2bdbc5),null;}}async['createPercyConfig'](){const _0x5148b9=a56_0x5f385d,_0x4bfdbd={'osIOp':function(_0x30d5e1,_0x24ad44){return _0x30d5e1(_0x24ad44);},'pEsDa':function(_0x14af31,_0x2635ca){return _0x14af31+_0x2635ca;},'ebRsT':'Percy\x20config\x20created\x20at\x20','peMHF':function(_0x2b513d,_0x5c321c){return _0x2b513d(_0x5c321c);},'ZmDFX':_0x5148b9(0x1ae),'iEnuR':function(_0xc6cd5a,_0x42e137){return _0xc6cd5a(_0x42e137);},'obuAy':function(_0x14eb28,_0x3d72b7){return _0x14eb28!==_0x3d72b7;},'ezZDb':'SJgiI','gJYMw':_0x5148b9(0x174),'vUvdA':function(_0x5754eb,_0xfa4e8d){return _0x5754eb!==_0xfa4e8d;},'ljYXU':_0x5148b9(0x1b8),'SGGOs':_0x5148b9(0x196)};if(!this.#config[_0x5148b9(0x183)]){if(_0x4bfdbd['obuAy'](_0x4bfdbd[_0x5148b9(0x1c3)],_0x4bfdbd['ezZDb']))_0x9fb244&&(_0x25fcc6[_0x5148b9(0x189)]('Error\x20creating\x20percy\x20config:\x20'+_0x1547ba),_0x4bfdbd['osIOp'](_0x1fbcd7,null)),_0x30a2a9[_0x5148b9(0x16c)](_0x4bfdbd[_0x5148b9(0x181)](_0x4bfdbd[_0x5148b9(0x15f)],_0x577359)),_0x4bfdbd[_0x5148b9(0x1a3)](_0x290a5b,_0x56ad92);else return null;}const _0x26dd92=path['join'](os[_0x5148b9(0x1cd)](),_0x4bfdbd[_0x5148b9(0x187)]),_0x142509=this.#config[_0x5148b9(0x183)];if(!_0x142509['version']){if(_0x4bfdbd['vUvdA'](_0x4bfdbd[_0x5148b9(0x192)],_0x4bfdbd[_0x5148b9(0x15b)]))_0x142509[_0x5148b9(0x15e)]='2';else return _0x12695b['debug'](_0x4bfdbd['ZmDFX']),!![];}return new Promise((_0xd2d8fc,_0x130939)=>{const _0x215012=_0x5148b9,_0x292d53={'TTtzf':function(_0x1363cf,_0xc47093){return _0x4bfdbd['iEnuR'](_0x1363cf,_0xc47093);},'NUBIt':function(_0x4aee44,_0x3d1568){const _0x1e081a=a56_0x1974;return _0x4bfdbd[_0x1e081a(0x181)](_0x4aee44,_0x3d1568);},'bNVAj':_0x4bfdbd[_0x215012(0x15f)]};fs[_0x215012(0x1ce)](_0x26dd92,JSON[_0x215012(0x1a4)](_0x142509),_0x1470ab=>{const _0xd9e78f=_0x215012;_0x1470ab&&(logger[_0xd9e78f(0x189)](_0xd9e78f(0x163)+_0x1470ab),_0x292d53[_0xd9e78f(0x16e)](_0xd2d8fc,null)),logger[_0xd9e78f(0x16c)](_0x292d53[_0xd9e78f(0x169)](_0x292d53[_0xd9e78f(0x1a1)],_0x26dd92)),_0x292d53[_0xd9e78f(0x16e)](_0xd2d8fc,_0x26dd92);});});}}module[a56_0x5f385d(0x1c5)]=Percy;