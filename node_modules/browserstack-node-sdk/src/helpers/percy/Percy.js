const a56_0x9d8b32=a56_0x4e26;(function(_0x41fdf9,_0x575075){const _0x5b31ef=a56_0x4e26,_0x5b4171=_0x41fdf9();while(!![]){try{const _0x2ab7fe=parseInt(_0x5b31ef(0x137))/0x1*(parseInt(_0x5b31ef(0xd7))/0x2)+parseInt(_0x5b31ef(0xf6))/0x3+parseInt(_0x5b31ef(0x128))/0x4*(parseInt(_0x5b31ef(0xee))/0x5)+-parseInt(_0x5b31ef(0x144))/0x6*(parseInt(_0x5b31ef(0xd6))/0x7)+-parseInt(_0x5b31ef(0x11c))/0x8*(-parseInt(_0x5b31ef(0x105))/0x9)+parseInt(_0x5b31ef(0xec))/0xa*(-parseInt(_0x5b31ef(0x13d))/0xb)+-parseInt(_0x5b31ef(0x11b))/0xc*(parseInt(_0x5b31ef(0x10d))/0xd);if(_0x2ab7fe===_0x575075)break;else _0x5b4171['push'](_0x5b4171['shift']());}catch(_0x1d5887){_0x5b4171['push'](_0x5b4171['shift']());}}}(a56_0x45bd,0x53d43));const fs=require('fs'),path=require(a56_0x9d8b32(0x13a)),os=require('os'),{spawn}=require('child_process'),helper=require(a56_0x9d8b32(0x10a)),logger=require(a56_0x9d8b32(0x114))[a56_0x9d8b32(0x142)],{logDir}=require(a56_0x9d8b32(0x114)),PercyBinary=require(a56_0x9d8b32(0x113));function a56_0x4e26(_0x3ff432,_0x5192e7){const _0x45bdf8=a56_0x45bd();return a56_0x4e26=function(_0x4e2644,_0x4a9b42){_0x4e2644=_0x4e2644-0xd0;let _0x593174=_0x45bdf8[_0x4e2644];return _0x593174;},a56_0x4e26(_0x3ff432,_0x5192e7);}function a56_0x45bd(){const _0x5a565c=[':start','DRbcK','path','rsckG','LjDmY','1133fUSpNS','xshwP','azFHm','vVWjR','app','winstonLogger','stop','357462YOwfoD','app:exec','ioIOg','flags','KYMgZ','vswKP','uLmOF','jWyfI','GIpUh','Percy\x20unable\x20to\x20fetch\x20project\x20token:\x20','JUkLv','xYcJi','FvlCB','tiqOS','QFlBh','eMQeG','MYLCW','MbVwW','CkVCq','Percy\x20fetch\x20token\x20success','RpdYG','Uokcj','14SbJAkm','32666xFnkCJ','exec:stop','WWnhW','ozieM','pipe','Percy\x20config\x20created\x20at\x20','alTeg','automate','LGCiV','UoyNn','Uasul','debug','createPercyConfig','rwSoT','data','error','XsyRS','vhUYN','percy.log','nodeRequest','version','59990TpkJHC','start','10cbowHX','PeZsv','close','PHygz','SiLaS','OtziV','fGEDo','api/app_percy/get_project_token?name=','1741317xGGFmE','createWriteStream','VAztu','DrQxu','YNdQl','Error\x20creating\x20percy\x20config:\x20','EApLI','lsiDk','itLYQ','ShyQm','nPrcX','jjpuN','Njldo','creQZ','&type=','1009332zAUnUQ','env','Mmvue','token','sdLUF','../helper','WpgCS','exec','39KUKXud','OKZwk','isProcessRunning','QvPqh','XmdbT','nvRke','./PercyBinary','../logger','Percy\x20healthcheck\x20successful','mPIbF','GosjA','QOnjz','oxdqS','juzjO','4205172RSzBzs','48XCDEaE','lJqVG','fetchPercyToken','percyOptions','GET','healthcheck','oQgzw','hrurb','zdrDu','dccLI','stderr','push','907444RgEpHK','zkiTY','HcKGd','maxNC','VbiHu','liHhL','projectName','vLDFi','BbcaT','rNqRV','http://localhost:5338','FxnOK','FGOYg','stdout','stringify','26IUHcqX'];a56_0x45bd=function(){return _0x5a565c;};return a56_0x45bd();}class Percy{#logfile=path['join'](logDir,a56_0x9d8b32(0xe9));#address=process[a56_0x9d8b32(0x106)]['PERCY_SERVER_ADDRESS']||a56_0x9d8b32(0x132);#binaryPath=null;#config=null;#proc=null;#isApp=![];[a56_0x9d8b32(0x10f)]=![];constructor(_0x443163){const _0x4da776=a56_0x9d8b32,_0x3f7456={'Uasul':function(_0x195fd7,_0x7552cd){return _0x195fd7(_0x7552cd);},'jWyfI':function(_0x230a40,_0x426f52){return _0x230a40+_0x426f52;},'JaLHs':'Percy\x20config\x20created\x20at\x20','WWnhW':function(_0xb53611,_0x58c3ce){return _0xb53611!==_0x58c3ce;},'EApLI':_0x4da776(0x150)};this.#config=_0x443163,!!_0x443163[_0x4da776(0x141)]&&(_0x3f7456[_0x4da776(0xd9)](_0x3f7456[_0x4da776(0xfc)],_0x3f7456[_0x4da776(0xfc)])?(_0x169363&&(_0x179471['error'](_0x4da776(0xfb)+_0x59ccbe),_0x3f7456[_0x4da776(0xe1)](_0x20d26d,null)),_0x4e2851['debug'](_0x3f7456[_0x4da776(0x14b)](_0x3f7456['JaLHs'],_0xde7c7e)),_0x3f7456[_0x4da776(0xe1)](_0x5ae6a5,_0xe397a3)):this.#isApp=!![]);}async #getBinaryPath(){const _0x59d519=a56_0x9d8b32,_0x2c20ea={};_0x2c20ea['jgNdi']=_0x59d519(0x115),_0x2c20ea[_0x59d519(0x146)]=function(_0x5f5134,_0x38d20f){return _0x5f5134!==_0x38d20f;},_0x2c20ea['QFlBh']=_0x59d519(0x118);const _0x39b37c=_0x2c20ea;if(!this.#binaryPath){if(_0x39b37c[_0x59d519(0x146)](_0x39b37c[_0x59d519(0x152)],_0x39b37c[_0x59d519(0x152)]))return _0x4069f2[_0x59d519(0xe2)](_0x39b37c['jgNdi']),!![];else{const _0x2c67e9=new PercyBinary();this.#binaryPath=await _0x2c67e9['getBinaryPath'](this.#config);}}return this.#binaryPath;}async #sleep(_0x2faf8d){return new Promise(_0x370d2b=>setTimeout(_0x370d2b,_0x2faf8d));}async[a56_0x9d8b32(0x121)](){const _0x225075=a56_0x9d8b32,_0x1fbdbb={'PeZsv':function(_0x340e2a,_0x4681d6){return _0x340e2a(_0x4681d6);},'KYMgZ':function(_0x4c6fb2,_0x39c9fc){return _0x4c6fb2(_0x39c9fc);},'JUkLv':function(_0x120735,_0x4e51c2){return _0x120735(_0x4e51c2);},'LcZXs':function(_0x117ae9,_0x56231a,_0x24f0f3){return _0x117ae9(_0x56231a,_0x24f0f3);},'vhUYN':_0x225075(0xd8),'BVVJW':'close','rwSoT':function(_0x234bce,_0x11677f){return _0x234bce!==_0x11677f;},'zkiTY':'LudWk','CeMSE':_0x225075(0x120),'rNqRV':'percy/healthcheck','dFNTI':_0x225075(0xe0),'zdrDu':_0x225075(0xfd)};try{if(_0x1fbdbb[_0x225075(0xe4)](_0x1fbdbb[_0x225075(0x129)],_0x1fbdbb['zkiTY']))_0x50a016[_0x225075(0xe6)]('Error\x20creating\x20percy\x20config:\x20'+_0x4a2dc2),_0x1fbdbb[_0x225075(0xef)](_0x53a162,null);else{const _0x1fc1f2=await helper[_0x225075(0xea)](_0x1fbdbb['CeMSE'],_0x1fbdbb[_0x225075(0x131)],null,null,this.#address);if(_0x1fc1f2){if(_0x1fbdbb['rwSoT'](_0x1fbdbb['dFNTI'],_0x1fbdbb['dFNTI']))this[_0x225075(0x10f)]=![],_0x1fbdbb[_0x225075(0x148)](_0x16de23,_0x35be76);else return!![];}}}catch(_0x2e3c04){if(_0x1fbdbb[_0x225075(0xe4)](_0x1fbdbb[_0x225075(0x124)],_0x1fbdbb['zdrDu'])){const _0x286de1=_0x1fbdbb['LcZXs'](_0x2bb84f,_0x147f8f,[_0x1fbdbb[_0x225075(0xe8)]]);_0x286de1['on'](_0x1fbdbb['BVVJW'],_0x12a0fd=>{const _0x4380a9=_0x225075;this[_0x4380a9(0x10f)]=![],_0x1fbdbb[_0x4380a9(0x14e)](_0x3ee60c,_0x12a0fd);});}else return![];}}async[a56_0x9d8b32(0xed)](){const _0xfbf66a=a56_0x9d8b32,_0x6c417={'oxdqS':function(_0x16ab2b,_0x1e426f){return _0x16ab2b!==_0x1e426f;},'itLYQ':_0xfbf66a(0x107),'ozieM':function(_0x2233fb,_0x20b2bf){return _0x2233fb(_0x20b2bf);},'tiqOS':function(_0x1abdb3,_0x2011ef){return _0x1abdb3+_0x2011ef;},'dccLI':_0xfbf66a(0xdc),'fGEDo':_0xfbf66a(0xd4),'FxnOK':'fxhiv','WpgCS':_0xfbf66a(0x145),'nvRke':_0xfbf66a(0x10c),'VbiHu':function(_0x4abdad,_0x318f34){return _0x4abdad===_0x318f34;},'xshwP':_0xfbf66a(0x12d),'tJDuu':function(_0x15eeca,_0x2d6635,_0x1144e8,_0x213436){return _0x15eeca(_0x2d6635,_0x1144e8,_0x213436);},'BbcaT':_0xfbf66a(0xf0),'XmdbT':function(_0x1cdd78,_0x31cca9){return _0x1cdd78!==_0x31cca9;},'fWNHq':_0xfbf66a(0xe7),'sdLUF':_0xfbf66a(0xff),'OtziV':'ZdZsV','MYLCW':_0xfbf66a(0x115)},_0xf98c13=await this.#getBinaryPath(),_0xeec2f0={};_0xeec2f0[_0xfbf66a(0x147)]='a';const _0x57a3cb=fs[_0xfbf66a(0xf7)](this.#logfile,_0xeec2f0),_0x407f1b=await this[_0xfbf66a(0x11e)](),_0x533eeb=await this[_0xfbf66a(0xe3)]();if(!_0x407f1b)return _0x6c417[_0xfbf66a(0x119)](_0x6c417[_0xfbf66a(0xf4)],_0x6c417[_0xfbf66a(0x133)])?![]:!![];const _0x25a520=[(this.#isApp?_0x6c417[_0xfbf66a(0x10b)]:_0x6c417[_0xfbf66a(0x112)])+_0xfbf66a(0x138)];_0x533eeb&&(_0x6c417[_0xfbf66a(0x12c)](_0x6c417[_0xfbf66a(0x13e)],_0x6c417[_0xfbf66a(0x13e)])?_0x25a520['push']('-c',_0x533eeb):_0x19ee38[_0xfbf66a(0x127)]('-c',_0xca22a4));const _0x34725e={};_0x34725e['PERCY_TOKEN']=_0x407f1b,this.#proc=_0x6c417['tJDuu'](spawn,_0xf98c13,_0x25a520,{'env':Object['assign'](process[_0xfbf66a(0x106)],_0x34725e)}),this.#proc[_0xfbf66a(0x135)][_0xfbf66a(0xdb)](_0x57a3cb),this.#proc[_0xfbf66a(0x126)][_0xfbf66a(0xdb)](_0x57a3cb),this['isProcessRunning']=!![];var _0x5b4e6e=this;this.#proc['on'](_0x6c417[_0xfbf66a(0x130)],function(_0x439d5f){const _0x288202=_0xfbf66a;if(_0x6c417['oxdqS'](_0x6c417[_0x288202(0xfe)],_0x6c417['itLYQ']))return null;else _0x5b4e6e[_0x288202(0x10f)]=![];});do{if(_0x6c417[_0xfbf66a(0x111)](_0x6c417['fWNHq'],_0x6c417[_0xfbf66a(0x109)])){const _0x3f1af8=await this[_0xfbf66a(0x121)]();if(_0x3f1af8){if(_0x6c417[_0xfbf66a(0x12c)](_0x6c417[_0xfbf66a(0xf3)],_0x6c417['OtziV']))return logger[_0xfbf66a(0xe2)](_0x6c417[_0xfbf66a(0xd0)]),!![];else _0xa465d2['writeFile'](_0xae1389,_0x2c534b['stringify'](_0x2b6831),_0xd7cdd7=>{const _0x2d3b4a=_0xfbf66a;_0xd7cdd7&&(_0x1a4115[_0x2d3b4a(0xe6)](_0x2d3b4a(0xfb)+_0xd7cdd7),_0x6c417[_0x2d3b4a(0xda)](_0x5db5b5,null)),_0x18f81d['debug'](_0x6c417[_0x2d3b4a(0x151)](_0x6c417[_0x2d3b4a(0x125)],_0x32b6c8)),_0x6c417[_0x2d3b4a(0xda)](_0x8da886,_0x4deb57);});}await this.#sleep(0x3e8);}else return new _0x3b05a5(_0x3dff68=>_0x509fab(_0x3dff68,_0x411ff3));}while(this[_0xfbf66a(0x10f)]);return![];}async[a56_0x9d8b32(0x143)](){const _0x558b6c=a56_0x9d8b32,_0x19db15={'DRbcK':function(_0xf2c865,_0x51de33){return _0xf2c865===_0x51de33;},'alTeg':_0x558b6c(0xf9),'OKZwk':function(_0x31a75f,_0x3b37f6){return _0x31a75f(_0x3b37f6);},'VAztu':function(_0x2fed4f,_0x3788a1){return _0x2fed4f!==_0x3788a1;},'maxNC':_0x558b6c(0x13b),'lJqVG':function(_0xac0483,_0x1b657a,_0x3e6846){return _0xac0483(_0x1b657a,_0x3e6846);},'MbVwW':_0x558b6c(0xd8),'uLmOF':_0x558b6c(0xf0)},_0x40312e=await this.#getBinaryPath();return new Promise((_0xb75c26,_0xbcc994)=>{const _0xed1c02=_0x558b6c;if(_0x19db15[_0xed1c02(0xf8)](_0x19db15[_0xed1c02(0x12b)],_0x19db15[_0xed1c02(0x12b)]))return _0x328aeb[_0xed1c02(0xe6)](_0xed1c02(0x14d)+_0x347544),null;else{const _0x477583=_0x19db15[_0xed1c02(0x11d)](spawn,_0x40312e,[_0x19db15[_0xed1c02(0xd1)]]);_0x477583['on'](_0x19db15[_0xed1c02(0x14a)],_0x3b1a28=>{const _0x5e8230=_0xed1c02;_0x19db15[_0x5e8230(0x139)](_0x19db15[_0x5e8230(0xdd)],_0x19db15['alTeg'])?(this[_0x5e8230(0x10f)]=![],_0x19db15[_0x5e8230(0x10e)](_0xb75c26,_0x3b1a28)):_0x360bbc['isProcessRunning']=![];});}});}['isRunning'](){const _0x2ea639=a56_0x9d8b32;return this[_0x2ea639(0x10f)];}async[a56_0x9d8b32(0x11e)](){const _0x27c773=a56_0x9d8b32,_0x11f415={};_0x11f415[_0x27c773(0xd2)]=function(_0x25496f,_0x8ce249){return _0x25496f===_0x8ce249;},_0x11f415['SiLaS']=_0x27c773(0x110),_0x11f415[_0x27c773(0x11a)]=_0x27c773(0x141),_0x11f415['creQZ']=_0x27c773(0xde),_0x11f415[_0x27c773(0x134)]=_0x27c773(0x120),_0x11f415[_0x27c773(0x100)]=_0x27c773(0xd3),_0x11f415[_0x27c773(0xdf)]=function(_0x2aa4e4,_0x20c08f){return _0x2aa4e4!==_0x20c08f;},_0x11f415[_0x27c773(0xf1)]=_0x27c773(0x140),_0x11f415[_0x27c773(0x149)]=_0x27c773(0x153);const _0x73d253=_0x11f415,_0xbb469f=this.#config[_0x27c773(0x12e)];try{if(_0x73d253[_0x27c773(0xd2)](_0x73d253[_0x27c773(0xf2)],_0x73d253[_0x27c773(0xf2)])){const _0x3b0955=this.#isApp?_0x73d253['juzjO']:_0x73d253[_0x27c773(0x103)],_0x3bd719=await helper[_0x27c773(0xea)](_0x73d253[_0x27c773(0x134)],_0x27c773(0xf5)+_0xbb469f+_0x27c773(0x104)+_0x3b0955,{},this.#config),_0xd718f4=_0x3bd719[_0x27c773(0xe5)];return logger[_0x27c773(0xe2)](_0x73d253['nPrcX']),_0xd718f4[_0x27c773(0x108)];}else return![];}catch(_0x1b68ba){if(_0x73d253['LGCiV'](_0x73d253[_0x27c773(0xf1)],_0x73d253[_0x27c773(0x149)]))return logger[_0x27c773(0xe6)](_0x27c773(0x14d)+_0x1b68ba),null;else _0x395c40[_0x27c773(0xeb)]='2';}}async['createPercyConfig'](){const _0xc0140c=a56_0x9d8b32,_0x125e00={'YNdQl':function(_0x11b2d5,_0x2aa695){return _0x11b2d5(_0x2aa695);},'UXWsN':function(_0x1c29dc,_0x296269){return _0x1c29dc+_0x296269;},'oQgzw':'Percy\x20config\x20created\x20at\x20','azFHm':function(_0x341e88,_0x3f0b97){return _0x341e88!==_0x3f0b97;},'vLDFi':'gNDmK','Njldo':_0xc0140c(0x117),'xYcJi':'percy.json','Uokcj':_0xc0140c(0x13c),'HcKGd':_0xc0140c(0x116)};if(!this.#config['percyOptions'])return _0x125e00[_0xc0140c(0x13f)](_0x125e00[_0xc0140c(0x12f)],_0x125e00[_0xc0140c(0x102)])?null:this[_0xc0140c(0x10f)];const _0x585eb7=path['join'](os['tmpdir'](),_0x125e00[_0xc0140c(0x14f)]),_0x45cf72=this.#config[_0xc0140c(0x11f)];if(!_0x45cf72[_0xc0140c(0xeb)]){if(_0x125e00[_0xc0140c(0x13f)](_0x125e00[_0xc0140c(0xd5)],_0x125e00[_0xc0140c(0x12a)]))_0x45cf72[_0xc0140c(0xeb)]='2';else return![];}return new Promise((_0x3c49c1,_0x551637)=>{const _0x19f9b1=_0xc0140c,_0x272526={'jjpuN':function(_0x2378bb,_0xa5feb6){const _0x2ed5d1=a56_0x4e26;return _0x125e00[_0x2ed5d1(0xfa)](_0x2378bb,_0xa5feb6);},'GIpUh':function(_0x2a56c5,_0x2673a2){return _0x125e00['UXWsN'](_0x2a56c5,_0x2673a2);},'hrurb':_0x125e00[_0x19f9b1(0x122)]};fs['writeFile'](_0x585eb7,JSON[_0x19f9b1(0x136)](_0x45cf72),_0x5f1c18=>{const _0x2429df=_0x19f9b1;_0x5f1c18&&(logger['error'](_0x2429df(0xfb)+_0x5f1c18),_0x272526[_0x2429df(0x101)](_0x3c49c1,null)),logger[_0x2429df(0xe2)](_0x272526[_0x2429df(0x14c)](_0x272526[_0x2429df(0x123)],_0x585eb7)),_0x272526[_0x2429df(0x101)](_0x3c49c1,_0x585eb7);});});}}module['exports']=Percy;